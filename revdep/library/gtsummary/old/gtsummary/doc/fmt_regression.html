<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Daniel D. Sjoberg" />


<title>Tutorial: fmt_regression</title>

<script>$(document).ready(function(){
    if (typeof $('[data-toggle="tooltip"]').tooltip === 'function') {
        $('[data-toggle="tooltip"]').tooltip();
    }
    if ($('[data-toggle="popover"]').popover === 'function') {
        $('[data-toggle="popover"]').popover();
    }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Tutorial: fmt_regression</h1>
<h4 class="author">Daniel D. Sjoberg</h4>
<h4 class="date">Last Updated: November 29, 2018</h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This vignette will walk a reader through the <code>fmt_regression()</code> function, and the various functions available to modify and make additions to an existing formatted regression table. <code>fmt_regression()</code> uses <code>broom::tidy()</code> to perform the initial model formatting, and can accommodate many different model types (e.g. <code>lm()</code>, <code>glm()</code>, <code>coxph()</code>, <code>survreg()</code> and more).</p>
<p>To start, a quick note on the <code>magrittr</code> package’s pipe function, <code>%&gt;%</code>. By default the pipe operator puts whatever is on the left hand side of <code>%&gt;%</code> into the first argument of the function on the right hand side. The pipe function can be used to make the code relating to <code>fmt_regression()</code> easier to use, but it is <em>not</em> required. Here are a few examples of how <code>%&gt;%</code> translates into typical R notation.</p>
<pre><code>x %&gt;% f() is equivalent to f(x)
x %&gt;% f(y) is equivalent to f(x, y)
y %&gt;% f(x, .) is equivalent to f(x, y)
z %&gt;% f(x, y, arg = .) is equivalent to f(x, y, arg = z)</code></pre>
</div>
<div id="basic-usage" class="section level2">
<h2>Basic Usage</h2>
<p>We will use the <code>trial</code> data set throughout this example. This set contains data from 200 patients randomized to a new adjuvant treatment or placebo. The outcome is a binary tumor response. Each variable in the data frame has been assigned an attribute label (i.e. <code>attr(trial$trt, &quot;label&quot;) == &quot;Treatment Randomization&quot;)</code></p>
<pre><code>trt      Treatment Randomization
age      Age, yrs
marker   Marker Level, ng/mL
stage    T Stage
grade    Grade
response Tumor Response</code></pre>
<p>The default output from <code>fmt_regression()</code> is meant to be publication ready. Let’s start by creating a regression model table from the <code>trial</code> data set included in the <code>gtsummary</code> package. We will predict tumor response using age, stage, and grade using a logistic regression model.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># build logistic regression model</span></a>
<a class="sourceLine" id="cb3-2" title="2">m1 =<span class="st"> </span><span class="kw">glm</span>(response <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>stage <span class="op">+</span><span class="st"> </span>grade, trial, <span class="dt">family =</span> <span class="kw">binomial</span>(<span class="dt">link =</span> <span class="st">&quot;logit&quot;</span>))</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co"># format results into data frame</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">fmt_regression</span>(m1, <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">N = 183</th>
<th align="left">OR</th>
<th align="left">95% CI</th>
<th align="left">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Age, yrs</td>
<td align="left">1.00</td>
<td align="left">0.98, 1.02</td>
<td align="left">0.9</td>
</tr>
<tr class="even">
<td align="left">T Stage</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">T1</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">T2</td>
<td align="left">1.49</td>
<td align="left">0.64, 3.49</td>
<td align="left">0.4</td>
</tr>
<tr class="odd">
<td align="left">T3</td>
<td align="left">0.65</td>
<td align="left">0.26, 1.58</td>
<td align="left">0.3</td>
</tr>
<tr class="even">
<td align="left">T4</td>
<td align="left">0.51</td>
<td align="left">0.22, 1.14</td>
<td align="left">0.10</td>
</tr>
<tr class="odd">
<td align="left">Grade</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">II</td>
<td align="left">0.55</td>
<td align="left">0.25, 1.19</td>
<td align="left">0.13</td>
</tr>
<tr class="even">
<td align="left">III</td>
<td align="left">0.79</td>
<td align="left">0.38, 1.64</td>
<td align="left">0.5</td>
</tr>
</tbody>
</table>
<p>Because the variables in the data set were labeled, the labels were carried through into the model regression results table. (Had the data not been labeled, the default is to display the variable name.) The model was recognized as logistic regression with coefficients exponentiated, so the header displayed “OR” for odds ratio. The correct reference group has also been added to the table.</p>
<p>Imagine you are not interested in the individual p-values for the stage and grade levels. You can use the <code>add_global()</code> function to add a global p-value for each. The <code>add_global()</code> function is a wrapper for <code>cars::Anova()</code>, which calculates LRT and Wald test statistics (a few other methods are also available depending on the type of model). The p-value presented is the default from <code>cars::Anova()</code> for your type of model. You can pass arguments to this function via <code>add_global()</code> to change the defaults.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># format results into data frame with global p-values</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">fmt_regression</span>(m1, <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span><span class="kw">add_global</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">N = 183</th>
<th align="left">OR</th>
<th align="left">95% CI</th>
<th align="left">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Age, yrs</td>
<td align="left">1.00</td>
<td align="left">0.98, 1.02</td>
<td align="left">0.9</td>
</tr>
<tr class="even">
<td align="left">T Stage</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">0.057</td>
</tr>
<tr class="odd">
<td align="left">T1</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">T2</td>
<td align="left">1.49</td>
<td align="left">0.64, 3.49</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">T3</td>
<td align="left">0.65</td>
<td align="left">0.26, 1.58</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">T4</td>
<td align="left">0.51</td>
<td align="left">0.22, 1.14</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Grade</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">0.3</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">II</td>
<td align="left">0.55</td>
<td align="left">0.25, 1.19</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">III</td>
<td align="left">0.79</td>
<td align="left">0.38, 1.64</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="format-model-results" class="section level2">
<h2>Format Model Results</h2>
<p>There are formatting options available, such as bolding and italicizing rows. In the example below, variable labels are bolded, and the levels of categorical levels are italicized.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># format results into data frame with global p-values</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">fmt_regression</span>(m1, <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw">bold_labels</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw">italicize_levels</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">N = 183</th>
<th align="left">OR</th>
<th align="left">95% CI</th>
<th align="left">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">1.00</td>
<td align="left">0.98, 1.02</td>
<td align="left">0.9</td>
</tr>
<tr class="even">
<td align="left"><strong>T Stage</strong></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><em>T1</em></td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><em>T2</em></td>
<td align="left">1.49</td>
<td align="left">0.64, 3.49</td>
<td align="left">0.4</td>
</tr>
<tr class="odd">
<td align="left"><em>T3</em></td>
<td align="left">0.65</td>
<td align="left">0.26, 1.58</td>
<td align="left">0.3</td>
</tr>
<tr class="even">
<td align="left"><em>T4</em></td>
<td align="left">0.51</td>
<td align="left">0.22, 1.14</td>
<td align="left">0.10</td>
</tr>
<tr class="odd">
<td align="left"><strong>Grade</strong></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><em>I</em></td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><em>II</em></td>
<td align="left">0.55</td>
<td align="left">0.25, 1.19</td>
<td align="left">0.13</td>
</tr>
<tr class="even">
<td align="left"><em>III</em></td>
<td align="left">0.79</td>
<td align="left">0.38, 1.64</td>
<td align="left">0.5</td>
</tr>
</tbody>
</table>
<p>The <code>fmt_regression()</code> has default methods for rounding p-values and model coefficients. The default p-value formatting function is <code>fmt_pvalue()</code> and <code>fmt_beta()</code> for the coefficients. In the example below, the large large p-values were rounded to 1 decimal place rather than 2.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># format results into data frame with global p-values</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">fmt_regression</span>(</a>
<a class="sourceLine" id="cb6-3" title="3">  m1, </a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="dt">pvalue_fun =</span> <span class="cf">function</span>(x) <span class="kw">fmt_pvalue</span>(x, <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb6-6" title="6">) </a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">N = 183</th>
<th align="left">OR</th>
<th align="left">95% CI</th>
<th align="left">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Age, yrs</td>
<td align="left">1.00</td>
<td align="left">0.98, 1.02</td>
<td align="left">0.89</td>
</tr>
<tr class="even">
<td align="left">T Stage</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">T1</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">T2</td>
<td align="left">1.49</td>
<td align="left">0.64, 3.49</td>
<td align="left">0.35</td>
</tr>
<tr class="odd">
<td align="left">T3</td>
<td align="left">0.65</td>
<td align="left">0.26, 1.58</td>
<td align="left">0.35</td>
</tr>
<tr class="even">
<td align="left">T4</td>
<td align="left">0.51</td>
<td align="left">0.22, 1.14</td>
<td align="left">0.10</td>
</tr>
<tr class="odd">
<td align="left">Grade</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">II</td>
<td align="left">0.55</td>
<td align="left">0.25, 1.19</td>
<td align="left">0.13</td>
</tr>
<tr class="even">
<td align="left">III</td>
<td align="left">0.79</td>
<td align="left">0.38, 1.64</td>
<td align="left">0.52</td>
</tr>
</tbody>
</table>
</div>
<div id="modify-header" class="section level2">
<h2>Modify Header</h2>
<p>The results of the regression model are stored in a data frame with named columns–<code>label</code>, <code>est</code>, <code>ci</code>, and <code>pvalue</code>. The header rows can be modified with the <code>modify_header()</code> function by referencing these columns.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># format results into data frame with global p-values</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">fmt_regression</span>(m1, <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">modify_header</span>(<span class="dt">label =</span> <span class="st">&quot; &quot;</span>, <span class="dt">est =</span> <span class="st">&quot;Odds Ratio&quot;</span>, <span class="dt">ci =</span> <span class="st">&quot;95% Confidence Interval&quot;</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th></th>
<th align="left">Odds Ratio</th>
<th align="left">95% Confidence Interval</th>
<th align="left">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Age, yrs</td>
<td align="left">1.00</td>
<td align="left">0.98, 1.02</td>
<td align="left">0.9</td>
</tr>
<tr class="even">
<td>T Stage</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td>T1</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td>T2</td>
<td align="left">1.49</td>
<td align="left">0.64, 3.49</td>
<td align="left">0.4</td>
</tr>
<tr class="odd">
<td>T3</td>
<td align="left">0.65</td>
<td align="left">0.26, 1.58</td>
<td align="left">0.3</td>
</tr>
<tr class="even">
<td>T4</td>
<td align="left">0.51</td>
<td align="left">0.22, 1.14</td>
<td align="left">0.10</td>
</tr>
<tr class="odd">
<td>Grade</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td>I</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td>II</td>
<td align="left">0.55</td>
<td align="left">0.25, 1.19</td>
<td align="left">0.13</td>
</tr>
<tr class="even">
<td>III</td>
<td align="left">0.79</td>
<td align="left">0.38, 1.64</td>
<td align="left">0.5</td>
</tr>
</tbody>
</table>
</div>
<div id="report-results-inline" class="section level2">
<h2>Report Results Inline</h2>
<p>Having a well formatted and reproducible table is a great. But we often need to report the results from a table in the text of an Rmarkdown report. Inline reporting has been made simple with <code>inline_text()</code>. We’ll continue to use the logistic regression model <code>m1</code> in this example.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">fmt_m1 =<span class="st"> </span><span class="kw">fmt_regression</span>(m1, <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-2" title="2">fmt_m1</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">N = 183</th>
<th align="left">OR</th>
<th align="left">95% CI</th>
<th align="left">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Age, yrs</td>
<td align="left">1.00</td>
<td align="left">0.98, 1.02</td>
<td align="left">0.9</td>
</tr>
<tr class="even">
<td align="left">T Stage</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">T1</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">T2</td>
<td align="left">1.49</td>
<td align="left">0.64, 3.49</td>
<td align="left">0.4</td>
</tr>
<tr class="odd">
<td align="left">T3</td>
<td align="left">0.65</td>
<td align="left">0.26, 1.58</td>
<td align="left">0.3</td>
</tr>
<tr class="even">
<td align="left">T4</td>
<td align="left">0.51</td>
<td align="left">0.22, 1.14</td>
<td align="left">0.10</td>
</tr>
<tr class="odd">
<td align="left">Grade</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="left">Ref.</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">II</td>
<td align="left">0.55</td>
<td align="left">0.25, 1.19</td>
<td align="left">0.13</td>
</tr>
<tr class="even">
<td align="left">III</td>
<td align="left">0.79</td>
<td align="left">0.38, 1.64</td>
<td align="left">0.5</td>
</tr>
</tbody>
</table>
<p>To report the result for <code>age</code>, use the following commands inline.</p>
<blockquote>
<p><code>`r inline_text(fmt_m1, &quot;age&quot;)`</code></p>
</blockquote>
<p>Here’s how the line will appear in your report.</p>
<blockquote>
<p>1.00 (95% CI 0.98, 1.02; p=0.9)</p>
</blockquote>
<p>It is reasonable that you’ll need to modify the text. To do this, use the <code>stat</code> option. You have access to following fields within the <code>stat</code> option. The <code>stat</code> option syntax follows the <code>glue::glue()</code> format with referenced R objects being inserted between curly brackets.</p>
<pre><code>{est}      Primary estimate (e.g. odds ratio, model coefficient)
{ll}       Rounded lower limit of confidence interval
{ul}       Rounded upper limit of confidence interval
{ci}       Rounded confidence interval. Lower and upper limits separated by a comma
{pvalue}   Rounded p-value
{p_pvalue} Rounded p-value with a &#39;p=&#39; or &#39;p&lt;&#39; prepended to the pvalue.</code></pre>
<blockquote>
<p>Age was not significantly associated with tumor response <code>`r inline_text(fmt_m1, &quot;age&quot;, stat = &quot;(OR {est}; 95% CI {ci}; {p_pvalue})&quot;)`</code>.</p>
</blockquote>
<blockquote>
<p>Age was not significantly associated with tumor response (OR 1.00; 95% CI 0.98, 1.02; p=0.9).</p>
</blockquote>
<p>If you’re printing results from a categorical variable, include the desired level after the variable name, e.g. <code>inline_text(fmt_m1, &quot;stage:T3&quot;)</code> resolves to “0.65 (95% CI 0.26, 1.58; p=0.3)”.</p>
</div>
<div id="gtsummary-kableextra" class="section level2">
<h2>gtsummary + kableExtra</h2>
<p>Remember how the results are stored in a data frame? Need that data frame for any reason (e.g. if you want to get extra fancy with <code>kableExtra</code>)? Use generic function as_tibble to extract an easy-to-use data frame from any fmt_regression object.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co">#make data frame out of fmt_regression object</span></a>
<a class="sourceLine" id="cb10-2" title="2">mod1_df &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(fmt_m1)</a></code></pre></div>
<p>If you want to customize anything with <code>knitr::kable</code> or <code>kableExtra</code>, you can use the above <code>as_tibble</code> along with our function <code>indent_key</code> which extracts the factors that you might want indented when knitting your table to HTML. (NOTE: Only load <code>library(kableExtra)</code> and use the below if knitting to HTML, this will not work with Word or PDF.) For more on customizing your tables with <code>kableExtra</code> check out the package’s <a href="https://haozhu233.github.io/kableExtra/awesome_table_in_html.html">vignette on HTML output</a>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">library</span>(kableExtra)</a>
<a class="sourceLine" id="cb11-3" title="3"></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="co"># knit pretty table with indent into HTM</span></a>
<a class="sourceLine" id="cb11-5" title="5">fmt_m1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="st">  </span><span class="kw">bold_labels</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="st">  </span><span class="kw">kable</span>(</a>
<a class="sourceLine" id="cb11-9" title="9">    <span class="dt">row.names =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb11-10" title="10">    <span class="dt">caption =</span> <span class="st">&quot;Regression Summary&quot;</span></a>
<a class="sourceLine" id="cb11-11" title="11">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="st">  </span><span class="co"># Below, using kableExtra functions to do things like change table style, add </span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="st">  </span><span class="co"># grouped column header, footnote, and indent variable categories</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="st">  </span><span class="kw">kable_styling</span>(</a>
<a class="sourceLine" id="cb11-15" title="15">    <span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>, <span class="st">&quot;hover&quot;</span>), <span class="co">#popular bootstrap styles</span></a>
<a class="sourceLine" id="cb11-16" title="16">    <span class="dt">font_size =</span> <span class="dv">16</span>,</a>
<a class="sourceLine" id="cb11-17" title="17">    <span class="dt">full_width =</span> F</a>
<a class="sourceLine" id="cb11-18" title="18">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-19" title="19"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;MVA&quot;</span> =<span class="st"> </span><span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#add grouped header if needed</span></a>
<a class="sourceLine" id="cb11-20" title="20"><span class="st">  </span><span class="kw">footnote</span>(<span class="dt">general =</span> <span class="st">&quot;Values calculated using logistic regression predicting response.&quot;</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-21" title="21"><span class="st">  </span><span class="kw">add_indent</span>(<span class="kw">indent_key</span>(fmt_m1)) </a></code></pre></div>
<table class="table table-striped table-condensed table-hover" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Regression Summary
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
MVA
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
N = 183
</th>
<th style="text-align:left;">
OR
</th>
<th style="text-align:left;">
95% CI
</th>
<th style="text-align:left;">
p-value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<strong>Age, yrs</strong>
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.98, 1.02
</td>
<td style="text-align:left;">
0.9
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>T Stage</strong>
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
T1
</td>
<td style="text-align:left;">
Ref.
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
T2
</td>
<td style="text-align:left;">
1.49
</td>
<td style="text-align:left;">
0.64, 3.49
</td>
<td style="text-align:left;">
0.4
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
T3
</td>
<td style="text-align:left;">
0.65
</td>
<td style="text-align:left;">
0.26, 1.58
</td>
<td style="text-align:left;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
T4
</td>
<td style="text-align:left;">
0.51
</td>
<td style="text-align:left;">
0.22, 1.14
</td>
<td style="text-align:left;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>Grade</strong>
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
I
</td>
<td style="text-align:left;">
Ref.
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
II
</td>
<td style="text-align:left;">
0.55
</td>
<td style="text-align:left;">
0.25, 1.19
</td>
<td style="text-align:left;">
0.13
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
III
</td>
<td style="text-align:left;">
0.79
</td>
<td style="text-align:left;">
0.38, 1.64
</td>
<td style="text-align:left;">
0.5
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; border: 0;" colspan="100%">
<span style="font-style: italic;">Note: </span>
</td>
</tr>
<tr>
<td style="padding: 0; border: 0;" colspan="100%">
<sup></sup> Values calculated using logistic regression predicting response.
</td>
</tr>
</tfoot>
</table>
</div>
<div id="under-the-hood" class="section level2">
<h2>Under the Hood</h2>
<p>When you print the output from the <code>fmt_regression()</code> function into the R console or into an Rmarkdown, there are default printing functions that are called in the background: <code>print.fmt_regression()</code> and <code>knit_print.fmt_regression()</code>. The true output from <code>fmt_regression()</code> is a named list, but when you print into the R console the interesting portions are displayed from the <code>.$model_tbl</code> data frame.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">ls</span>(fmt_m1)</a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co">#&gt; [1] &quot;inputs&quot;    &quot;model_obj&quot; &quot;model_tbl&quot; &quot;n&quot;</span></a></code></pre></div>
<p>There is additional information stored in the <code>fmt_regression()</code> output list.</p>
<ul>
<li><code>model_tbl</code> data frame with regression summary statistics</li>
<li><code>model_obj</code> regression model object</li>
<li><code>n</code> sample size</li>
<li><code>inputs</code> Inputs from the function call. Not only is the call stored, but the values of the inputs as well. For example, you can access the data frame passed to <code>fmt_table1()</code>.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">print.listof</span>(fmt_m1)</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="co">#&gt; model_tbl :</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">#&gt; # A tibble: 11 x 12</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="co">#&gt;    row_type var_type variable label     N est   ll    ul    ci   </span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#&gt;  1 header1  &lt;NA&gt;     &lt;NA&gt;     N = ~    NA OR    &lt;NA&gt;  &lt;NA&gt;  95% ~</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#&gt;  2 label    continu~ age      Age,~   183 1.00  0.98  1.02  0.98~</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#&gt;  3 label    categor~ stage    T St~   183 &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">#&gt;  4 level    categor~ stage    T1      183 Ref.  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">#&gt;  5 level    categor~ stage    T2      183 1.49  0.64  3.49  0.64~</span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="co">#&gt;  6 level    categor~ stage    T3      183 0.65  0.26  1.58  0.26~</span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co">#&gt;  7 level    categor~ stage    T4      183 0.51  0.22  1.14  0.22~</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="co">#&gt;  8 label    categor~ grade    Grade   183 &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="co">#&gt;  9 level    categor~ grade    I       183 Ref.  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="co">#&gt; 10 level    categor~ grade    II      183 0.55  0.25  1.19  0.25~</span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="co">#&gt; 11 level    categor~ grade    III     183 0.79  0.38  1.64  0.38~</span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="co">#&gt; # ... with 3 more variables: pvalue_exact &lt;dbl&gt;, pvalue &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb13-18" title="18"><span class="co">#&gt; #   p_pvalue &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb13-19" title="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-20" title="20"><span class="co">#&gt; n :</span></a>
<a class="sourceLine" id="cb13-21" title="21"><span class="co">#&gt; [1] 183</span></a>
<a class="sourceLine" id="cb13-22" title="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-23" title="23"><span class="co">#&gt; model_obj :</span></a>
<a class="sourceLine" id="cb13-24" title="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-25" title="25"><span class="co">#&gt; Call:  glm(formula = response ~ age + stage + grade, family = binomial(link = &quot;logit&quot;), </span></a>
<a class="sourceLine" id="cb13-26" title="26"><span class="co">#&gt;     data = trial)</span></a>
<a class="sourceLine" id="cb13-27" title="27"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-28" title="28"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb13-29" title="29"><span class="co">#&gt; (Intercept)          age      stageT2      stageT3      stageT4  </span></a>
<a class="sourceLine" id="cb13-30" title="30"><span class="co">#&gt;    0.127164     0.001502     0.399070    -0.428039    -0.675289  </span></a>
<a class="sourceLine" id="cb13-31" title="31"><span class="co">#&gt;     gradeII     gradeIII  </span></a>
<a class="sourceLine" id="cb13-32" title="32"><span class="co">#&gt;   -0.590765    -0.238397  </span></a>
<a class="sourceLine" id="cb13-33" title="33"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-34" title="34"><span class="co">#&gt; Degrees of Freedom: 182 Total (i.e. Null);  176 Residual</span></a>
<a class="sourceLine" id="cb13-35" title="35"><span class="co">#&gt;   (17 observations deleted due to missingness)</span></a>
<a class="sourceLine" id="cb13-36" title="36"><span class="co">#&gt; Null Deviance:       250.8 </span></a>
<a class="sourceLine" id="cb13-37" title="37"><span class="co">#&gt; Residual Deviance: 241.4     AIC: 255.4</span></a>
<a class="sourceLine" id="cb13-38" title="38"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-39" title="39"><span class="co">#&gt; inputs :</span></a>
<a class="sourceLine" id="cb13-40" title="40"><span class="co">#&gt; $x</span></a>
<a class="sourceLine" id="cb13-41" title="41"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-42" title="42"><span class="co">#&gt; Call:  glm(formula = response ~ age + stage + grade, family = binomial(link = &quot;logit&quot;), </span></a>
<a class="sourceLine" id="cb13-43" title="43"><span class="co">#&gt;     data = trial)</span></a>
<a class="sourceLine" id="cb13-44" title="44"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-45" title="45"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb13-46" title="46"><span class="co">#&gt; (Intercept)          age      stageT2      stageT3      stageT4  </span></a>
<a class="sourceLine" id="cb13-47" title="47"><span class="co">#&gt;    0.127164     0.001502     0.399070    -0.428039    -0.675289  </span></a>
<a class="sourceLine" id="cb13-48" title="48"><span class="co">#&gt;     gradeII     gradeIII  </span></a>
<a class="sourceLine" id="cb13-49" title="49"><span class="co">#&gt;   -0.590765    -0.238397  </span></a>
<a class="sourceLine" id="cb13-50" title="50"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-51" title="51"><span class="co">#&gt; Degrees of Freedom: 182 Total (i.e. Null);  176 Residual</span></a>
<a class="sourceLine" id="cb13-52" title="52"><span class="co">#&gt;   (17 observations deleted due to missingness)</span></a>
<a class="sourceLine" id="cb13-53" title="53"><span class="co">#&gt; Null Deviance:       250.8 </span></a>
<a class="sourceLine" id="cb13-54" title="54"><span class="co">#&gt; Residual Deviance: 241.4     AIC: 255.4</span></a>
<a class="sourceLine" id="cb13-55" title="55"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-56" title="56"><span class="co">#&gt; $exponentiate</span></a>
<a class="sourceLine" id="cb13-57" title="57"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb13-58" title="58"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-59" title="59"><span class="co">#&gt; $label</span></a>
<a class="sourceLine" id="cb13-60" title="60"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb13-61" title="61"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-62" title="62"><span class="co">#&gt; $include</span></a>
<a class="sourceLine" id="cb13-63" title="63"><span class="co">#&gt; [1] &quot;response&quot; &quot;age&quot;      &quot;stage&quot;    &quot;grade&quot;   </span></a>
<a class="sourceLine" id="cb13-64" title="64"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-65" title="65"><span class="co">#&gt; $show_yesno</span></a>
<a class="sourceLine" id="cb13-66" title="66"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb13-67" title="67"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-68" title="68"><span class="co">#&gt; $conf.level</span></a>
<a class="sourceLine" id="cb13-69" title="69"><span class="co">#&gt; [1] 0.95</span></a>
<a class="sourceLine" id="cb13-70" title="70"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-71" title="71"><span class="co">#&gt; $intercept</span></a>
<a class="sourceLine" id="cb13-72" title="72"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb13-73" title="73"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-74" title="74"><span class="co">#&gt; $beta_fun</span></a>
<a class="sourceLine" id="cb13-75" title="75"><span class="co">#&gt; function (x) </span></a>
<a class="sourceLine" id="cb13-76" title="76"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb13-77" title="77"><span class="co">#&gt;     dplyr::case_when(is.na(x) ~ NA_character_, abs(x) &gt;= 100 ~ </span></a>
<a class="sourceLine" id="cb13-78" title="78"><span class="co">#&gt;         sprintf(&quot;%.0f&quot;, x), abs(x) &gt;= 10 ~ sprintf(&quot;%.1f&quot;, x), </span></a>
<a class="sourceLine" id="cb13-79" title="79"><span class="co">#&gt;         TRUE ~ sprintf(&quot;%.2f&quot;, x))</span></a>
<a class="sourceLine" id="cb13-80" title="80"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb13-81" title="81"><span class="co">#&gt; &lt;bytecode: 0x000000001c9bdbf8&gt;</span></a>
<a class="sourceLine" id="cb13-82" title="82"><span class="co">#&gt; &lt;environment: namespace:gtsummary&gt;</span></a>
<a class="sourceLine" id="cb13-83" title="83"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-84" title="84"><span class="co">#&gt; $pvalue_fun</span></a>
<a class="sourceLine" id="cb13-85" title="85"><span class="co">#&gt; function (x, digits = 1, prepend_p = FALSE) </span></a>
<a class="sourceLine" id="cb13-86" title="86"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb13-87" title="87"><span class="co">#&gt;     if (digits == 2) {</span></a>
<a class="sourceLine" id="cb13-88" title="88"><span class="co">#&gt;         p_fmt &lt;- dplyr::case_when(x &gt; 1 ~ NA_character_, x &lt; </span></a>
<a class="sourceLine" id="cb13-89" title="89"><span class="co">#&gt;             0 ~ NA_character_, x &gt; 0.99 ~ &quot;&gt;0.99&quot;, round(x, 2) &gt;= </span></a>
<a class="sourceLine" id="cb13-90" title="90"><span class="co">#&gt;             0.1 ~ sprintf(&quot;%.2f&quot;, x), x &gt;= 0.001 ~ sprintf(&quot;%.3f&quot;, </span></a>
<a class="sourceLine" id="cb13-91" title="91"><span class="co">#&gt;             x), x &lt; 0.001 ~ &quot;&lt;0.001&quot;)</span></a>
<a class="sourceLine" id="cb13-92" title="92"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb13-93" title="93"><span class="co">#&gt;     if (digits == 1) {</span></a>
<a class="sourceLine" id="cb13-94" title="94"><span class="co">#&gt;         p_fmt &lt;- dplyr::case_when(x &gt; 1 ~ NA_character_, x &lt; </span></a>
<a class="sourceLine" id="cb13-95" title="95"><span class="co">#&gt;             0 ~ NA_character_, x &gt; 0.9 ~ &quot;&gt;0.9&quot;, round(x, 1) &gt;= </span></a>
<a class="sourceLine" id="cb13-96" title="96"><span class="co">#&gt;             0.2 ~ sprintf(&quot;%.1f&quot;, x), round(x, 2) &gt;= 0.1 ~ sprintf(&quot;%.2f&quot;, </span></a>
<a class="sourceLine" id="cb13-97" title="97"><span class="co">#&gt;             x), x &gt;= 0.001 ~ sprintf(&quot;%.3f&quot;, x), x &lt; 0.001 ~ </span></a>
<a class="sourceLine" id="cb13-98" title="98"><span class="co">#&gt;             &quot;&lt;0.001&quot;)</span></a>
<a class="sourceLine" id="cb13-99" title="99"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb13-100" title="100"><span class="co">#&gt;     if (prepend_p == TRUE) {</span></a>
<a class="sourceLine" id="cb13-101" title="101"><span class="co">#&gt;         p_fmt &lt;- dplyr::case_when(is.na(p_fmt) ~ NA_character_, </span></a>
<a class="sourceLine" id="cb13-102" title="102"><span class="co">#&gt;             stringr::str_sub(p_fmt, end = 1L) %in% c(&quot;&lt;&quot;, &quot;&gt;&quot;) ~ </span></a>
<a class="sourceLine" id="cb13-103" title="103"><span class="co">#&gt;                 paste0(&quot;p&quot;, p_fmt), TRUE ~ paste0(&quot;p=&quot;, p_fmt))</span></a>
<a class="sourceLine" id="cb13-104" title="104"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb13-105" title="105"><span class="co">#&gt;     return(p_fmt)</span></a>
<a class="sourceLine" id="cb13-106" title="106"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb13-107" title="107"><span class="co">#&gt; &lt;bytecode: 0x000000001c9c0918&gt;</span></a>
<a class="sourceLine" id="cb13-108" title="108"><span class="co">#&gt; &lt;environment: namespace:gtsummary&gt;</span></a></code></pre></div>
</div>
<div id="fmt_uni_regression" class="section level2">
<h2>fmt_uni_regression</h2>
<p>The <code>fmt_uni_regression()</code> produces a table of univariate regression results. The function is a wrapper for <code>fmt_regression()</code>, and as a result, accepts nearly identical function arguments. The function’s results can be modified in similar ways to <code>fmt_regression()</code> as well.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># rounding pvalues to 2 decimal places, </span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="co"># and adding global p-values,</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="co"># and bold_labels</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="kw">fmt_uni_regression</span>(</a>
<a class="sourceLine" id="cb14-5" title="5"> trial,</a>
<a class="sourceLine" id="cb14-6" title="6"> <span class="dt">method =</span> <span class="st">&quot;glm&quot;</span>,</a>
<a class="sourceLine" id="cb14-7" title="7"> <span class="dt">y =</span> <span class="st">&quot;response&quot;</span>,</a>
<a class="sourceLine" id="cb14-8" title="8"> <span class="dt">method.args =</span> <span class="kw">list</span>(<span class="dt">family =</span> binomial),</a>
<a class="sourceLine" id="cb14-9" title="9"> <span class="dt">exponentiate =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb14-10" title="10"> <span class="dt">pvalue_fun =</span> <span class="cf">function</span>(x) <span class="kw">fmt_pvalue</span>(x, <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb14-11" title="11">) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="st">  </span><span class="co"># overrides the default that shows p-values for each level</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="st">  </span><span class="kw">add_global</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="st">  </span><span class="co"># adjusts global p-values for multiple testing (default method: FDR)</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="st">  </span><span class="kw">add_q</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="st">  </span><span class="co"># bold p-values under a given threshold (default 0.05)</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="st">  </span><span class="kw">bold_p</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-18" title="18"><span class="st">  </span><span class="co"># now bold q-values under the threshold of 0.10</span></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="st">  </span><span class="kw">bold_p</span>(</a>
<a class="sourceLine" id="cb14-20" title="20">    <span class="dt">t =</span> <span class="fl">0.10</span>,</a>
<a class="sourceLine" id="cb14-21" title="21">    <span class="dt">q =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb14-22" title="22">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-23" title="23"><span class="st">  </span><span class="kw">bold_labels</span>()</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:left;">
N
</th>
<th style="text-align:left;">
OR
</th>
<th style="text-align:left;">
95% CI
</th>
<th style="text-align:left;">
p-value
</th>
<th style="text-align:left;">
q-value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<strong>Treatment Randomization</strong>
</td>
<td style="text-align:left;">
191
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
<strong>0.011</strong>
</td>
<td style="text-align:left;">
<strong>0.055</strong>
</td>
</tr>
<tr>
<td style="text-align:left;">
Drug
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Ref.
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Placebo
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
0.47
</td>
<td style="text-align:left;">
0.26, 0.84
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>Age, yrs</strong>
</td>
<td style="text-align:left;">
183
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.98, 1.02
</td>
<td style="text-align:left;">
0.90
</td>
<td style="text-align:left;">
0.90
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>Marker Level, ng/mL</strong>
</td>
<td style="text-align:left;">
183
</td>
<td style="text-align:left;">
0.92
</td>
<td style="text-align:left;">
0.65, 1.30
</td>
<td style="text-align:left;">
0.64
</td>
<td style="text-align:left;">
0.80
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>T Stage</strong>
</td>
<td style="text-align:left;">
191
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
0.055
</td>
<td style="text-align:left;">
0.14
</td>
</tr>
<tr>
<td style="text-align:left;">
T1
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Ref.
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
T2
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
1.40
</td>
<td style="text-align:left;">
0.63, 3.14
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
T3
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
0.63
</td>
<td style="text-align:left;">
0.26, 1.50
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
T4
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
0.22, 1.11
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>Grade</strong>
</td>
<td style="text-align:left;">
191
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
0.40
</td>
<td style="text-align:left;">
0.66
</td>
</tr>
<tr>
<td style="text-align:left;">
I
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Ref.
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
II
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
0.60
</td>
<td style="text-align:left;">
0.29, 1.25
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
III
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
0.76
</td>
<td style="text-align:left;">
0.38, 1.51
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
