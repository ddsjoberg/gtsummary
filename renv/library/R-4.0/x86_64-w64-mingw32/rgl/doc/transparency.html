<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Duncan Murdoch" />


<title>A Note on Transparency</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>
<script src="data:application/javascript;base64,KGZ1bmN0aW9uKCkgewogIC8vIElmIHdpbmRvdy5IVE1MV2lkZ2V0cyBpcyBhbHJlYWR5IGRlZmluZWQsIHRoZW4gdXNlIGl0OyBvdGhlcndpc2UgY3JlYXRlIGEKICAvLyBuZXcgb2JqZWN0LiBUaGlzIGFsbG93cyBwcmVjZWRpbmcgY29kZSB0byBzZXQgb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUKICAvLyBpbml0aWFsaXphdGlvbiBwcm9jZXNzICh0aG91Z2ggbm9uZSBjdXJyZW50bHkgZXhpc3QpLgogIHdpbmRvdy5IVE1MV2lkZ2V0cyA9IHdpbmRvdy5IVE1MV2lkZ2V0cyB8fCB7fTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSB2aWV3ZXIgcGFuZS4gSWYgbm90LCB3ZSdyZSBpbiBhIHdlYiBicm93c2VyLgogIHZhciB2aWV3ZXJNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnZpZXdlck1vZGUgPQogICAgICAvXGJ2aWV3ZXJfcGFuZT0xXGIvLnRlc3Qod2luZG93LmxvY2F0aW9uKTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gU2hpbnkgbW9kZS4gSWYgbm90LCBpdCdzIGEgc3RhdGljIGRvY3VtZW50LgogIC8vIE5vdGUgdGhhdCBzdGF0aWMgd2lkZ2V0cyBjYW4gYXBwZWFyIGluIGJvdGggU2hpbnkgYW5kIHN0YXRpYyBtb2RlcywgYnV0CiAgLy8gb2J2aW91c2x5LCBTaGlueSB3aWRnZXRzIGNhbiBvbmx5IGFwcGVhciBpbiBTaGlueSBhcHBzL2RvY3VtZW50cy4KICB2YXIgc2hpbnlNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnNoaW55TW9kZSA9CiAgICAgIHR5cGVvZih3aW5kb3cuU2hpbnkpICE9PSAidW5kZWZpbmVkIiAmJiAhIXdpbmRvdy5TaGlueS5vdXRwdXRCaW5kaW5nczsKCiAgLy8gV2UgY2FuJ3QgY291bnQgb24galF1ZXJ5IGJlaW5nIGF2YWlsYWJsZSwgc28gd2UgaW1wbGVtZW50IG91ciBvd24KICAvLyB2ZXJzaW9uIGlmIG5lY2Vzc2FyeS4KICBmdW5jdGlvbiBxdWVyeVNlbGVjdG9yQWxsKHNjb3BlLCBzZWxlY3RvcikgewogICAgaWYgKHR5cGVvZihqUXVlcnkpICE9PSAidW5kZWZpbmVkIiAmJiBzY29wZSBpbnN0YW5jZW9mIGpRdWVyeSkgewogICAgICByZXR1cm4gc2NvcGUuZmluZChzZWxlY3Rvcik7CiAgICB9CiAgICBpZiAoc2NvcGUucXVlcnlTZWxlY3RvckFsbCkgewogICAgICByZXR1cm4gc2NvcGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhc0FycmF5KHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT09IG51bGwpCiAgICAgIHJldHVybiBbXTsKICAgIGlmICgkLmlzQXJyYXkodmFsdWUpKQogICAgICByZXR1cm4gdmFsdWU7CiAgICByZXR1cm4gW3ZhbHVlXTsKICB9CgogIC8vIEltcGxlbWVudCBqUXVlcnkncyBleHRlbmQKICBmdW5jdGlvbiBleHRlbmQodGFyZ2V0IC8qLCAuLi4gKi8pIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRhcmdldDsKICB9CgogIC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgQXJyYXkuZm9yRWFjaC4KICBmdW5jdGlvbiBmb3JFYWNoKHZhbHVlcywgY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgIGlmICh2YWx1ZXMuZm9yRWFjaCkgewogICAgICB2YWx1ZXMuZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZyk7CiAgICB9IGVsc2UgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWVzW2ldLCBpLCB2YWx1ZXMpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBSZXBsYWNlcyB0aGUgc3BlY2lmaWVkIG1ldGhvZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgZnVuY1NvdXJjZS4KICAvLwogIC8vIE5vdGUgdGhhdCBmdW5jU291cmNlIHNob3VsZCBub3QgQkUgdGhlIG5ldyBtZXRob2QsIGl0IHNob3VsZCBiZSBhIGZ1bmN0aW9uCiAgLy8gdGhhdCBSRVRVUk5TIHRoZSBuZXcgbWV0aG9kLiBmdW5jU291cmNlIHJlY2VpdmVzIGEgc2luZ2xlIGFyZ3VtZW50IHRoYXQgaXMKICAvLyB0aGUgb3ZlcnJpZGRlbiBtZXRob2QsIGl0IGNhbiBiZSBjYWxsZWQgZnJvbSB0aGUgbmV3IG1ldGhvZC4gVGhlIG92ZXJyaWRkZW4KICAvLyBtZXRob2QgY2FuIGJlIGNhbGxlZCBsaWtlIGEgcmVndWxhciBmdW5jdGlvbiwgaXQgaGFzIHRoZSB0YXJnZXQgcGVybWFuZW50bHkKICAvLyBib3VuZCB0byBpdCBzbyAidGhpcyIgd2lsbCB3b3JrIGNvcnJlY3RseS4KICBmdW5jdGlvbiBvdmVycmlkZU1ldGhvZCh0YXJnZXQsIG1ldGhvZE5hbWUsIGZ1bmNTb3VyY2UpIHsKICAgIHZhciBzdXBlckZ1bmMgPSB0YXJnZXRbbWV0aG9kTmFtZV0gfHwgZnVuY3Rpb24oKSB7fTsKICAgIHZhciBzdXBlckZ1bmNCb3VuZCA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gc3VwZXJGdW5jLmFwcGx5KHRhcmdldCwgYXJndW1lbnRzKTsKICAgIH07CiAgICB0YXJnZXRbbWV0aG9kTmFtZV0gPSBmdW5jU291cmNlKHN1cGVyRnVuY0JvdW5kKTsKICB9CgogIC8vIEFkZCBhIG1ldGhvZCB0byBkZWxlZ2F0b3IgdGhhdCwgd2hlbiBpbnZva2VkLCBjYWxscwogIC8vIGRlbGVnYXRlZS5tZXRob2ROYW1lLiBJZiB0aGVyZSBpcyBubyBzdWNoIG1ldGhvZCBvbgogIC8vIHRoZSBkZWxlZ2F0ZWUsIGJ1dCB0aGVyZSB3YXMgb25lIG9uIGRlbGVnYXRvciBiZWZvcmUKICAvLyBkZWxlZ2F0ZU1ldGhvZCB3YXMgY2FsbGVkLCB0aGVuIHRoZSBvcmlnaW5hbCB2ZXJzaW9uCiAgLy8gaXMgaW52b2tlZCBpbnN0ZWFkLgogIC8vIEZvciBleGFtcGxlOgogIC8vCiAgLy8gdmFyIGEgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2ExJyk7IH0KICAvLyAgIG1ldGhvZDI6IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnYTInKTsgfQogIC8vIH07CiAgLy8gdmFyIGIgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2IxJyk7IH0KICAvLyB9OwogIC8vIGRlbGVnYXRlTWV0aG9kKGEsIGIsICJtZXRob2QxIik7CiAgLy8gZGVsZWdhdGVNZXRob2QoYSwgYiwgIm1ldGhvZDIiKTsKICAvLyBhLm1ldGhvZDEoKTsKICAvLyBhLm1ldGhvZDIoKTsKICAvLwogIC8vIFRoZSBvdXRwdXQgd291bGQgYmUgImIxIiwgImEyIi4KICBmdW5jdGlvbiBkZWxlZ2F0ZU1ldGhvZChkZWxlZ2F0b3IsIGRlbGVnYXRlZSwgbWV0aG9kTmFtZSkgewogICAgdmFyIGluaGVyaXRlZCA9IGRlbGVnYXRvclttZXRob2ROYW1lXTsKICAgIGRlbGVnYXRvclttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgdGFyZ2V0ID0gZGVsZWdhdGVlOwogICAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGVlW21ldGhvZE5hbWVdOwoKICAgICAgLy8gVGhlIG1ldGhvZCBkb2Vzbid0IGV4aXN0IG9uIHRoZSBkZWxlZ2F0ZWUuIEluc3RlYWQsCiAgICAgIC8vIGNhbGwgdGhlIG1ldGhvZCBvbiB0aGUgZGVsZWdhdG9yLCBpZiBpdCBleGlzdHMuCiAgICAgIGlmICghbWV0aG9kKSB7CiAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdG9yOwogICAgICAgIG1ldGhvZCA9IGluaGVyaXRlZDsKICAgICAgfQoKICAgICAgaWYgKG1ldGhvZCkgewogICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpOwogICAgICB9CiAgICB9OwogIH0KCiAgLy8gSW1wbGVtZW50IGEgdmFndWUgZmFjc2ltaWxpZSBvZiBqUXVlcnkncyBkYXRhIG1ldGhvZAogIGZ1bmN0aW9uIGVsZW1lbnREYXRhKGVsLCBuYW1lLCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikgewogICAgICByZXR1cm4gZWxbImh0bWx3aWRnZXRfZGF0YV8iICsgbmFtZV07CiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMykgewogICAgICBlbFsiaHRtbHdpZGdldF9kYXRhXyIgKyBuYW1lXSA9IHZhbHVlOwogICAgICByZXR1cm4gZWw7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldyb25nIG51bWJlciBvZiBhcmd1bWVudHMgZm9yIGVsZW1lbnREYXRhOiAiICsKICAgICAgICBhcmd1bWVudHMubGVuZ3RoKTsKICAgIH0KICB9CgogIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzQ0NjE3MC9lc2NhcGUtc3RyaW5nLWZvci11c2UtaW4tamF2YXNjcmlwdC1yZWdleAogIGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1wtXFtcXVwvXHtcfVwoXClcKlwrXD9cLlxcXF5cJFx8XS9nLCAiXFwkJiIpOwogIH0KCiAgZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkgewogICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgiXFxiIiArIGVzY2FwZVJlZ0V4cChjbGFzc05hbWUpICsgIlxcYiIpOwogICAgcmV0dXJuIHJlLnRlc3QoZWwuY2xhc3NOYW1lKTsKICB9CgogIC8vIGVsZW1lbnRzIC0gYXJyYXkgKG9yIGFycmF5LWxpa2Ugb2JqZWN0KSBvZiBIVE1MIGVsZW1lbnRzCiAgLy8gY2xhc3NOYW1lIC0gY2xhc3MgbmFtZSB0byB0ZXN0IGZvcgogIC8vIGluY2x1ZGUgLSBpZiB0cnVlLCBvbmx5IHJldHVybiBlbGVtZW50cyB3aXRoIGdpdmVuIGNsYXNzTmFtZTsKICAvLyAgIGlmIGZhbHNlLCBvbmx5IHJldHVybiBlbGVtZW50cyAqd2l0aG91dCogZ2l2ZW4gY2xhc3NOYW1lCiAgZnVuY3Rpb24gZmlsdGVyQnlDbGFzcyhlbGVtZW50cywgY2xhc3NOYW1lLCBpbmNsdWRlKSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoaGFzQ2xhc3MoZWxlbWVudHNbaV0sIGNsYXNzTmFtZSkgPT0gaW5jbHVkZSkKICAgICAgICByZXN1bHRzLnB1c2goZWxlbWVudHNbaV0pOwogICAgfQogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiBvbihvYmosIGV2ZW50TmFtZSwgZnVuYykgewogICAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZnVuYywgZmFsc2UpOwogICAgfSBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIHsKICAgICAgb2JqLmF0dGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvZmYob2JqLCBldmVudE5hbWUsIGZ1bmMpIHsKICAgIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikKICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBmdW5jLCBmYWxzZSk7CiAgICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIHsKICAgICAgb2JqLmRldGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICAvLyBUcmFuc2xhdGUgYXJyYXkgb2YgdmFsdWVzIHRvIHRvcC9yaWdodC9ib3R0b20vbGVmdCwgYXMgdXN1YWwgd2l0aAogIC8vIHRoZSAicGFkZGluZyIgQ1NTIHByb3BlcnR5CiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3BhZGRpbmcKICBmdW5jdGlvbiB1bnBhY2tQYWRkaW5nKHZhbHVlKSB7CiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gIm51bWJlciIpCiAgICAgIHZhbHVlID0gW3ZhbHVlXTsKICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMF0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzBdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDIpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDMpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDQpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzNdfTsKICAgIH0KICB9CgogIC8vIENvbnZlcnQgYW4gdW5wYWNrZWQgcGFkZGluZyBvYmplY3QgdG8gYSBDU1MgdmFsdWUKICBmdW5jdGlvbiBwYWRkaW5nVG9Dc3MocGFkZGluZ09iaikgewogICAgcmV0dXJuIHBhZGRpbmdPYmoudG9wICsgInB4ICIgKyBwYWRkaW5nT2JqLnJpZ2h0ICsgInB4ICIgKyBwYWRkaW5nT2JqLmJvdHRvbSArICJweCAiICsgcGFkZGluZ09iai5sZWZ0ICsgInB4IjsKICB9CgogIC8vIE1ha2VzIGEgbnVtYmVyIHN1aXRhYmxlIGZvciBDU1MKICBmdW5jdGlvbiBweCh4KSB7CiAgICBpZiAodHlwZW9mKHgpID09PSAibnVtYmVyIikKICAgICAgcmV0dXJuIHggKyAicHgiOwogICAgZWxzZQogICAgICByZXR1cm4geDsKICB9CgogIC8vIFJldHJpZXZlcyBydW50aW1lIHdpZGdldCBzaXppbmcgaW5mb3JtYXRpb24gZm9yIGFuIGVsZW1lbnQuCiAgLy8gVGhlIHJldHVybiB2YWx1ZSBpcyBlaXRoZXIgbnVsbCwgb3IgYW4gb2JqZWN0IHdpdGggZmlsbCwgcGFkZGluZywKICAvLyBkZWZhdWx0V2lkdGgsIGRlZmF1bHRIZWlnaHQgZmllbGRzLgogIGZ1bmN0aW9uIHNpemluZ1BvbGljeShlbCkgewogICAgdmFyIHNpemluZ0VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic2NyaXB0W2RhdGEtZm9yPSciICsgZWwuaWQgKyAiJ11bdHlwZT0nYXBwbGljYXRpb24vaHRtbHdpZGdldC1zaXppbmcnXSIpOwogICAgaWYgKCFzaXppbmdFbCkKICAgICAgcmV0dXJuIG51bGw7CiAgICB2YXIgc3AgPSBKU09OLnBhcnNlKHNpemluZ0VsLnRleHRDb250ZW50IHx8IHNpemluZ0VsLnRleHQgfHwgInt9Iik7CiAgICBpZiAodmlld2VyTW9kZSkgewogICAgICByZXR1cm4gc3Audmlld2VyOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHNwLmJyb3dzZXI7CiAgICB9CiAgfQoKICAvLyBAcGFyYW0gdGFza3MgQXJyYXkgb2Ygc3RyaW5ncyAob3IgZmFsc3kgdmFsdWUsIGluIHdoaWNoIGNhc2Ugbm8tb3ApLgogIC8vICAgRWFjaCBlbGVtZW50IG11c3QgYmUgYSB2YWxpZCBKYXZhU2NyaXB0IGV4cHJlc3Npb24gdGhhdCB5aWVsZHMgYQogIC8vICAgZnVuY3Rpb24uIE9yLCBjYW4gYmUgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoICJjb2RlIiBhbmQgImRhdGEiCiAgLy8gICBwcm9wZXJ0aWVzOyBpbiB0aGlzIGNhc2UsIHRoZSAiY29kZSIgcHJvcGVydHkgc2hvdWxkIGJlIGEgc3RyaW5nCiAgLy8gICBvZiBKUyB0aGF0J3MgYW4gZXhwciB0aGF0IHlpZWxkcyBhIGZ1bmN0aW9uLCBhbmQgImRhdGEiIHNob3VsZCBiZQogIC8vICAgYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBhZGRlZCBhcyBhbiBhZGRpdGlvbmFsIGFyZ3VtZW50IHdoZW4gdGhhdAogIC8vICAgZnVuY3Rpb24gaXMgY2FsbGVkLgogIC8vIEBwYXJhbSB0YXJnZXQgVGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgInRoaXMiIGZvciBlYWNoIGZ1bmN0aW9uCiAgLy8gICBleGVjdXRpb24uCiAgLy8gQHBhcmFtIGFyZ3MgQXJyYXkgb2YgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgZnVuY3Rpb25zLiAoVGhlCiAgLy8gICBzYW1lIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZCB0byBhbGwgZnVuY3Rpb25zLikKICBmdW5jdGlvbiBldmFsQW5kUnVuKHRhc2tzLCB0YXJnZXQsIGFyZ3MpIHsKICAgIGlmICh0YXNrcykgewogICAgICBmb3JFYWNoKHRhc2tzLCBmdW5jdGlvbih0YXNrKSB7CiAgICAgICAgdmFyIHRoZXNlQXJncyA9IGFyZ3M7CiAgICAgICAgaWYgKHR5cGVvZih0YXNrKSA9PT0gIm9iamVjdCIpIHsKICAgICAgICAgIHRoZXNlQXJncyA9IHRoZXNlQXJncy5jb25jYXQoW3Rhc2suZGF0YV0pOwogICAgICAgICAgdGFzayA9IHRhc2suY29kZTsKICAgICAgICB9CiAgICAgICAgdmFyIHRhc2tGdW5jID0gdHJ5RXZhbCh0YXNrKTsKICAgICAgICBpZiAodHlwZW9mKHRhc2tGdW5jKSAhPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJUYXNrIG11c3QgYmUgYSBmdW5jdGlvbiEgU291cmNlOlxuIiArIHRhc2spOwogICAgICAgIH0KICAgICAgICB0YXNrRnVuYy5hcHBseSh0YXJnZXQsIHRoZXNlQXJncyk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgLy8gQXR0ZW1wdCBldmFsKCkgYm90aCB3aXRoIGFuZCB3aXRob3V0IGVuY2xvc2luZyBpbiBwYXJlbnRoZXNlcy4KICAvLyBOb3RlIHRoYXQgZW5jbG9zaW5nIGNvZXJjZXMgYSBmdW5jdGlvbiBkZWNsYXJhdGlvbiBpbnRvCiAgLy8gYW4gZXhwcmVzc2lvbiB0aGF0IGV2YWwoKSBjYW4gcGFyc2UKICAvLyAob3RoZXJ3aXNlLCBhIFN5bnRheEVycm9yIGlzIHRocm93bikKICBmdW5jdGlvbiB0cnlFdmFsKGNvZGUpIHsKICAgIHZhciByZXN1bHQgPSBudWxsOwogICAgdHJ5IHsKICAgICAgcmVzdWx0ID0gZXZhbCgiKCIgKyBjb2RlICsgIikiKTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgaWYgKCFlcnJvciBpbnN0YW5jZW9mIFN5bnRheEVycm9yKSB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICByZXN1bHQgPSBldmFsKGNvZGUpOwogICAgICB9IGNhdGNoKGUpIHsKICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFN5bnRheEVycm9yKSB7CiAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICBmdW5jdGlvbiBpbml0U2l6aW5nKGVsKSB7CiAgICB2YXIgc2l6aW5nID0gc2l6aW5nUG9saWN5KGVsKTsKICAgIGlmICghc2l6aW5nKQogICAgICByZXR1cm47CgogICAgdmFyIGNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJodG1sd2lkZ2V0X2NvbnRhaW5lciIpOwogICAgaWYgKCFjZWwpCiAgICAgIHJldHVybjsKCiAgICBpZiAodHlwZW9mKHNpemluZy5wYWRkaW5nKSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSAiMCI7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZyA9IHBhZGRpbmdUb0Nzcyh1bnBhY2tQYWRkaW5nKHNpemluZy5wYWRkaW5nKSk7CiAgICB9CgogICAgaWYgKHNpemluZy5maWxsKSB7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSAiMTAwJSI7CiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmhlaWdodCA9ICIxMDAlIjsKICAgICAgaWYgKGNlbCkgewogICAgICAgIGNlbC5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICAgICAgdmFyIHBhZCA9IHVucGFja1BhZGRpbmcoc2l6aW5nLnBhZGRpbmcpOwogICAgICAgIGNlbC5zdHlsZS50b3AgPSBwYWQudG9wICsgInB4IjsKICAgICAgICBjZWwuc3R5bGUucmlnaHQgPSBwYWQucmlnaHQgKyAicHgiOwogICAgICAgIGNlbC5zdHlsZS5ib3R0b20gPSBwYWQuYm90dG9tICsgInB4IjsKICAgICAgICBjZWwuc3R5bGUubGVmdCA9IHBhZC5sZWZ0ICsgInB4IjsKICAgICAgICBlbC5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSAiMTAwJSI7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZ2V0V2lkdGg6IGZ1bmN0aW9uKCkgeyByZXR1cm4gY2VsLm9mZnNldFdpZHRoOyB9LAogICAgICAgIGdldEhlaWdodDogZnVuY3Rpb24oKSB7IHJldHVybiBjZWwub2Zmc2V0SGVpZ2h0OyB9CiAgICAgIH07CgogICAgfSBlbHNlIHsKICAgICAgZWwuc3R5bGUud2lkdGggPSBweChzaXppbmcud2lkdGgpOwogICAgICBlbC5zdHlsZS5oZWlnaHQgPSBweChzaXppbmcuaGVpZ2h0KTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgZ2V0V2lkdGg6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZWwub2Zmc2V0V2lkdGg7IH0sCiAgICAgICAgZ2V0SGVpZ2h0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGVsLm9mZnNldEhlaWdodDsgfQogICAgICB9OwogICAgfQogIH0KCiAgLy8gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbnMgZm9yIG1ldGhvZHMKICB2YXIgZGVmYXVsdHMgPSB7CiAgICBmaW5kOiBmdW5jdGlvbihzY29wZSkgewogICAgICByZXR1cm4gcXVlcnlTZWxlY3RvckFsbChzY29wZSwgIi4iICsgdGhpcy5uYW1lKTsKICAgIH0sCiAgICByZW5kZXJFcnJvcjogZnVuY3Rpb24oZWwsIGVycikgewogICAgICB2YXIgJGVsID0gJChlbCk7CgogICAgICB0aGlzLmNsZWFyRXJyb3IoZWwpOwoKICAgICAgLy8gQWRkIGFsbCB0aGVzZSBlcnJvciBjbGFzc2VzLCBhcyBTaGlueSBkb2VzCiAgICAgIHZhciBlcnJDbGFzcyA9ICJzaGlueS1vdXRwdXQtZXJyb3IiOwogICAgICBpZiAoZXJyLnR5cGUgIT09IG51bGwpIHsKICAgICAgICAvLyB1c2UgdGhlIGNsYXNzZXMgb2YgdGhlIGVycm9yIGNvbmRpdGlvbiBhcyBDU1MgY2xhc3MgbmFtZXMKICAgICAgICBlcnJDbGFzcyA9IGVyckNsYXNzICsgIiAiICsgJC5tYXAoYXNBcnJheShlcnIudHlwZSksIGZ1bmN0aW9uKHR5cGUpIHsKICAgICAgICAgIHJldHVybiBlcnJDbGFzcyArICItIiArIHR5cGU7CiAgICAgICAgfSkuam9pbigiICIpOwogICAgICB9CiAgICAgIGVyckNsYXNzID0gZXJyQ2xhc3MgKyAiIGh0bWx3aWRnZXRzLWVycm9yIjsKCiAgICAgIC8vIElzIGVsIGlubGluZSBvciBibG9jaz8gSWYgaW5saW5lIG9yIGlubGluZS1ibG9jaywganVzdCBkaXNwbGF5Om5vbmUgaXQKICAgICAgLy8gYW5kIGFkZCBhbiBpbmxpbmUgZXJyb3IuCiAgICAgIHZhciBkaXNwbGF5ID0gJGVsLmNzcygiZGlzcGxheSIpOwogICAgICAkZWwuZGF0YSgicmVzdG9yZS1kaXNwbGF5LW1vZGUiLCBkaXNwbGF5KTsKCiAgICAgIGlmIChkaXNwbGF5ID09PSAiaW5saW5lIiB8fCBkaXNwbGF5ID09PSAiaW5saW5lLWJsb2NrIikgewogICAgICAgICRlbC5oaWRlKCk7CiAgICAgICAgaWYgKGVyci5tZXNzYWdlICE9PSAiIikgewogICAgICAgICAgdmFyIGVycm9yU3BhbiA9ICQoIjxzcGFuPiIpLmFkZENsYXNzKGVyckNsYXNzKTsKICAgICAgICAgIGVycm9yU3Bhbi50ZXh0KGVyci5tZXNzYWdlKTsKICAgICAgICAgICRlbC5hZnRlcihlcnJvclNwYW4pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkaXNwbGF5ID09PSAiYmxvY2siKSB7CiAgICAgICAgLy8gSWYgYmxvY2ssIGFkZCBhbiBlcnJvciBqdXN0IGFmdGVyIHRoZSBlbCwgc2V0IHZpc2liaWxpdHk6bm9uZSBvbiB0aGUKICAgICAgICAvLyBlbCwgYW5kIHBvc2l0aW9uIHRoZSBlcnJvciB0byBiZSBvbiB0b3Agb2YgdGhlIGVsLgogICAgICAgIC8vIE1hcmsgaXQgd2l0aCBhIHVuaXF1ZSBJRCBhbmQgQ1NTIGNsYXNzIHNvIHdlIGNhbiByZW1vdmUgaXQgbGF0ZXIuCiAgICAgICAgJGVsLmNzcygidmlzaWJpbGl0eSIsICJoaWRkZW4iKTsKICAgICAgICBpZiAoZXJyLm1lc3NhZ2UgIT09ICIiKSB7CiAgICAgICAgICB2YXIgZXJyb3JEaXYgPSAkKCI8ZGl2PiIpLmFkZENsYXNzKGVyckNsYXNzKS5jc3MoInBvc2l0aW9uIiwgImFic29sdXRlIikKICAgICAgICAgICAgLmNzcygidG9wIiwgZWwub2Zmc2V0VG9wKQogICAgICAgICAgICAuY3NzKCJsZWZ0IiwgZWwub2Zmc2V0TGVmdCkKICAgICAgICAgICAgLy8gc2V0dGluZyB3aWR0aCBjYW4gcHVzaCBvdXQgdGhlIHBhZ2Ugc2l6ZSwgZm9yY2luZyBvdGhlcndpc2UKICAgICAgICAgICAgLy8gdW5uZWNlc3Nhcnkgc2Nyb2xsYmFycyB0byBhcHBlYXIgYW5kIG1ha2luZyBpdCBpbXBvc3NpYmxlIGZvcgogICAgICAgICAgICAvLyB0aGUgZWxlbWVudCB0byBzaHJpbms7IHNvIHVzZSBtYXgtd2lkdGggaW5zdGVhZAogICAgICAgICAgICAuY3NzKCJtYXhXaWR0aCIsIGVsLm9mZnNldFdpZHRoKQogICAgICAgICAgICAuY3NzKCJoZWlnaHQiLCBlbC5vZmZzZXRIZWlnaHQpOwogICAgICAgICAgZXJyb3JEaXYudGV4dChlcnIubWVzc2FnZSk7CiAgICAgICAgICAkZWwuYWZ0ZXIoZXJyb3JEaXYpOwoKICAgICAgICAgIC8vIFJlYWxseSBkdW1iIHdheSB0byBrZWVwIHRoZSBzaXplL3Bvc2l0aW9uIG9mIHRoZSBlcnJvciBpbiBzeW5jIHdpdGgKICAgICAgICAgIC8vIHRoZSBwYXJlbnQgZWxlbWVudCBhcyB0aGUgd2luZG93IGlzIHJlc2l6ZWQgb3Igd2hhdGV2ZXIuCiAgICAgICAgICB2YXIgaW50SWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKCFlcnJvckRpdlswXS5wYXJlbnRFbGVtZW50KSB7CiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRJZCk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVycm9yRGl2CiAgICAgICAgICAgICAgLmNzcygidG9wIiwgZWwub2Zmc2V0VG9wKQogICAgICAgICAgICAgIC5jc3MoImxlZnQiLCBlbC5vZmZzZXRMZWZ0KQogICAgICAgICAgICAgIC5jc3MoIm1heFdpZHRoIiwgZWwub2Zmc2V0V2lkdGgpCiAgICAgICAgICAgICAgLmNzcygiaGVpZ2h0IiwgZWwub2Zmc2V0SGVpZ2h0KTsKICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2xlYXJFcnJvcjogZnVuY3Rpb24oZWwpIHsKICAgICAgdmFyICRlbCA9ICQoZWwpOwogICAgICB2YXIgZGlzcGxheSA9ICRlbC5kYXRhKCJyZXN0b3JlLWRpc3BsYXktbW9kZSIpOwogICAgICAkZWwuZGF0YSgicmVzdG9yZS1kaXNwbGF5LW1vZGUiLCBudWxsKTsKCiAgICAgIGlmIChkaXNwbGF5ID09PSAiaW5saW5lIiB8fCBkaXNwbGF5ID09PSAiaW5saW5lLWJsb2NrIikgewogICAgICAgIGlmIChkaXNwbGF5KQogICAgICAgICAgJGVsLmNzcygiZGlzcGxheSIsIGRpc3BsYXkpOwogICAgICAgICQoZWwubmV4dFNpYmxpbmcpLmZpbHRlcigiLmh0bWx3aWRnZXRzLWVycm9yIikucmVtb3ZlKCk7CiAgICAgIH0gZWxzZSBpZiAoZGlzcGxheSA9PT0gImJsb2NrIil7CiAgICAgICAgJGVsLmNzcygidmlzaWJpbGl0eSIsICJpbmhlcml0Iik7CiAgICAgICAgJChlbC5uZXh0U2libGluZykuZmlsdGVyKCIuaHRtbHdpZGdldHMtZXJyb3IiKS5yZW1vdmUoKTsKICAgICAgfQogICAgfSwKICAgIHNpemluZzoge30KICB9OwoKICAvLyBDYWxsZWQgYnkgd2lkZ2V0IGJpbmRpbmdzIHRvIHJlZ2lzdGVyIGEgbmV3IHR5cGUgb2Ygd2lkZ2V0LiBUaGUgZGVmaW5pdGlvbgogIC8vIG9iamVjdCBjYW4gY29udGFpbiB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6CiAgLy8gLSBuYW1lIChyZXF1aXJlZCkgLSBBIHN0cmluZyBpbmRpY2F0aW5nIHRoZSBiaW5kaW5nIG5hbWUsIHdoaWNoIHdpbGwgYmUKICAvLyAgIHVzZWQgYnkgZGVmYXVsdCBhcyB0aGUgQ1NTIGNsYXNzbmFtZSB0byBsb29rIGZvci4KICAvLyAtIGluaXRpYWxpemUgKG9wdGlvbmFsKSAtIEEgZnVuY3Rpb24oZWwpIHRoYXQgd2lsbCBiZSBjYWxsZWQgb25jZSBwZXIKICAvLyAgIHdpZGdldCBlbGVtZW50OyBpZiBhIHZhbHVlIGlzIHJldHVybmVkLCBpdCB3aWxsIGJlIHBhc3NlZCBhcyB0aGUgdGhpcmQKICAvLyAgIHZhbHVlIHRvIHJlbmRlclZhbHVlLgogIC8vIC0gcmVuZGVyVmFsdWUgKHJlcXVpcmVkKSAtIEEgZnVuY3Rpb24oZWwsIGRhdGEsIGluaXRWYWx1ZSkgdGhhdCB3aWxsIGJlCiAgLy8gICBjYWxsZWQgd2l0aCBkYXRhLiBTdGF0aWMgY29udGV4dHMgd2lsbCBjYXVzZSB0aGlzIHRvIGJlIGNhbGxlZCBvbmNlIHBlcgogIC8vICAgZWxlbWVudDsgU2hpbnkgYXBwcyB3aWxsIGNhdXNlIHRoaXMgdG8gYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIHBlcgogIC8vICAgZWxlbWVudCwgYXMgdGhlIGRhdGEgY2hhbmdlcy4KICB3aW5kb3cuSFRNTFdpZGdldHMud2lkZ2V0ID0gZnVuY3Rpb24oZGVmaW5pdGlvbikgewogICAgaWYgKCFkZWZpbml0aW9uLm5hbWUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJXaWRnZXQgbXVzdCBoYXZlIGEgbmFtZSIpOwogICAgfQogICAgaWYgKCFkZWZpbml0aW9uLnR5cGUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJXaWRnZXQgbXVzdCBoYXZlIGEgdHlwZSIpOwogICAgfQogICAgLy8gQ3VycmVudGx5IHdlIG9ubHkgc3VwcG9ydCBvdXRwdXQgd2lkZ2V0cwogICAgaWYgKGRlZmluaXRpb24udHlwZSAhPT0gIm91dHB1dCIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJVbnJlY29nbml6ZWQgd2lkZ2V0IHR5cGUgJyIgKyBkZWZpbml0aW9uLnR5cGUgKyAiJyIpOwogICAgfQogICAgLy8gVE9ETzogVmVyaWZ5IHRoYXQgLm5hbWUgaXMgYSB2YWxpZCBDU1MgY2xhc3NuYW1lCgogICAgLy8gU3VwcG9ydCBuZXctc3R5bGUgaW5zdGFuY2UtYm91bmQgZGVmaW5pdGlvbnMuIE9sZC1zdHlsZSBjbGFzcy1ib3VuZAogICAgLy8gZGVmaW5pdGlvbnMgaGF2ZSBvbmUgd2lkZ2V0ICJvYmplY3QiIHBlciB3aWRnZXQgcGVyIHR5cGUvY2xhc3Mgb2YKICAgIC8vIHdpZGdldDsgdGhlIHJlbmRlclZhbHVlIGFuZCByZXNpemUgbWV0aG9kcyBvbiBzdWNoIHdpZGdldCBvYmplY3RzCiAgICAvLyB0YWtlIGVsIGFuZCBpbnN0YW5jZSBhcmd1bWVudHMsIGJlY2F1c2UgdGhlIHdpZGdldCBvYmplY3QgY2FuJ3QKICAgIC8vIHN0b3JlIHRoZW0uIE5ldy1zdHlsZSBpbnN0YW5jZS1ib3VuZCBkZWZpbml0aW9ucyBoYXZlIG9uZSB3aWRnZXQKICAgIC8vIG9iamVjdCBwZXIgd2lkZ2V0IGluc3RhbmNlOyB0aGUgZGVmaW5pdGlvbiB0aGF0J3MgcGFzc2VkIGluIGRvZXNuJ3QKICAgIC8vIHByb3ZpZGUgcmVuZGVyVmFsdWUgb3IgcmVzaXplIG1ldGhvZHMgYXQgYWxsLCBqdXN0IHRoZSBzaW5nbGUgbWV0aG9kCiAgICAvLyAgIGZhY3RvcnkoZWwsIHdpZHRoLCBoZWlnaHQpCiAgICAvLyB3aGljaCByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGhhcyByZW5kZXJWYWx1ZSh4KSBhbmQgcmVzaXplKHcsIGgpLgogICAgLy8gVGhpcyBlbmFibGVzIGEgZmFyIG1vcmUgbmF0dXJhbCBwcm9ncmFtbWluZyBzdHlsZSBmb3IgdGhlIHdpZGdldAogICAgLy8gYXV0aG9yLCB3aG8gY2FuIHN0b3JlIHBlci1pbnN0YW5jZSBzdGF0ZSB1c2luZyBlaXRoZXIgT08tc3R5bGUKICAgIC8vIGluc3RhbmNlIGZpZWxkcyBvciBmdW5jdGlvbmFsLXN0eWxlIGNsb3N1cmUgdmFyaWFibGVzIChJIGd1ZXNzIHRoaXMKICAgIC8vIGlzIGluIGNvbnRyYXN0IHRvIHdoYXQgY2FuIG9ubHkgYmUgY2FsbGVkIEMtc3R5bGUgcHNldWRvLU9PIHdoaWNoIGlzCiAgICAvLyB3aGF0IHdlIHJlcXVpcmVkIGJlZm9yZSkuCiAgICBpZiAoZGVmaW5pdGlvbi5mYWN0b3J5KSB7CiAgICAgIGRlZmluaXRpb24gPSBjcmVhdGVMZWdhY3lEZWZpbml0aW9uQWRhcHRlcihkZWZpbml0aW9uKTsKICAgIH0KCiAgICBpZiAoIWRlZmluaXRpb24ucmVuZGVyVmFsdWUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJXaWRnZXQgbXVzdCBoYXZlIGEgcmVuZGVyVmFsdWUgZnVuY3Rpb24iKTsKICAgIH0KCiAgICAvLyBGb3Igc3RhdGljIHJlbmRlcmluZyAobm9uLVNoaW55KSwgdXNlIGEgc2ltcGxlIHdpZGdldCByZWdpc3RyYXRpb24KICAgIC8vIHNjaGVtZS4gV2UgYWxzbyB1c2UgdGhpcyBzY2hlbWUgZm9yIFNoaW55IGFwcHMvZG9jdW1lbnRzIHRoYXQgYWxzbwogICAgLy8gY29udGFpbiBzdGF0aWMgd2lkZ2V0cy4KICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy53aWRnZXRzID0gd2luZG93LkhUTUxXaWRnZXRzLndpZGdldHMgfHwgW107CiAgICAvLyBNZXJnZSBkZWZhdWx0cyBpbnRvIHRoZSBkZWZpbml0aW9uOyBkb24ndCBtdXRhdGUgdGhlIG9yaWdpbmFsIGRlZmluaXRpb24uCiAgICB2YXIgc3RhdGljQmluZGluZyA9IGV4dGVuZCh7fSwgZGVmYXVsdHMsIGRlZmluaXRpb24pOwogICAgb3ZlcnJpZGVNZXRob2Qoc3RhdGljQmluZGluZywgImZpbmQiLCBmdW5jdGlvbihzdXBlcmZ1bmMpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlKSB7CiAgICAgICAgdmFyIHJlc3VsdHMgPSBzdXBlcmZ1bmMoc2NvcGUpOwogICAgICAgIC8vIEZpbHRlciBvdXQgU2hpbnkgb3V0cHV0cywgd2Ugb25seSB3YW50IHRoZSBzdGF0aWMga2luZAogICAgICAgIHJldHVybiBmaWx0ZXJCeUNsYXNzKHJlc3VsdHMsICJodG1sLXdpZGdldC1vdXRwdXQiLCBmYWxzZSk7CiAgICAgIH07CiAgICB9KTsKICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy53aWRnZXRzLnB1c2goc3RhdGljQmluZGluZyk7CgogICAgaWYgKHNoaW55TW9kZSkgewogICAgICAvLyBTaGlueSBpcyBydW5uaW5nLiBSZWdpc3RlciB0aGUgZGVmaW5pdGlvbiB3aXRoIGFuIG91dHB1dCBiaW5kaW5nLgogICAgICAvLyBUaGUgZGVmaW5pdGlvbiBpdHNlbGYgd2lsbCBub3QgYmUgdGhlIG91dHB1dCBiaW5kaW5nLCBpbnN0ZWFkCiAgICAgIC8vIHdlIHdpbGwgbWFrZSBhbiBvdXRwdXQgYmluZGluZyBvYmplY3QgdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlCiAgICAgIC8vIGRlZmluaXRpb24uIFRoaXMgaXMgYmVjYXVzZSB3ZSBmb29saXNobHkgdXNlZCB0aGUgc2FtZSBtZXRob2QKICAgICAgLy8gbmFtZSAocmVuZGVyVmFsdWUpIGZvciBodG1sd2lkZ2V0cyBkZWZpbml0aW9uIGFuZCBTaGlueSBiaW5kaW5ncwogICAgICAvLyBidXQgdGhleSBhY3R1YWxseSBoYXZlIHF1aXRlIGRpZmZlcmVudCBzZW1hbnRpY3MgKHRoZSBTaGlueQogICAgICAvLyBiaW5kaW5ncyByZWNlaXZlIGRhdGEgdGhhdCBpbmNsdWRlcyBsb3RzIG9mIG1ldGFkYXRhIHRoYXQgaXQKICAgICAgLy8gc3RyaXBzIG9mZiBiZWZvcmUgY2FsbGluZyBodG1sd2lkZ2V0cyByZW5kZXJWYWx1ZSkuIFdlIGNhbid0CiAgICAgIC8vIGp1c3QgaWdub3JlIHRoZSBkaWZmZXJlbmNlIGJlY2F1c2UgaW4gc29tZSB3aWRnZXRzIGl0J3MgaGVscGZ1bAogICAgICAvLyB0byBjYWxsIHRoaXMucmVuZGVyVmFsdWUoKSBmcm9tIGluc2lkZSBvZiByZXNpemUoKSwgYW5kIGlmCiAgICAgIC8vIHdlJ3JlIG5vdCBkZWxlZ2F0aW5nLCB0aGVuIHRoYXQgY2FsbCB3aWxsIGdvIHRvIHRoZSBTaGlueQogICAgICAvLyB2ZXJzaW9uIGluc3RlYWQgb2YgdGhlIGh0bWx3aWRnZXRzIHZlcnNpb24uCgogICAgICAvLyBNZXJnZSBkZWZhdWx0cyB3aXRoIGRlZmluaXRpb24sIHdpdGhvdXQgbXV0YXRpbmcgZWl0aGVyLgogICAgICB2YXIgYmluZGluZ0RlZiA9IGV4dGVuZCh7fSwgZGVmYXVsdHMsIGRlZmluaXRpb24pOwoKICAgICAgLy8gVGhpcyBvYmplY3Qgd2lsbCBiZSBvdXIgYWN0dWFsIFNoaW55IGJpbmRpbmcuCiAgICAgIHZhciBzaGlueUJpbmRpbmcgPSBuZXcgU2hpbnkuT3V0cHV0QmluZGluZygpOwoKICAgICAgLy8gV2l0aCBhIGZldyBleGNlcHRpb25zLCB3ZSdsbCB3YW50IHRvIHNpbXBseSB1c2UgdGhlIGJpbmRpbmdEZWYncwogICAgICAvLyB2ZXJzaW9uIG9mIG1ldGhvZHMgaWYgdGhleSBhcmUgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvCiAgICAgIC8vIFNoaW55J3MgZGVmYXVsdHMuIE5PVEU6IElmIFNoaW55J3Mgb3V0cHV0IGJpbmRpbmdzIGdhaW4gYWRkaXRpb25hbAogICAgICAvLyBtZXRob2RzIGluIHRoZSBmdXR1cmUsIGFuZCB3ZSB3YW50IHRoZW0gdG8gYmUgb3ZlcnJpZGVhYmxlIGJ5CiAgICAgIC8vIEhUTUxXaWRnZXQgYmluZGluZyBkZWZpbml0aW9ucywgdGhlbiB3ZSdsbCBuZWVkIHRvIGFkZCB0aGVtIHRvIHRoaXMKICAgICAgLy8gbGlzdC4KICAgICAgZGVsZWdhdGVNZXRob2Qoc2hpbnlCaW5kaW5nLCBiaW5kaW5nRGVmLCAiZ2V0SWQiKTsKICAgICAgZGVsZWdhdGVNZXRob2Qoc2hpbnlCaW5kaW5nLCBiaW5kaW5nRGVmLCAib25WYWx1ZUNoYW5nZSIpOwogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJvblZhbHVlRXJyb3IiKTsKICAgICAgZGVsZWdhdGVNZXRob2Qoc2hpbnlCaW5kaW5nLCBiaW5kaW5nRGVmLCAicmVuZGVyRXJyb3IiKTsKICAgICAgZGVsZWdhdGVNZXRob2Qoc2hpbnlCaW5kaW5nLCBiaW5kaW5nRGVmLCAiY2xlYXJFcnJvciIpOwogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJzaG93UHJvZ3Jlc3MiKTsKCiAgICAgIC8vIFRoZSBmaW5kLCByZW5kZXJWYWx1ZSwgYW5kIHJlc2l6ZSBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseSwgYmVjYXVzZSB3ZQogICAgICAvLyB3YW50IHRvIGFjdHVhbGx5IGRlY29yYXRlIHRoZSBiZWhhdmlvciBvZiB0aGUgYmluZGluZ0RlZiBtZXRob2RzLgoKICAgICAgc2hpbnlCaW5kaW5nLmZpbmQgPSBmdW5jdGlvbihzY29wZSkgewogICAgICAgIHZhciByZXN1bHRzID0gYmluZGluZ0RlZi5maW5kKHNjb3BlKTsKCiAgICAgICAgLy8gT25seSByZXR1cm4gZWxlbWVudHMgdGhhdCBhcmUgU2hpbnkgb3V0cHV0cywgbm90IHN0YXRpYyBvbmVzCiAgICAgICAgdmFyIGR5bmFtaWNSZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoIi5odG1sLXdpZGdldC1vdXRwdXQiKTsKCiAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdoYXRldmVyIGNhdXNlZCBTaGlueSB0byB0aGluayB0aGVyZSBtaWdodCBiZQogICAgICAgIC8vIG5ldyBkeW5hbWljIG91dHB1dHMsIGFsc28gY2F1c2VkIHRoZXJlIHRvIGJlIG5ldyBzdGF0aWMgb3V0cHV0cy4KICAgICAgICAvLyBTaW5jZSB0aGVyZSBtaWdodCBiZSBsb3RzIG9mIGRpZmZlcmVudCBodG1sd2lkZ2V0cyBiaW5kaW5ncywgd2UKICAgICAgICAvLyBzY2hlZHVsZSBleGVjdXRpb24gZm9yIGxhdGVyLS1ubyBuZWVkIHRvIHN0YXRpY1JlbmRlciBtdWx0aXBsZQogICAgICAgIC8vIHRpbWVzLgogICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCAhPT0gZHluYW1pY1Jlc3VsdHMubGVuZ3RoKQogICAgICAgICAgc2NoZWR1bGVTdGF0aWNSZW5kZXIoKTsKCiAgICAgICAgcmV0dXJuIGR5bmFtaWNSZXN1bHRzOwogICAgICB9OwoKICAgICAgLy8gV3JhcCByZW5kZXJWYWx1ZSB0byBoYW5kbGUgaW5pdGlhbGl6YXRpb24sIHdoaWNoIHVuZm9ydHVuYXRlbHkgaXNuJ3QKICAgICAgLy8gc3VwcG9ydGVkIG5hdGl2ZWx5IGJ5IFNoaW55IGF0IHRoZSB0aW1lIG9mIHRoaXMgd3JpdGluZy4KCiAgICAgIHNoaW55QmluZGluZy5yZW5kZXJWYWx1ZSA9IGZ1bmN0aW9uKGVsLCBkYXRhKSB7CiAgICAgICAgU2hpbnkucmVuZGVyRGVwZW5kZW5jaWVzKGRhdGEuZGVwcyk7CiAgICAgICAgLy8gUmVzb2x2ZSBzdHJpbmdzIG1hcmtlZCBhcyBqYXZhc2NyaXB0IGxpdGVyYWxzIHRvIG9iamVjdHMKICAgICAgICBpZiAoIShkYXRhLmV2YWxzIGluc3RhbmNlb2YgQXJyYXkpKSBkYXRhLmV2YWxzID0gW2RhdGEuZXZhbHNdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBkYXRhLmV2YWxzICYmIGkgPCBkYXRhLmV2YWxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB3aW5kb3cuSFRNTFdpZGdldHMuZXZhbHVhdGVTdHJpbmdNZW1iZXIoZGF0YS54LCBkYXRhLmV2YWxzW2ldKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFiaW5kaW5nRGVmLnJlbmRlck9uTnVsbFZhbHVlKSB7CiAgICAgICAgICBpZiAoZGF0YS54ID09PSBudWxsKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZWwuc3R5bGUudmlzaWJpbGl0eSA9ICJpbmhlcml0IjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFlbGVtZW50RGF0YShlbCwgImluaXRpYWxpemVkIikpIHsKICAgICAgICAgIGluaXRTaXppbmcoZWwpOwoKICAgICAgICAgIGVsZW1lbnREYXRhKGVsLCAiaW5pdGlhbGl6ZWQiLCB0cnVlKTsKICAgICAgICAgIGlmIChiaW5kaW5nRGVmLmluaXRpYWxpemUpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGJpbmRpbmdEZWYuaW5pdGlhbGl6ZShlbCwgZWwub2Zmc2V0V2lkdGgsCiAgICAgICAgICAgICAgZWwub2Zmc2V0SGVpZ2h0KTsKICAgICAgICAgICAgZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIsIHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGJpbmRpbmdEZWYucmVuZGVyVmFsdWUoZWwsIGRhdGEueCwgZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIpKTsKICAgICAgICBldmFsQW5kUnVuKGRhdGEuanNIb29rcy5yZW5kZXIsIGVsZW1lbnREYXRhKGVsLCAiaW5pdF9yZXN1bHQiKSwgW2VsLCBkYXRhLnhdKTsKICAgICAgfTsKCiAgICAgIC8vIE9ubHkgb3ZlcnJpZGUgcmVzaXplIGlmIGJpbmRpbmdEZWYgaW1wbGVtZW50cyBpdAogICAgICBpZiAoYmluZGluZ0RlZi5yZXNpemUpIHsKICAgICAgICBzaGlueUJpbmRpbmcucmVzaXplID0gZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICAgIC8vIFNoaW55IGNhbiBjYWxsIHJlc2l6ZSBiZWZvcmUgaW5pdGlhbGl6ZS9yZW5kZXJWYWx1ZSBoYXZlIGJlZW4KICAgICAgICAgIC8vIGNhbGxlZCwgd2hpY2ggZG9lc24ndCBtYWtlIHNlbnNlIGZvciB3aWRnZXRzLgogICAgICAgICAgaWYgKGVsZW1lbnREYXRhKGVsLCAiaW5pdGlhbGl6ZWQiKSkgewogICAgICAgICAgICBiaW5kaW5nRGVmLnJlc2l6ZShlbCwgd2lkdGgsIGhlaWdodCwgZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIpKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICBTaGlueS5vdXRwdXRCaW5kaW5ncy5yZWdpc3RlcihzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYubmFtZSk7CiAgICB9CiAgfTsKCiAgdmFyIHNjaGVkdWxlU3RhdGljUmVuZGVyVGltZXJJZCA9IG51bGw7CiAgZnVuY3Rpb24gc2NoZWR1bGVTdGF0aWNSZW5kZXIoKSB7CiAgICBpZiAoIXNjaGVkdWxlU3RhdGljUmVuZGVyVGltZXJJZCkgewogICAgICBzY2hlZHVsZVN0YXRpY1JlbmRlclRpbWVySWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHNjaGVkdWxlU3RhdGljUmVuZGVyVGltZXJJZCA9IG51bGw7CiAgICAgICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpOwogICAgICB9LCAxKTsKICAgIH0KICB9CgogIC8vIFJlbmRlciBzdGF0aWMgd2lkZ2V0cyBhZnRlciB0aGUgZG9jdW1lbnQgZmluaXNoZXMgbG9hZGluZwogIC8vIFN0YXRpY2FsbHkgcmVuZGVyIGFsbCBlbGVtZW50cyB0aGF0IGFyZSBvZiB0aGlzIHdpZGdldCdzIGNsYXNzCiAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlciA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGJpbmRpbmdzID0gd2luZG93LkhUTUxXaWRnZXRzLndpZGdldHMgfHwgW107CiAgICBmb3JFYWNoKGJpbmRpbmdzLCBmdW5jdGlvbihiaW5kaW5nKSB7CiAgICAgIHZhciBtYXRjaGVzID0gYmluZGluZy5maW5kKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CiAgICAgIGZvckVhY2gobWF0Y2hlcywgZnVuY3Rpb24oZWwpIHsKICAgICAgICB2YXIgc2l6ZU9iaiA9IGluaXRTaXppbmcoZWwsIGJpbmRpbmcpOwoKICAgICAgICBpZiAoaGFzQ2xhc3MoZWwsICJodG1sLXdpZGdldC1zdGF0aWMtYm91bmQiKSkKICAgICAgICAgIHJldHVybjsKICAgICAgICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUgKyAiIGh0bWwtd2lkZ2V0LXN0YXRpYy1ib3VuZCI7CgogICAgICAgIHZhciBpbml0UmVzdWx0OwogICAgICAgIGlmIChiaW5kaW5nLmluaXRpYWxpemUpIHsKICAgICAgICAgIGluaXRSZXN1bHQgPSBiaW5kaW5nLmluaXRpYWxpemUoZWwsCiAgICAgICAgICAgIHNpemVPYmogPyBzaXplT2JqLmdldFdpZHRoKCkgOiBlbC5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgc2l6ZU9iaiA/IHNpemVPYmouZ2V0SGVpZ2h0KCkgOiBlbC5vZmZzZXRIZWlnaHQKICAgICAgICAgICk7CiAgICAgICAgICBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IiwgaW5pdFJlc3VsdCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYmluZGluZy5yZXNpemUpIHsKICAgICAgICAgIHZhciBsYXN0U2l6ZSA9IHsKICAgICAgICAgICAgdzogc2l6ZU9iaiA/IHNpemVPYmouZ2V0V2lkdGgoKSA6IGVsLm9mZnNldFdpZHRoLAogICAgICAgICAgICBoOiBzaXplT2JqID8gc2l6ZU9iai5nZXRIZWlnaHQoKSA6IGVsLm9mZnNldEhlaWdodAogICAgICAgICAgfTsKICAgICAgICAgIHZhciByZXNpemVIYW5kbGVyID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgc2l6ZSA9IHsKICAgICAgICAgICAgICB3OiBzaXplT2JqID8gc2l6ZU9iai5nZXRXaWR0aCgpIDogZWwub2Zmc2V0V2lkdGgsCiAgICAgICAgICAgICAgaDogc2l6ZU9iaiA/IHNpemVPYmouZ2V0SGVpZ2h0KCkgOiBlbC5vZmZzZXRIZWlnaHQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHNpemUudyA9PT0gMCAmJiBzaXplLmggPT09IDApCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBpZiAoc2l6ZS53ID09PSBsYXN0U2l6ZS53ICYmIHNpemUuaCA9PT0gbGFzdFNpemUuaCkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGxhc3RTaXplID0gc2l6ZTsKICAgICAgICAgICAgYmluZGluZy5yZXNpemUoZWwsIHNpemUudywgc2l6ZS5oLCBpbml0UmVzdWx0KTsKICAgICAgICAgIH07CgogICAgICAgICAgb24od2luZG93LCAicmVzaXplIiwgcmVzaXplSGFuZGxlcik7CgogICAgICAgICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIGNhc2VzIHdoZXJlIHdlJ3JlIHJ1bm5pbmcgaW4gYSBTaGlueQogICAgICAgICAgLy8gYXBwLCBidXQgdGhlIHdpZGdldCBpdHNlbGYgaXMgbm90IGEgU2hpbnkgb3V0cHV0LCBidXQKICAgICAgICAgIC8vIHJhdGhlciBhIHNpbXBsZSBzdGF0aWMgd2lkZ2V0LiBPbmUgZXhhbXBsZSBvZiB0aGlzIGlzCiAgICAgICAgICAvLyBhbiBybWFya2Rvd24gZG9jdW1lbnQgdGhhdCBoYXMgcnVudGltZTpzaGlueSBhbmQgd2lkZ2V0CiAgICAgICAgICAvLyB0aGF0IGlzbid0IGluIGEgcmVuZGVyIGZ1bmN0aW9uLiBTaGlueSBvbmx5IGtub3dzIHRvCiAgICAgICAgICAvLyBjYWxsIHJlc2l6ZSBoYW5kbGVycyBmb3IgU2hpbnkgb3V0cHV0cywgbm90IGZvciBzdGF0aWMKICAgICAgICAgIC8vIHdpZGdldHMsIHNvIHdlIGRvIGl0IG91cnNlbHZlcy4KICAgICAgICAgIGlmICh3aW5kb3cualF1ZXJ5KSB7CiAgICAgICAgICAgIHdpbmRvdy5qUXVlcnkoZG9jdW1lbnQpLm9uKAogICAgICAgICAgICAgICJzaG93bi5odG1sd2lkZ2V0cyBzaG93bi5icy50YWIuaHRtbHdpZGdldHMgc2hvd24uYnMuY29sbGFwc2UuaHRtbHdpZGdldHMiLAogICAgICAgICAgICAgIHJlc2l6ZUhhbmRsZXIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgd2luZG93LmpRdWVyeShkb2N1bWVudCkub24oCiAgICAgICAgICAgICAgImhpZGRlbi5odG1sd2lkZ2V0cyBoaWRkZW4uYnMudGFiLmh0bWx3aWRnZXRzIGhpZGRlbi5icy5jb2xsYXBzZS5odG1sd2lkZ2V0cyIsCiAgICAgICAgICAgICAgcmVzaXplSGFuZGxlcgogICAgICAgICAgICApOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFRoaXMgaXMgbmVlZGVkIGZvciB0aGUgc3BlY2lmaWMgY2FzZSBvZiBpb3NsaWRlcywgd2hpY2gKICAgICAgICAgIC8vIGZsaXBzIHNsaWRlcyBiZXR3ZWVuIGRpc3BsYXk6bm9uZSBhbmQgZGlzcGxheTpibG9jay4KICAgICAgICAgIC8vIElkZWFsbHkgd2Ugd291bGQgbm90IGhhdmUgdG8gaGF2ZSBpb3NsaWRlLXNwZWNpZmljIGNvZGUKICAgICAgICAgIC8vIGhlcmUsIGJ1dCByYXRoZXIgaGF2ZSBpb3NsaWRlcyByYWlzZSBhIGdlbmVyaWMgZXZlbnQsCiAgICAgICAgICAvLyBidXQgdGhlIHJtYXJrZG93biBwYWNrYWdlIGp1c3Qgd2VudCB0byBDUkFOIHNvIHRoZQogICAgICAgICAgLy8gd2luZG93IHRvIGdldHRpbmcgdGhhdCBmaXhlZCBtYXkgYmUgbG9uZy4KICAgICAgICAgIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICAgICAgICAvLyBJdCdzIE9LIHRvIGxpbWl0IHRoaXMgdG8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIKICAgICAgICAgICAgLy8gYnJvd3NlcnMgYmVjYXVzZSBpb3NsaWRlcyBpdHNlbGYgb25seSBzdXBwb3J0cwogICAgICAgICAgICAvLyBzdWNoIGJyb3dzZXJzLgogICAgICAgICAgICBvbihkb2N1bWVudCwgInNsaWRlZW50ZXIiLCByZXNpemVIYW5kbGVyKTsKICAgICAgICAgICAgb24oZG9jdW1lbnQsICJzbGlkZWxlYXZlIiwgcmVzaXplSGFuZGxlcik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgc2NyaXB0RGF0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInNjcmlwdFtkYXRhLWZvcj0nIiArIGVsLmlkICsgIiddW3R5cGU9J2FwcGxpY2F0aW9uL2pzb24nXSIpOwogICAgICAgIGlmIChzY3JpcHREYXRhKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2Uoc2NyaXB0RGF0YS50ZXh0Q29udGVudCB8fCBzY3JpcHREYXRhLnRleHQpOwogICAgICAgICAgLy8gUmVzb2x2ZSBzdHJpbmdzIG1hcmtlZCBhcyBqYXZhc2NyaXB0IGxpdGVyYWxzIHRvIG9iamVjdHMKICAgICAgICAgIGlmICghKGRhdGEuZXZhbHMgaW5zdGFuY2VvZiBBcnJheSkpIGRhdGEuZXZhbHMgPSBbZGF0YS5ldmFsc107CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgZGF0YS5ldmFscyAmJiBrIDwgZGF0YS5ldmFscy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICB3aW5kb3cuSFRNTFdpZGdldHMuZXZhbHVhdGVTdHJpbmdNZW1iZXIoZGF0YS54LCBkYXRhLmV2YWxzW2tdKTsKICAgICAgICAgIH0KICAgICAgICAgIGJpbmRpbmcucmVuZGVyVmFsdWUoZWwsIGRhdGEueCwgaW5pdFJlc3VsdCk7CiAgICAgICAgICBldmFsQW5kUnVuKGRhdGEuanNIb29rcy5yZW5kZXIsIGluaXRSZXN1bHQsIFtlbCwgZGF0YS54XSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIGludm9rZVBvc3RSZW5kZXJIYW5kbGVycygpOwogIH0KCgogIGZ1bmN0aW9uIGhhc19qUXVlcnkzKCkgewogICAgaWYgKCF3aW5kb3cualF1ZXJ5KSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHZhciAkdmVyc2lvbiA9IHdpbmRvdy5qUXVlcnkuZm4uanF1ZXJ5OwogICAgdmFyICRtYWpvcl92ZXJzaW9uID0gcGFyc2VJbnQoJHZlcnNpb24uc3BsaXQoIi4iKVswXSk7CiAgICByZXR1cm4gJG1ham9yX3ZlcnNpb24gPj0gMzsKICB9CgogIC8qCiAgLyBTaGlueSAxLjQgYnVtcGVkIGpRdWVyeSBmcm9tIDEueCB0byAzLnggd2hpY2ggbWVhbnMgalF1ZXJ5J3MKICAvIG9uLXJlYWR5IGhhbmRsZXIgKGkuZS4sICQoZm4pKSBpcyBub3cgYXN5bmNyb25vdXMgKGkuZS4sIGl0IG5vdwogIC8gcmVhbGx5IG1lYW5zICQoc2V0VGltZW91dChmbikpLgogIC8gaHR0cHM6Ly9qcXVlcnkuY29tL3VwZ3JhZGUtZ3VpZGUvMy4wLyNicmVha2luZy1jaGFuZ2UtZG9jdW1lbnQtcmVhZHktaGFuZGxlcnMtYXJlLW5vdy1hc3luY2hyb25vdXMKICAvCiAgLyBTaW5jZSBTaGlueSB1c2VzICQoKSB0byBzY2hlZHVsZSBpbml0U2hpbnksIHNoaW55Pj0xLjQgY2FsbHMgaW5pdFNoaW55CiAgLyBvbmUgdGljayBsYXRlciB0aGFuIGl0IGRpZCBiZWZvcmUsIHdoaWNoIG1lYW5zIHN0YXRpY1JlbmRlcigpIGlzCiAgLyBjYWxsZWQgcmVuZGVyVmFsdWUoKSBlYXJsaWVyIHRoYW4gKGFkdmFuY2VkKSB3aWRnZXQgYXV0aG9ycyBtaWdodCBiZSBleHBlY3RpbmcuCiAgLyBodHRwczovL2dpdGh1Yi5jb20vcnN0dWRpby9zaGlueS9pc3N1ZXMvMjYzMAogIC8KICAvIEZvciBhIGNvbmNyZXRlIGV4YW1wbGUsIGxlYWZsZXQgaGFzIHNvbWUgbWV0aG9kcyAoZS5nLiwgdXBkYXRlQm91bmRzKQogIC8gd2hpY2ggcmVmZXJlbmNlIFNoaW55IG1ldGhvZHMgcmVnaXN0ZXJlZCBpbiBpbml0U2hpbnkgKGUuZy4sIHNldElucHV0VmFsdWUpLgogIC8gU2luY2UgbGVhZmxldCBpcyBwcml2eSB0byB0aGlzIGxpZmUtY3ljbGUsIGl0IGtub3dzIHRvIHVzZSBzZXRUaW1lb3V0KCkgdG8KICAvIGRlbGF5IGV4ZWN1dGlvbiBvZiB0aG9zZSBtZXRob2RzICh1bnRpbCBTaGlueSBtZXRob2RzIGFyZSByZWFkeSkKICAvIGh0dHBzOi8vZ2l0aHViLmNvbS9yc3R1ZGlvL2xlYWZsZXQvYmxvYi8xOGVjOTgxL2phdmFzY3JpcHQvc3JjL2luZGV4LmpzI0wyNjYtTDI2OAogIC8KICAvIElkZWFsbHkgd2lkZ2V0IGF1dGhvcnMgd291bGRuJ3QgbmVlZCB0byB1c2UgdGhpcyBzZXRUaW1lb3V0KCkgaGFjayB0aGF0CiAgLyBsZWFmbGV0IHVzZXMgdG8gY2FsbCBTaGlueSBtZXRob2RzIG9uIGEgc3RhdGljUmVuZGVyKCkuIEluIHRoZSBsb25nIHJ1biwKICAvIHRoZSBsb2dpYyBpbml0U2hpbnkgc2hvdWxkIGJlIGJyb2tlbiB1cCBzbyB0aGF0IG1ldGhvZCByZWdpc3RyYXRpb24gaGFwcGVucwogIC8gcmlnaHQgYXdheSwgYnV0IGJpbmRpbmcgaGFwcGVucyBsYXRlci4KICAqLwogIGZ1bmN0aW9uIG1heWJlU3RhdGljUmVuZGVyTGF0ZXIoKSB7CiAgICBpZiAoc2hpbnlNb2RlICYmIGhhc19qUXVlcnkzKCkpIHsKICAgICAgd2luZG93LmpRdWVyeSh3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTsKICAgIH0KICB9CgogIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgZnVuY3Rpb24oKSB7CiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBhcmd1bWVudHMuY2FsbGVlLCBmYWxzZSk7CiAgICAgIG1heWJlU3RhdGljUmVuZGVyTGF0ZXIoKTsKICAgIH0sIGZhbHNlKTsKICB9IGVsc2UgaWYgKGRvY3VtZW50LmF0dGFjaEV2ZW50KSB7CiAgICBkb2N1bWVudC5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAiY29tcGxldGUiKSB7CiAgICAgICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIGFyZ3VtZW50cy5jYWxsZWUpOwogICAgICAgIG1heWJlU3RhdGljUmVuZGVyTGF0ZXIoKTsKICAgICAgfQogICAgfSk7CiAgfQoKCiAgd2luZG93LkhUTUxXaWRnZXRzLmdldEF0dGFjaG1lbnRVcmwgPSBmdW5jdGlvbihkZXBuYW1lLCBrZXkpIHsKICAgIC8vIElmIG5vIGtleSwgZGVmYXVsdCB0byB0aGUgZmlyc3QgaXRlbQogICAgaWYgKHR5cGVvZihrZXkpID09PSAidW5kZWZpbmVkIikKICAgICAga2V5ID0gMTsKCiAgICB2YXIgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlcG5hbWUgKyAiLSIgKyBrZXkgKyAiLWF0dGFjaG1lbnQiKTsKICAgIGlmICghbGluaykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIkF0dGFjaG1lbnQgIiArIGRlcG5hbWUgKyAiLyIgKyBrZXkgKyAiIG5vdCBmb3VuZCBpbiBkb2N1bWVudCIpOwogICAgfQogICAgcmV0dXJuIGxpbmsuZ2V0QXR0cmlidXRlKCJocmVmIik7CiAgfTsKCiAgd2luZG93LkhUTUxXaWRnZXRzLmRhdGFmcmFtZVRvRDMgPSBmdW5jdGlvbihkZikgewogICAgdmFyIG5hbWVzID0gW107CiAgICB2YXIgbGVuZ3RoOwogICAgZm9yICh2YXIgbmFtZSBpbiBkZikgewogICAgICAgIGlmIChkZi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkKICAgICAgICAgICAgbmFtZXMucHVzaChuYW1lKTsKICAgICAgICBpZiAodHlwZW9mKGRmW25hbWVdKSAhPT0gIm9iamVjdCIgfHwgdHlwZW9mKGRmW25hbWVdLmxlbmd0aCkgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQWxsIGZpZWxkcyBtdXN0IGJlIGFycmF5cyIpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mKGxlbmd0aCkgIT09ICJ1bmRlZmluZWQiICYmIGxlbmd0aCAhPT0gZGZbbmFtZV0ubGVuZ3RoKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQWxsIGZpZWxkcyBtdXN0IGJlIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGgiKTsKICAgICAgICB9CiAgICAgICAgbGVuZ3RoID0gZGZbbmFtZV0ubGVuZ3RoOwogICAgfQogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIHZhciBpdGVtOwogICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgbGVuZ3RoOyByb3crKykgewogICAgICAgIGl0ZW0gPSB7fTsKICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBuYW1lcy5sZW5ndGg7IGNvbCsrKSB7CiAgICAgICAgICAgIGl0ZW1bbmFtZXNbY29sXV0gPSBkZltuYW1lc1tjb2xdXVtyb3ddOwogICAgICAgIH0KICAgICAgICByZXN1bHRzLnB1c2goaXRlbSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICB3aW5kb3cuSFRNTFdpZGdldHMudHJhbnNwb3NlQXJyYXkyRCA9IGZ1bmN0aW9uKGFycmF5KSB7CiAgICAgIGlmIChhcnJheS5sZW5ndGggPT09IDApIHJldHVybiBhcnJheTsKICAgICAgdmFyIG5ld0FycmF5ID0gYXJyYXlbMF0ubWFwKGZ1bmN0aW9uKGNvbCwgaSkgewogICAgICAgICAgcmV0dXJuIGFycmF5Lm1hcChmdW5jdGlvbihyb3cpIHsKICAgICAgICAgICAgICByZXR1cm4gcm93W2ldCiAgICAgICAgICB9KQogICAgICB9KTsKICAgICAgcmV0dXJuIG5ld0FycmF5OwogIH07CiAgLy8gU3BsaXQgdmFsdWUgYXQgc3BsaXRDaGFyLCBidXQgYWxsb3cgc3BsaXRDaGFyIHRvIGJlIGVzY2FwZWQKICAvLyB1c2luZyBlc2NhcGVDaGFyLiBBbnkgb3RoZXIgY2hhcmFjdGVycyBlc2NhcGVkIGJ5IGVzY2FwZUNoYXIKICAvLyB3aWxsIGJlIGluY2x1ZGVkIGFzIHVzdWFsIChpbmNsdWRpbmcgZXNjYXBlQ2hhciBpdHNlbGYpLgogIGZ1bmN0aW9uIHNwbGl0V2l0aEVzY2FwZSh2YWx1ZSwgc3BsaXRDaGFyLCBlc2NhcGVDaGFyKSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgdmFyIGVzY2FwZU1vZGUgPSBmYWxzZTsKICAgIHZhciBjdXJyZW50UmVzdWx0ID0gIiI7CiAgICBmb3IgKHZhciBwb3MgPSAwOyBwb3MgPCB2YWx1ZS5sZW5ndGg7IHBvcysrKSB7CiAgICAgIGlmICghZXNjYXBlTW9kZSkgewogICAgICAgIGlmICh2YWx1ZVtwb3NdID09PSBzcGxpdENoYXIpIHsKICAgICAgICAgIHJlc3VsdHMucHVzaChjdXJyZW50UmVzdWx0KTsKICAgICAgICAgIGN1cnJlbnRSZXN1bHQgPSAiIjsKICAgICAgICB9IGVsc2UgaWYgKHZhbHVlW3Bvc10gPT09IGVzY2FwZUNoYXIpIHsKICAgICAgICAgIGVzY2FwZU1vZGUgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdXJyZW50UmVzdWx0ICs9IHZhbHVlW3Bvc107CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGN1cnJlbnRSZXN1bHQgKz0gdmFsdWVbcG9zXTsKICAgICAgICBlc2NhcGVNb2RlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIGlmIChjdXJyZW50UmVzdWx0ICE9PSAiIikgewogICAgICByZXN1bHRzLnB1c2goY3VycmVudFJlc3VsdCk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9CiAgLy8gRnVuY3Rpb24gYXV0aG9yZWQgYnkgWWlodWkvSkogQWxsYWlyZQogIHdpbmRvdy5IVE1MV2lkZ2V0cy5ldmFsdWF0ZVN0cmluZ01lbWJlciA9IGZ1bmN0aW9uKG8sIG1lbWJlcikgewogICAgdmFyIHBhcnRzID0gc3BsaXRXaXRoRXNjYXBlKG1lbWJlciwgJy4nLCAnXFwnKTsKICAgIGZvciAodmFyIGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIHZhciBwYXJ0ID0gcGFydHNbaV07CiAgICAgIC8vIHBhcnQgbWF5IGJlIGEgY2hhcmFjdGVyIG9yICdudW1lcmljJyBtZW1iZXIgbmFtZQogICAgICBpZiAobyAhPT0gbnVsbCAmJiB0eXBlb2YgbyA9PT0gIm9iamVjdCIgJiYgcGFydCBpbiBvKSB7CiAgICAgICAgaWYgKGkgPT0gKGwgLSAxKSkgeyAvLyBpZiB3ZSBhcmUgYXQgdGhlIGVuZCBvZiB0aGUgbGluZSB0aGVuIGV2YWx1bGF0ZQogICAgICAgICAgaWYgKHR5cGVvZiBvW3BhcnRdID09PSAic3RyaW5nIikKICAgICAgICAgICAgb1twYXJ0XSA9IHRyeUV2YWwob1twYXJ0XSk7CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlIGNvbnRpbnVlIHRvIG5leHQgZW1iZWRkZWQgb2JqZWN0CiAgICAgICAgICBvID0gb1twYXJ0XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBSZXRyaWV2ZSB0aGUgSFRNTFdpZGdldCBpbnN0YW5jZSAoaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGFuCiAgLy8gSFRNTFdpZGdldCBiaW5kaW5nJ3MgaW5pdGlhbGl6ZSgpIG9yIGZhY3RvcnkoKSBmdW5jdGlvbikKICAvLyBhc3NvY2lhdGVkIHdpdGggYW4gZWxlbWVudCwgb3IgbnVsbCBpZiBub25lLgogIHdpbmRvdy5IVE1MV2lkZ2V0cy5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uKGVsKSB7CiAgICByZXR1cm4gZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIpOwogIH07CgogIC8vIEZpbmRzIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBzY29wZSB0aGF0IG1hdGNoZXMgdGhlIHNlbGVjdG9yLAogIC8vIGFuZCByZXR1cm5zIHRoZSBIVE1MV2lkZ2V0IGluc3RhbmNlIChpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YKICAvLyBhbiBIVE1MV2lkZ2V0IGJpbmRpbmcncyBpbml0aWFsaXplKCkgb3IgZmFjdG9yeSgpIGZ1bmN0aW9uKQogIC8vIGFzc29jaWF0ZWQgd2l0aCB0aGF0IGVsZW1lbnQsIGlmIGFueS4gSWYgbm8gZWxlbWVudCBtYXRjaGVzIHRoZQogIC8vIHNlbGVjdG9yLCBvciB0aGUgZmlyc3QgbWF0Y2hpbmcgZWxlbWVudCBoYXMgbm8gSFRNTFdpZGdldAogIC8vIGluc3RhbmNlIGFzc29jaWF0ZWQgd2l0aCBpdCwgdGhlbiBudWxsIGlzIHJldHVybmVkLgogIC8vCiAgLy8gVGhlIHNjb3BlIGFyZ3VtZW50IGlzIG9wdGlvbmFsLCBhbmQgZGVmYXVsdHMgdG8gd2luZG93LmRvY3VtZW50LgogIHdpbmRvdy5IVE1MV2lkZ2V0cy5maW5kID0gZnVuY3Rpb24oc2NvcGUsIHNlbGVjdG9yKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHNlbGVjdG9yID0gc2NvcGU7CiAgICAgIHNjb3BlID0gZG9jdW1lbnQ7CiAgICB9CgogICAgdmFyIGVsID0gc2NvcGUucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICBpZiAoZWwgPT09IG51bGwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd2luZG93LkhUTUxXaWRnZXRzLmdldEluc3RhbmNlKGVsKTsKICAgIH0KICB9OwoKICAvLyBGaW5kcyBhbGwgZWxlbWVudHMgaW4gdGhlIHNjb3BlIHRoYXQgbWF0Y2ggdGhlIHNlbGVjdG9yLCBhbmQKICAvLyByZXR1cm5zIHRoZSBIVE1MV2lkZ2V0IGluc3RhbmNlcyAoaS5lLiB0aGUgcmV0dXJuIHZhbHVlcyBvZgogIC8vIGFuIEhUTUxXaWRnZXQgYmluZGluZydzIGluaXRpYWxpemUoKSBvciBmYWN0b3J5KCkgZnVuY3Rpb24pCiAgLy8gYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50cywgaW4gYW4gYXJyYXkuIElmIGVsZW1lbnRzIHRoYXQKICAvLyBtYXRjaCB0aGUgc2VsZWN0b3IgZG9uJ3QgaGF2ZSBhbiBhc3NvY2lhdGVkIEhUTUxXaWRnZXQKICAvLyBpbnN0YW5jZSwgdGhlIHJldHVybmVkIGFycmF5IHdpbGwgY29udGFpbiBudWxscy4KICAvLwogIC8vIFRoZSBzY29wZSBhcmd1bWVudCBpcyBvcHRpb25hbCwgYW5kIGRlZmF1bHRzIHRvIHdpbmRvdy5kb2N1bWVudC4KICB3aW5kb3cuSFRNTFdpZGdldHMuZmluZEFsbCA9IGZ1bmN0aW9uKHNjb3BlLCBzZWxlY3RvcikgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkgewogICAgICBzZWxlY3RvciA9IHNjb3BlOwogICAgICBzY29wZSA9IGRvY3VtZW50OwogICAgfQoKICAgIHZhciBub2RlcyA9IHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgcmVzdWx0cy5wdXNoKHdpbmRvdy5IVE1MV2lkZ2V0cy5nZXRJbnN0YW5jZShub2Rlc1tpXSkpOwogICAgfQogICAgcmV0dXJuIHJlc3VsdHM7CiAgfTsKCiAgdmFyIHBvc3RSZW5kZXJIYW5kbGVycyA9IFtdOwogIGZ1bmN0aW9uIGludm9rZVBvc3RSZW5kZXJIYW5kbGVycygpIHsKICAgIHdoaWxlIChwb3N0UmVuZGVySGFuZGxlcnMubGVuZ3RoKSB7CiAgICAgIHZhciBoYW5kbGVyID0gcG9zdFJlbmRlckhhbmRsZXJzLnNoaWZ0KCk7CiAgICAgIGlmIChoYW5kbGVyKSB7CiAgICAgICAgaGFuZGxlcigpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBSZWdpc3RlciB0aGUgZ2l2ZW4gY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCBhZnRlciB0aGUKICAvLyBuZXh0IHRpbWUgc3RhdGljIHdpZGdldHMgYXJlIHJlbmRlcmVkLgogIHdpbmRvdy5IVE1MV2lkZ2V0cy5hZGRQb3N0UmVuZGVySGFuZGxlciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICBwb3N0UmVuZGVySGFuZGxlcnMucHVzaChjYWxsYmFjayk7CiAgfTsKCiAgLy8gVGFrZXMgYSBuZXctc3R5bGUgaW5zdGFuY2UtYm91bmQgZGVmaW5pdGlvbiwgYW5kIHJldHVybnMgYW4KICAvLyBvbGQtc3R5bGUgY2xhc3MtYm91bmQgZGVmaW5pdGlvbi4gVGhpcyBzYXZlcyB1cyBmcm9tIGhhdmluZwogIC8vIHRvIHJld3JpdGUgYWxsIHRoZSBsb2dpYyBpbiB0aGlzIGZpbGUgdG8gYWNjb21vZGF0ZSBib3RoCiAgLy8gdHlwZXMgb2YgZGVmaW5pdGlvbnMuCiAgZnVuY3Rpb24gY3JlYXRlTGVnYWN5RGVmaW5pdGlvbkFkYXB0ZXIoZGVmbikgewogICAgdmFyIHJlc3VsdCA9IHsKICAgICAgbmFtZTogZGVmbi5uYW1lLAogICAgICB0eXBlOiBkZWZuLnR5cGUsCiAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGVsLCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgcmV0dXJuIGRlZm4uZmFjdG9yeShlbCwgd2lkdGgsIGhlaWdodCk7CiAgICAgIH0sCiAgICAgIHJlbmRlclZhbHVlOiBmdW5jdGlvbihlbCwgeCwgaW5zdGFuY2UpIHsKICAgICAgICByZXR1cm4gaW5zdGFuY2UucmVuZGVyVmFsdWUoeCk7CiAgICAgIH0sCiAgICAgIHJlc2l6ZTogZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQsIGluc3RhbmNlKSB7CiAgICAgICAgcmV0dXJuIGluc3RhbmNlLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTsKICAgICAgfQogICAgfTsKCiAgICBpZiAoZGVmbi5maW5kKQogICAgICByZXN1bHQuZmluZCA9IGRlZm4uZmluZDsKICAgIGlmIChkZWZuLnJlbmRlckVycm9yKQogICAgICByZXN1bHQucmVuZGVyRXJyb3IgPSBkZWZuLnJlbmRlckVycm9yOwogICAgaWYgKGRlZm4uY2xlYXJFcnJvcikKICAgICAgcmVzdWx0LmNsZWFyRXJyb3IgPSBkZWZuLmNsZWFyRXJyb3I7CgogICAgcmV0dXJuIHJlc3VsdDsKICB9Cn0pKCk7Cgo="></script>
<script src="data:application/javascript;base64,LyogZWwgaXMgdGhlIGRpdiwgaG9sZGluZyB0aGUgcmdsIG9iamVjdCBhcyBlbC5yZ2xpbnN0YW5jZSwKICAgICB3aGljaCBob2xkcyB4IGFzIGVsLnJnbGluc3RhbmNlLnNjZW5lCiAgIHggaXMgdGhlIEpTT04gZW5jb2RlZCByZ2x3aWRnZXQuCiovCgoKSFRNTFdpZGdldHMud2lkZ2V0KHsKCiAgbmFtZTogJ3JnbFdlYkdMJywKCiAgdHlwZTogJ291dHB1dCcsCgogIGZhY3Rvcnk6IGZ1bmN0aW9uKGVsLCB3aWR0aCwgaGVpZ2h0KSB7CiAgICBlbC53aWR0aCA9IHdpZHRoOwogICAgZWwuaGVpZ2h0ID0gaGVpZ2h0OwogICAgdmFyIHJnbCA9IG5ldyByZ2x3aWRnZXRDbGFzcygpLAogICAgICAgIG9uY2hhbmdlc2VsZWN0aW9uID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZ2wuc2NlbmUuY3Jvc3N0YWxrLnNlbF9oYW5kbGUubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIHJnbC5jbGVhckJydXNoKGV4Y2VwdCA9IGUucmdsU3Vic2NlbmVJZCk7CiAgICAgICAgICByZ2wuc2VsZWN0aW9uKGUsIGZhbHNlKTsKICAgICAgICB9LAogICAgICAgIG9uY2hhbmdlZmlsdGVyID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgcmdsLnNlbGVjdGlvbihlLCB0cnVlKTsKICAgICAgICB9OwogICAgCiAgICByZXR1cm4geyAKICAgICAgcmVuZGVyVmFsdWU6IGZ1bmN0aW9uKHgpIHsKICAgICAgICB2YXIgaSwgcGVsLCBwbGF5ZXIsIGdyb3VwcywKICAgICAgICAgICAgaW5TaGlueSA9ICh0eXBlb2YgU2hpbnkgIT09ICJ1bmRlZmluZWQiKTsKICAgICAgCiAgICAgICAgeC5jcm9zc3RhbGsuZ3JvdXAgPSBncm91cHMgPSBbXS5jb25jYXQoeC5jcm9zc3RhbGsuZ3JvdXApOwogICAgICAgIHguY3Jvc3N0YWxrLmlkID0gW10uY29uY2F0KHguY3Jvc3N0YWxrLmlkKTsKICAgICAgICB4LmNyb3NzdGFsay5rZXkgPSBbXS5jb25jYXQoeC5jcm9zc3RhbGsua2V5KTsKICAgICAgICB4LmNyb3NzdGFsay5zZWxfaGFuZGxlID0gbmV3IEFycmF5KGdyb3Vwcy5sZW5ndGgpOwogICAgICAgIHguY3Jvc3N0YWxrLmZpbF9oYW5kbGUgPSBuZXcgQXJyYXkoZ3JvdXBzLmxlbmd0aCk7CiAgICAgICAgeC5jcm9zc3RhbGsuc2VsZWN0aW9uID0gW107CiAgICAgICAgZm9yIChpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgeC5jcm9zc3RhbGsuc2VsX2hhbmRsZVtpXSA9IG5ldyBjcm9zc3RhbGsuU2VsZWN0aW9uSGFuZGxlKGdyb3Vwc1tpXSwge3NoYXJlZElkOiB4LmNyb3NzdGFsay5pZFtpXX0pOwogICAgICAgICAgeC5jcm9zc3RhbGsuc2VsX2hhbmRsZVtpXS5vbigiY2hhbmdlIiwgb25jaGFuZ2VzZWxlY3Rpb24pOwogICAgICAgICAgeC5jcm9zc3RhbGsuZmlsX2hhbmRsZVtpXSA9IG5ldyBjcm9zc3RhbGsuRmlsdGVySGFuZGxlKGdyb3Vwc1tpXSwge3NoYXJlZElkOiB4LmNyb3NzdGFsay5pZFtpXX0pOwogICAgICAgICAgeC5jcm9zc3RhbGsuZmlsX2hhbmRsZVtpXS5vbigiY2hhbmdlIiwgb25jaGFuZ2VmaWx0ZXIpOwogICAgICAgIH0KICAgICAgICBpZiAoaW5TaGlueSkgewogICAgICAgICAgLy8gU2hpbnkgY2FsbHMgdGhpcyBtdWx0aXBsZSB0aW1lcywgc28gd2UgbmVlZCBleHRyYSBjbGVhbnVwCiAgICAgICAgICAvLyBiZXR3ZWVuCiAgICAgICAgICByZ2wuc3BoZXJlID0gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgICByZ2wuaW5pdGlhbGl6ZShlbCwgeCk7CiAgICAgICAgcmdsLmluaXRHTCgpOwogIAogIC8qIFdlIG1pZ2h0IGhhdmUgYmVlbiBjYWxsZWQgYWZ0ZXIgKHNvbWUgb2YpIHRoZSBwbGF5ZXJzIHdlcmUgcmVuZGVyZWQuCiAgICAgV2UgbmVlZCB0byBtYWtlIHN1cmUgd2UgcmVzcG9uZCB0byB0aGVpciBpbml0aWFsIHZhbHVlcy4gKi8KCiAgICAgICAgaWYgKHR5cGVvZiB4LnBsYXllcnMgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICB2YXIgcGxheWVycyA9IFtdLmNvbmNhdCh4LnBsYXllcnMpOwogICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBsYXllcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGxheWVyc1tpXSk7CiAgICAgICAgICAgIGlmIChwZWwpIHsKICAgICAgICAgICAgICBwbGF5ZXIgPSBwZWwucmdsUGxheWVyOwogICAgICAgICAgICAgIGlmIChwbGF5ZXIgJiYgKCFwbGF5ZXIuaW5pdGlhbGl6ZWQgfHwgaW5TaGlueSkpIHsKICAgICAgICAgICAgICAgIHJnbC5QbGF5ZXIocGVsLCBwbGF5ZXIpOwogICAgICAgICAgICAgICAgcGxheWVyLmluaXRpYWxpemVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmdsLmRyYWcgPSAwOwogICAgICAgIHJnbC5kcmF3U2NlbmUoKTsKICAgICAgfSwKCiAgICAgIHJlc2l6ZTogZnVuY3Rpb24od2lkdGgsIGhlaWdodCkgewogICAgICAgIGVsLndpZHRoID0gd2lkdGg7CiAgICAgICAgZWwuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgIGVsLnJnbGluc3RhbmNlLnJlc2l6ZShlbCk7CiAgICAgICAgZWwucmdsaW5zdGFuY2UuZHJhd1NjZW5lKCk7CiAgICAgIH0KICAgIH07CiAgfQp9KTsK"></script>
<link href="data:text/css,%2ErglPlayer%20%7B%0Awidth%3A%20auto%3B%0Aheight%3A%20auto%3B%0A%7D%0A%2ErglPlayer%20%2Ergl%2Dbutton%20%7B%0Awidth%3A%20auto%3B%0Adisplay%3A%20inline%2Dblock%3B%0Afont%2Dsize%3A%2075%25%3B%0A%7D%0A%2ErglPlayer%20%2Ergl%2Dslider%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Awidth%3A%2030%25%3B%0A%7D%0A%2ErglPlayer%20%2Ergl%2Dlabel%20%7B%0Adisplay%3A%20inline%3B%0Apadding%2Dleft%3A%206px%3B%0Apadding%2Dright%3A%206px%3B%0A%7D%0A" rel="stylesheet" />
<script src="data:application/javascript;base64,cmdsd2lkZ2V0Q2xhc3M9ZnVuY3Rpb24oKXt0aGlzLmNhbnZhcz1udWxsLHRoaXMudXNlck1hdHJpeD1uZXcgQ2FudmFzTWF0cml4NCx0aGlzLnR5cGVzPVtdLHRoaXMucHJNYXRyaXg9bmV3IENhbnZhc01hdHJpeDQsdGhpcy5tdk1hdHJpeD1uZXcgQ2FudmFzTWF0cml4NCx0aGlzLnZwPW51bGwsdGhpcy5wcm12TWF0cml4PW51bGwsdGhpcy5vcmlncz1udWxsLHRoaXMuZ2w9bnVsbCx0aGlzLnNjZW5lPW51bGwsdGhpcy5zZWxlY3Q9e3N0YXRlOiJpbmFjdGl2ZSIsc3Vic2NlbmU6bnVsbCxyZWdpb246e3AxOnt4OjAseTowfSxwMjp7eDowLHk6MH19fSx0aGlzLmRyYXdpbmc9ITF9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mX2lzX2xpdD0xLHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mX2lzX3Ntb290aD0yLHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mX2hhc190ZXh0dXJlPTQscmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmZfZGVwdGhfc29ydD04LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mX2ZpeGVkX3F1YWRzPTE2LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mX2lzX3RyYW5zcGFyZW50PTMyLHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mX2lzX2xpbmVzPTY0LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mX3Nwcml0ZXNfM2Q9MTI4LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mX2lzX3N1YnNjZW5lPTI1NixyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZl9pc19jbGlwcGxhbmVzPTUxMixyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZl9maXhlZF9zaXplPTEwMjQscmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmZfaXNfcG9pbnRzPTIwNDgscmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmZfaXNfdHdvc2lkZWQ9NDA5NixyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZl9mYXRfbGluZXM9ODE5MixyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZl9pc19icnVzaD0xNjM4NCxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZl9oYXNfZm9nPTMyNzY4LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mb2dOb25lPTAscmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmZvZ0xpbmVhcj0xLHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5mb2dFeHA9MixyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZm9nRXhwMj0zLHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpeyJ1bmRlZmluZWQiIT10eXBlb2YgdGhpcy5wcmVmaXgmJih0aGlzLmRlYnVnZWxlbWVudD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnByZWZpeCsiZGVidWciKSx0aGlzLmRlYnVnKCIiKSksdGhpcy5kcmFnPTAsdGhpcy5kcmF3U2NlbmUoKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLm11bHRNVj1mdW5jdGlvbihNLHYpe3JldHVybltNLm0xMSp2WzBdK00ubTEyKnZbMV0rTS5tMTMqdlsyXStNLm0xNCp2WzNdLE0ubTIxKnZbMF0rTS5tMjIqdlsxXStNLm0yMyp2WzJdK00ubTI0KnZbM10sTS5tMzEqdlswXStNLm0zMip2WzFdK00ubTMzKnZbMl0rTS5tMzQqdlszXSxNLm00MSp2WzBdK00ubTQyKnZbMV0rTS5tNDMqdlsyXStNLm00NCp2WzNdXX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLm11bHRWTT1mdW5jdGlvbih2LE0pe3JldHVybltNLm0xMSp2WzBdK00ubTIxKnZbMV0rTS5tMzEqdlsyXStNLm00MSp2WzNdLE0ubTEyKnZbMF0rTS5tMjIqdlsxXStNLm0zMip2WzJdK00ubTQyKnZbM10sTS5tMTMqdlswXStNLm0yMyp2WzFdK00ubTMzKnZbMl0rTS5tNDMqdlszXSxNLm0xNCp2WzBdK00ubTI0KnZbMV0rTS5tMzQqdlsyXStNLm00NCp2WzNdXX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLnZsZW49ZnVuY3Rpb24odil7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRvdHByb2Qodix2KSl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kb3Rwcm9kPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGFbMF0qYlswXSthWzFdKmJbMV0rYVsyXSpiWzJdfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUueHByb2Q9ZnVuY3Rpb24oYSxiKXtyZXR1cm5bYVsxXSpiWzJdLWFbMl0qYlsxXSxhWzJdKmJbMF0tYVswXSpiWzJdLGFbMF0qYlsxXS1hWzFdKmJbMF1dfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuY2JpbmQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5sZW5ndGg8YS5sZW5ndGg/Yj10aGlzLnJlcGVhdFRvTGVuKGIsYS5sZW5ndGgpOmEubGVuZ3RoPGIubGVuZ3RoJiYoYT10aGlzLnJlcGVhdFRvTGVuKGEsYi5sZW5ndGgpKSxhLm1hcChmdW5jdGlvbihjdXJyZW50VmFsdWUsaW5kZXgpe3JldHVybiBjdXJyZW50VmFsdWUuY29uY2F0KGJbaW5kZXhdKX0pfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuc3dhcD1mdW5jdGlvbihhLGksail7dmFyIHRlbXA9YVtpXTthW2ldPWFbal0sYVtqXT10ZW1wfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZmxhdHRlbj1mdW5jdGlvbihhcnIscmVzdWx0KXt2YXIgdmFsdWU7InVuZGVmaW5lZCI9PXR5cGVvZiByZXN1bHQmJihyZXN1bHQ9W10pO2Zvcih2YXIgaT0wLGxlbmd0aD1hcnIubGVuZ3RoO2xlbmd0aD5pO2krKyl2YWx1ZT1hcnJbaV0sQXJyYXkuaXNBcnJheSh2YWx1ZSk/dGhpcy5mbGF0dGVuKHZhbHVlLHJlc3VsdCk6cmVzdWx0LnB1c2godmFsdWUpO3JldHVybiByZXN1bHR9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5zZXRFbGVtZW50PWZ1bmN0aW9uKGEsaSx2YWx1ZSl7aWYoQXJyYXkuaXNBcnJheShhWzBdKSl7dmFyIGRpbT1hLmxlbmd0aCxjb2w9TWF0aC5mbG9vcihpL2RpbSkscm93PWklZGltO2Fbcm93XVtjb2xdPXZhbHVlfWVsc2UgYVtpXT12YWx1ZX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLnRyYW5zcG9zZT1mdW5jdGlvbihhKXt2YXIgaSxuZXdBcnJheT1bXSxuPWEubGVuZ3RoLG09YVswXS5sZW5ndGg7Zm9yKGk9MDttPmk7aSsrKW5ld0FycmF5LnB1c2goW10pO2ZvcihpPTA7bj5pO2krKylmb3IodmFyIGo9MDttPmo7aisrKW5ld0FycmF5W2pdLnB1c2goYVtpXVtqXSk7cmV0dXJuIG5ld0FycmF5fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuc3Vtc3E9ZnVuY3Rpb24oeCl7dmFyIGkscmVzdWx0PTA7Zm9yKGk9MDtpPHgubGVuZ3RoO2krKylyZXN1bHQrPXhbaV0qeFtpXTtyZXR1cm4gcmVzdWx0fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUudG9DYW52YXNNYXRyaXg0PWZ1bmN0aW9uKG1hdCl7aWYobWF0IGluc3RhbmNlb2YgQ2FudmFzTWF0cml4NClyZXR1cm4gbWF0O3ZhciByZXN1bHQ9bmV3IENhbnZhc01hdHJpeDQ7cmV0dXJuIG1hdD10aGlzLmZsYXR0ZW4odGhpcy50cmFuc3Bvc2UobWF0KSkscmVzdWx0LmxvYWQobWF0KSxyZXN1bHR9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5zdHJpbmdUb1JnYj1mdW5jdGlvbihzKXtzPXMucmVwbGFjZSgiIyIsIiIpO3ZhciBiaWdpbnQ9cGFyc2VJbnQocywxNik7cmV0dXJuWyhiaWdpbnQ+PjE2JjI1NSkvMjU1LChiaWdpbnQ+PjgmMjU1KS8yNTUsKDI1NSZiaWdpbnQpLzI1NV19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS53aGljaExpc3Q9ZnVuY3Rpb24oaWQpe3ZhciBvYmo9dGhpcy5nZXRPYmooaWQpLGZsYWdzPW9iai5mbGFncztyZXR1cm4ibGlnaHQiPT09b2JqLnR5cGU/ImxpZ2h0cyI6dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaXNfc3Vic2NlbmUpPyJzdWJzY2VuZXMiOnRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2lzX2NsaXBwbGFuZXMpPyJjbGlwcGxhbmVzIjp0aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc190cmFuc3BhcmVudCk/InRyYW5zcGFyZW50Ijoib3BhcXVlIn0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmNvbXBvbmVudFByb2R1Y3Q9ZnVuY3Rpb24oeCx5KXsidW5kZWZpbmVkIj09dHlwZW9mIHkmJnRoaXMuYWxlcnRPbmNlKCJCYWQgYXJnIHRvIGNvbXBvbmVudFByb2R1Y3QiKTt2YXIgaSxyZXN1bHQ9bmV3IEZsb2F0MzJBcnJheSgzKTtmb3IoaT0wOzM+aTtpKyspcmVzdWx0W2ldPXhbaV0qeVtpXTtyZXR1cm4gcmVzdWx0fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZ2V0UG93ZXJPZlR3bz1mdW5jdGlvbih2YWx1ZSl7Zm9yKHZhciBwb3c9MTt2YWx1ZT5wb3c7KXBvdyo9MjtyZXR1cm4gcG93fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUudW5pcXVlPWZ1bmN0aW9uKGFycil7cmV0dXJuIGFycj1bXS5jb25jYXQoYXJyKSxhcnIuZmlsdGVyKGZ1bmN0aW9uKHZhbHVlLGluZGV4LHNlbGYpe3JldHVybiBzZWxmLmluZGV4T2YodmFsdWUpPT09aW5kZXh9KX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmVxdWFsQXJyYXlzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifHxhJiZiJiZhLmxlbmd0aD09PWIubGVuZ3RoJiZhLmV2ZXJ5KGZ1bmN0aW9uKHYsaSl7cmV0dXJuIHY9PT1iW2ldfSl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5yZXBlYXRUb0xlbj1mdW5jdGlvbihhcnIsbGVuKXtmb3IoYXJyPVtdLmNvbmNhdChhcnIpO2Fyci5sZW5ndGg8bGVuLzI7KWFycj1hcnIuY29uY2F0KGFycik7cmV0dXJuIGFyci5jb25jYXQoYXJyLnNsaWNlKDAsbGVuLWFyci5sZW5ndGgpKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmFsZXJ0T25jZT1mdW5jdGlvbihtc2cpeyJ1bmRlZmluZWQiPT10eXBlb2YgdGhpcy5hbGVydGVkJiYodGhpcy5hbGVydGVkPSEwLGFsZXJ0KG1zZykpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZ2V0T2JqPWZ1bmN0aW9uKGlkKXtyZXR1cm4ibnVtYmVyIiE9dHlwZW9mIGlkJiZ0aGlzLmFsZXJ0T25jZSgiZ2V0T2JqIGlkIGlzICIrdHlwZW9mIGlkKSx0aGlzLnNjZW5lLm9iamVjdHNbaWRdfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZ2V0SWRzQnlUeXBlPWZ1bmN0aW9uKHR5cGUsc3Vic2NlbmUpe3ZhciBpLGlkcyxyZXN1bHQ9W10sc2VsZj10aGlzO2lmKCJ1bmRlZmluZWQiPT10eXBlb2Ygc3Vic2NlbmUpT2JqZWN0LmtleXModGhpcy5zY2VuZS5vYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7a2V5PXBhcnNlSW50KGtleSwxMCksc2VsZi5nZXRPYmooa2V5KS50eXBlPT09dHlwZSYmcmVzdWx0LnB1c2goa2V5KX0pO2Vsc2UgZm9yKGlkcz10aGlzLmdldE9iaihzdWJzY2VuZSkub2JqZWN0cyxpPTA7aTxpZHMubGVuZ3RoO2krKyl0aGlzLmdldE9iaihpZHNbaV0pLnR5cGU9PT10eXBlJiZyZXN1bHQucHVzaChpZHNbaV0pO3JldHVybiByZXN1bHR9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5nZXRPYmpNYXRlcmlhbD1mdW5jdGlvbihvYmoscHJvcGVydHkpe3ZhciBtYXQ7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBvYmoubWF0ZXJpYWwmJmNvbnNvbGUuZXJyb3IoIm1hdGVyaWFsIHVuZGVmaW5lZCIpLG1hdD1vYmoubWF0ZXJpYWxbcHJvcGVydHldLCJ1bmRlZmluZWQiPT10eXBlb2YgbWF0JiYobWF0PXRoaXMuc2NlbmUubWF0ZXJpYWxbcHJvcGVydHldKSxtYXR9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5nZXRNYXRlcmlhbD1mdW5jdGlvbihpZCxwcm9wZXJ0eSl7dmFyIG9iaj10aGlzLmdldE9iaihpZCk7cmV0dXJuIHRoaXMuZ2V0T2JqTWF0ZXJpYWwob2JqLHByb3BlcnR5KX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmdldEFkaj1mdW5jdGlvbihwb3Msb2Zmc2V0LHRleHQpe3N3aXRjaChwb3Mpe2Nhc2UgMTpyZXR1cm5bLjUsMStvZmZzZXRdO2Nhc2UgMjpyZXR1cm5bMStvZmZzZXQvdGV4dC5sZW5ndGgsLjVdO2Nhc2UgMzpyZXR1cm5bLjUsLW9mZnNldF07Y2FzZSA0OnJldHVyblstb2Zmc2V0L3RleHQubGVuZ3RoLC41XX19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5jb3VudENsaXBwbGFuZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb3VudE9ianMoImNsaXBwbGFuZXMiKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmNvdW50TGlnaHRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY291bnRPYmpzKCJsaWdodCIpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuY291bnRPYmpzPWZ1bmN0aW9uKHR5cGUpe3ZhciBzZWxmPXRoaXMsYm91bmQ9MDtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5zY2VuZS5vYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7c2VsZi5nZXRPYmoocGFyc2VJbnQoa2V5LDEwKSkudHlwZT09PXR5cGUmJihib3VuZCs9MSl9KSxib3VuZH0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRlYnVnPWZ1bmN0aW9uKG1zZyxpbWcpeyJ1bmRlZmluZWQiIT10eXBlb2YgdGhpcy5kZWJ1Z2VsZW1lbnQmJm51bGwhPT10aGlzLmRlYnVnZWxlbWVudD8odGhpcy5kZWJ1Z2VsZW1lbnQuaW5uZXJIVE1MPW1zZywidW5kZWZpbmVkIiE9dHlwZW9mIGltZyYmdGhpcy5kZWJ1Z2VsZW1lbnQuaW5zZXJ0QmVmb3JlKGltZyx0aGlzLmRlYnVnZWxlbWVudC5maXJzdENoaWxkKSk6IiIhPT1tc2cmJmFsZXJ0KG1zZyl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5nZXRTbGlkZT1mdW5jdGlvbigpe2Zvcih2YXIgcmVzdWx0PXRoaXMuZWwsZG9uZT0hMTtyZXN1bHQmJiFkb25lJiZ0aGlzLnNjZW5lLmNvbnRleHQucm1hcmtkb3duOyl7c3dpdGNoKHRoaXMuc2NlbmUuY29udGV4dC5ybWFya2Rvd24pe2Nhc2UiaW9zbGlkZXNfcHJlc2VudGF0aW9uIjppZigiU0xJREUiPT09cmVzdWx0LnRhZ05hbWUpcmV0dXJuIHJlc3VsdDticmVhaztjYXNlInNsaWR5X3ByZXNlbnRhdGlvbiI6aWYoIkRJViI9PT1yZXN1bHQudGFnTmFtZSYmcmVzdWx0LmNsYXNzTGlzdC5jb250YWlucygic2xpZGUiKSlyZXR1cm4gcmVzdWx0O2JyZWFrO2RlZmF1bHQ6cmV0dXJuIG51bGx9cmVzdWx0PXJlc3VsdC5wYXJlbnRFbGVtZW50fXJldHVybiBudWxsfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuaXNJbkJyb3dzZXJWaWV3cG9ydD1mdW5jdGlvbigpe3ZhciByZWN0PXRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHdpbmRIZWlnaHQ9d2luZG93LmlubmVySGVpZ2h0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LHdpbmRXaWR0aD13aW5kb3cuaW5uZXJXaWR0aHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO3JldHVybiB0aGlzLnNjZW5lLmNvbnRleHQmJm51bGwhPT10aGlzLnNjZW5lLmNvbnRleHQucm1hcmtkb3duJiZ0aGlzLnNsaWRlPyJpb3NsaWRlc19wcmVzZW50YXRpb24iPT09dGhpcy5zY2VuZS5jb250ZXh0LnJtYXJrZG93biYmdGhpcy5zbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoImN1cnJlbnQiKXx8InNsaWR5X3ByZXNlbnRhdGlvbiI9PT10aGlzLnNjZW5lLmNvbnRleHQucm1hcmtkb3duJiYhdGhpcy5zbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoImhpZGRlbiIpOnJlY3QudG9wPj0td2luZEhlaWdodCYmcmVjdC5sZWZ0Pj0td2luZFdpZHRoJiZyZWN0LmJvdHRvbTw9Mip3aW5kSGVpZ2h0JiZyZWN0LnJpZ2h0PD0yKndpbmRXaWR0aH0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmtleWRpZmY9ZnVuY3Rpb24ob2JqMSxvYmoyKXt2YXIgaSxrZXlzPU9iamVjdC5rZXlzKG9iajEpLHJlc3VsdD1bXTtmb3IoaT0wO2k8a2V5cy5sZW5ndGg7aSsrKSJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqMVtrZXlzW2ldXSYmInVuZGVmaW5lZCI9PXR5cGVvZiBvYmoyW2tleXNbaV1dJiZyZXN1bHQucHVzaChrZXlzW2ldKTtyZXR1cm4gcmVzdWx0fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuaXNTZXQ9ZnVuY3Rpb24oZmxhZ3MsZmxhZyl7cmV0dXJuIDAhPT0oZmxhZ3MmZmxhZyl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5pblN1YnNjZW5lPWZ1bmN0aW9uKGlkLHN1YnNjZW5lKXtyZXR1cm4gdGhpcy5nZXRPYmooc3Vic2NlbmUpLm9iamVjdHMuaW5kZXhPZihpZCk+LTF9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS50cmFuc2xhdGVDb29yZHM9ZnVuY3Rpb24oc3Vic2NlbmVpZCxjb29yZHMpe3ZhciB2aWV3cG9ydD10aGlzLmdldE9iaihzdWJzY2VuZWlkKS5wYXIzZC52aWV3cG9ydDtyZXR1cm57eDpjb29yZHMueC12aWV3cG9ydC54KnRoaXMuY2FudmFzLndpZHRoLHk6Y29vcmRzLnktdmlld3BvcnQueSp0aGlzLmNhbnZhcy5oZWlnaHR9fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuaW5WaWV3cG9ydD1mdW5jdGlvbihjb29yZHMsc3Vic2NlbmVpZCl7dmFyIHZpZXdwb3J0PXRoaXMuZ2V0T2JqKHN1YnNjZW5laWQpLnBhcjNkLnZpZXdwb3J0LHgwPWNvb3Jkcy54LXZpZXdwb3J0LngqdGhpcy5jYW52YXMud2lkdGgseTA9Y29vcmRzLnktdmlld3BvcnQueSp0aGlzLmNhbnZhcy5oZWlnaHQ7cmV0dXJuIHgwPj0wJiZ4MDw9dmlld3BvcnQud2lkdGgqdGhpcy5jYW52YXMud2lkdGgmJnkwPj0wJiZ5MDw9dmlld3BvcnQuaGVpZ2h0KnRoaXMuY2FudmFzLmhlaWdodH0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLndoaWNoU3Vic2NlbmU9ZnVuY3Rpb24oY29vcmRzKXt2YXIgc2VsZj10aGlzLHJlY3Vyc2U9ZnVuY3Rpb24oc3Vic2NlbmVpZCl7dmFyIGksaWQsc3Vic2NlbmVzPXNlbGYuZ2V0Q2hpbGRTdWJzY2VuZXMoc3Vic2NlbmVpZCk7Zm9yKGk9MDtpPHN1YnNjZW5lcy5sZW5ndGg7aSsrKWlmKGlkPXJlY3Vyc2Uoc3Vic2NlbmVzW2ldKSwidW5kZWZpbmVkIiE9dHlwZW9mIGlkKXJldHVybiBpZDtyZXR1cm4gc2VsZi5pblZpZXdwb3J0KGNvb3JkcyxzdWJzY2VuZWlkKT9zdWJzY2VuZWlkOnZvaWQgMH0scm9vdGlkPXRoaXMuc2NlbmUucm9vdFN1YnNjZW5lLHJlc3VsdD1yZWN1cnNlKHJvb3RpZCk7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiByZXN1bHQmJihyZXN1bHQ9cm9vdGlkKSxyZXN1bHR9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5hZGRUb1N1YnNjZW5lPWZ1bmN0aW9uKGlkLHN1YnNjZW5lKXt2YXIgdGhlbGlzdCxpLHRoZXN1Yj10aGlzLmdldE9iaihzdWJzY2VuZSksaWRzPVtpZF0sb2JqPXRoaXMuZ2V0T2JqKGlkKTtmb3IoInVuZGVmaW5lZCIhPXR5cGVvZiBvYmomJiJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLm5ld0lkcyYmKGlkcz1pZHMuY29uY2F0KG9iai5uZXdJZHMpKSx0aGVzdWIub2JqZWN0cz1bXS5jb25jYXQodGhlc3ViLm9iamVjdHMpLGk9MDtpPGlkcy5sZW5ndGg7aSsrKWlkPWlkc1tpXSwtMT09PXRoZXN1Yi5vYmplY3RzLmluZGV4T2YoaWQpJiYodGhlbGlzdD10aGlzLndoaWNoTGlzdChpZCksdGhlc3ViLm9iamVjdHMucHVzaChpZCksdGhlc3ViW3RoZWxpc3RdLnB1c2goaWQpKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRlbEZyb21TdWJzY2VuZT1mdW5jdGlvbihpZCxzdWJzY2VuZSl7dmFyIHRoZWxpc3QsaSxqLHRoZXN1Yj10aGlzLmdldE9iaihzdWJzY2VuZSksb2JqPXRoaXMuZ2V0T2JqKGlkKSxpZHM9W2lkXTtmb3IoInVuZGVmaW5lZCIhPXR5cGVvZiBvYmomJiJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLm5ld0lkcyYmKGlkcz1pZHMuY29uY2F0KG9iai5uZXdJZHMpKSx0aGVzdWIub2JqZWN0cz1bXS5jb25jYXQodGhlc3ViLm9iamVjdHMpLGo9MDtqPGlkcy5sZW5ndGg7aisrKWlkPWlkc1tqXSxpPXRoZXN1Yi5vYmplY3RzLmluZGV4T2YoaWQpLGk+LTEmJih0aGVzdWIub2JqZWN0cy5zcGxpY2UoaSwxKSx0aGVsaXN0PXRoaXMud2hpY2hMaXN0KGlkKSxpPXRoZXN1Ylt0aGVsaXN0XS5pbmRleE9mKGlkKSx0aGVzdWJbdGhlbGlzdF0uc3BsaWNlKGksMSkpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuc2V0U3Vic2NlbmVFbnRyaWVzPWZ1bmN0aW9uKGlkcyxzdWJzY2VuZWlkKXt2YXIgc3ViPXRoaXMuZ2V0T2JqKHN1YnNjZW5laWQpO3N1Yi5vYmplY3RzPWlkcyx0aGlzLmluaXRTdWJzY2VuZShzdWJzY2VuZWlkKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmdldFN1YnNjZW5lRW50cmllcz1mdW5jdGlvbihzdWJzY2VuZSl7cmV0dXJuIHRoaXMuZ2V0T2JqKHN1YnNjZW5lKS5vYmplY3RzfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZ2V0Q2hpbGRTdWJzY2VuZXM9ZnVuY3Rpb24oc3Vic2NlbmUpe3JldHVybiB0aGlzLmdldE9iaihzdWJzY2VuZSkuc3Vic2NlbmVzfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUudXNlaWQ9ZnVuY3Rpb24oc3Vic2NlbmVpZCx0eXBlKXt2YXIgc3ViPXRoaXMuZ2V0T2JqKHN1YnNjZW5laWQpO3JldHVybiJpbmhlcml0Ij09PXN1Yi5lbWJlZGRpbmdzW3R5cGVdP3RoaXMudXNlaWQoc3ViLnBhcmVudCx0eXBlKTpzdWJzY2VuZWlkfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZ2V0VmVydGV4U2hhZGVyPWZ1bmN0aW9uKGlkKXt2YXIgcmVzdWx0LG9iaj10aGlzLmdldE9iaihpZCksdXNlclNoYWRlcj1vYmoudXNlclZlcnRleFNoYWRlcixmbGFncz1vYmouZmxhZ3MsdHlwZT1vYmoudHlwZSxpc19saXQ9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaXNfbGl0KSxoYXNfdGV4dHVyZT10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9oYXNfdGV4dHVyZSksZml4ZWRfcXVhZHM9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfZml4ZWRfcXVhZHMpLHNwcml0ZXNfM2Q9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfc3ByaXRlc18zZCksbmNsaXBwbGFuZXM9dGhpcy5jb3VudENsaXBwbGFuZXMoKSxmaXhlZF9zaXplPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2ZpeGVkX3NpemUpLGlzX3BvaW50cz10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc19wb2ludHMpLGlzX3R3b3NpZGVkPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2lzX3R3b3NpZGVkKSxmYXRfbGluZXM9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfZmF0X2xpbmVzKSxpc19icnVzaD10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc19icnVzaCksaGFzX2ZvZz10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9oYXNfZm9nKSxoYXNfbm9ybWFscz0idW5kZWZpbmVkIiE9dHlwZW9mIG9iai5ub3JtYWxzLG5lZWRzX3Zub3JtYWw9aXNfbGl0JiYhZml4ZWRfcXVhZHMmJiFpc19icnVzaHx8aXNfdHdvc2lkZWQmJihoYXNfbm9ybWFsc3x8InNwaGVyZXMiPT09b2JqLnR5cGUpO2lmKCJjbGlwcGxhbmVzIiE9PXR5cGUmJiFzcHJpdGVzXzNkKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHVzZXJTaGFkZXIpcmV0dXJuIHVzZXJTaGFkZXI7aWYocmVzdWx0PSIgIC8qICoqKioqKiAiK3R5cGUrIiBvYmplY3QgIitpZCsiIHZlcnRleCBzaGFkZXIgKioqKioqICovXG4jaWZkZWYgR0xfRVNcbiNpZmRlZiBHTF9GUkFHTUVOVF9QUkVDSVNJT05fSElHSFxuICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4jZWxzZVxuICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiNlbmRpZlxuI2VuZGlmXG4gIGF0dHJpYnV0ZSB2ZWMzIGFQb3M7XG4gIGF0dHJpYnV0ZSB2ZWM0IGFDb2w7XG4gIHVuaWZvcm0gbWF0NCBtdk1hdHJpeDtcbiAgdW5pZm9ybSBtYXQ0IHByTWF0cml4O1xuICB2YXJ5aW5nIHZlYzQgdkNvbDtcbiAgdmFyeWluZyB2ZWM0IHZQb3NpdGlvbjtcbiIsbmVlZHNfdm5vcm1hbCYmKHJlc3VsdCs9IiAgYXR0cmlidXRlIHZlYzMgYU5vcm07XG4gIHVuaWZvcm0gbWF0NCBub3JtTWF0cml4O1xuICB2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcbiIpLChoYXNfdGV4dHVyZXx8InRleHQiPT09dHlwZSkmJihyZXN1bHQrPSIgIGF0dHJpYnV0ZSB2ZWMyIGFUZXhjb29yZDtcbiAgdmFyeWluZyB2ZWMyIHZUZXhjb29yZDtcbiIpLGZpeGVkX3NpemUmJihyZXN1bHQrPSIgIHVuaWZvcm0gdmVjMiB0ZXh0U2NhbGU7XG4iKSxmaXhlZF9xdWFkcyYmKHJlc3VsdCs9IiAgYXR0cmlidXRlIHZlYzIgYU9mcztcbiIpLGlzX3R3b3NpZGVkJiYocmVzdWx0Kz1oYXNfbm9ybWFsc3x8InNwaGVyZXMiPT09b2JqLnR5cGU/IiAgdmFyeWluZyBmbG9hdCBub3JtejtcbiI6IiAgYXR0cmlidXRlIHZlYzMgYVBvczE7XG4gIGF0dHJpYnV0ZSB2ZWMzIGFQb3MyO1xuICB2YXJ5aW5nIGZsb2F0IG5vcm16O1xuIiksZmF0X2xpbmVzJiYocmVzdWx0Kz0iICBhdHRyaWJ1dGUgdmVjMyBhTmV4dDtcbiAgYXR0cmlidXRlIHZlYzIgYVBvaW50O1xuICB2YXJ5aW5nIHZlYzIgdlBvaW50O1xuICB2YXJ5aW5nIGZsb2F0IHZMZW5ndGg7XG4gIHVuaWZvcm0gZmxvYXQgdUFzcGVjdDtcbiAgdW5pZm9ybSBmbG9hdCB1THdkO1xuIikscmVzdWx0Kz0iICB2b2lkIG1haW4odm9pZCkge1xuIiwhbmNsaXBwbGFuZXMmJmZpeGVkX3F1YWRzJiYhaGFzX2ZvZ3x8aXNfYnJ1c2h8fChyZXN1bHQrPSIgICAgdlBvc2l0aW9uID0gbXZNYXRyaXggKiB2ZWM0KGFQb3MsIDEuKTtcbiIpLGZpeGVkX3F1YWRzfHxpc19icnVzaHx8KHJlc3VsdCs9IiAgICBnbF9Qb3NpdGlvbiA9IHByTWF0cml4ICogdlBvc2l0aW9uO1xuIiksaXNfcG9pbnRzKXt2YXIgc2l6ZT10aGlzLmdldE1hdGVyaWFsKGlkLCJzaXplIik7cmVzdWx0PXJlc3VsdCsiICAgIGdsX1BvaW50U2l6ZSA9ICIrc2l6ZS50b0ZpeGVkKDEpKyI7XG4ifXJldHVybiByZXN1bHQrPSIgICAgdkNvbCA9IGFDb2w7XG4iLG5lZWRzX3Zub3JtYWwmJihyZXN1bHQrPSIgICAgdk5vcm1hbCA9IG5vcm1hbGl6ZSgobm9ybU1hdHJpeCAqIHZlYzQoYU5vcm0sIDEuKSkueHl6KTtcbiIpLChoYXNfdGV4dHVyZXx8InRleHQiPT09dHlwZSkmJihyZXN1bHQrPSIgICAgdlRleGNvb3JkID0gYVRleGNvb3JkO1xuIiksZml4ZWRfc2l6ZSYmKHJlc3VsdCs9IiAgICB2ZWM0IHBvcyA9IHByTWF0cml4ICogbXZNYXRyaXggKiB2ZWM0KGFQb3MsIDEuKTtcbiAgIHBvcyA9IHBvcy9wb3MudztcbiAgIGdsX1Bvc2l0aW9uID0gcG9zICsgdmVjNChhT2ZzKnRleHRTY2FsZSwgMC4sMC4pO1xuIiksInNwcml0ZXMiIT09dHlwZXx8Zml4ZWRfc2l6ZXx8KHJlc3VsdCs9IiAgICB2ZWM0IHBvcyA9IG12TWF0cml4ICogdmVjNChhUG9zLCAxLik7XG4gICBwb3MgPSBwb3MvcG9zLncgKyB2ZWM0KGFPZnMsIDAuLCAwLik7XG4gICBnbF9Qb3NpdGlvbiA9IHByTWF0cml4KnBvcztcbiIpLGlzX3R3b3NpZGVkJiYocmVzdWx0Kz1oYXNfbm9ybWFsc3x8InNwaGVyZXMiPT09b2JqLnR5cGU/IiAgIG5vcm16ID0gdk5vcm1hbC56OyI6IiAgIHZlYzQgcG9zMSA9IHByTWF0cml4Kihtdk1hdHJpeCp2ZWM0KGFQb3MxLCAxLikpO1xuICAgcG9zMSA9IHBvczEvcG9zMS53IC0gZ2xfUG9zaXRpb24vZ2xfUG9zaXRpb24udztcbiAgIHZlYzQgcG9zMiA9IHByTWF0cml4Kihtdk1hdHJpeCp2ZWM0KGFQb3MyLCAxLikpO1xuICAgcG9zMiA9IHBvczIvcG9zMi53IC0gZ2xfUG9zaXRpb24vZ2xfUG9zaXRpb24udztcbiAgIG5vcm16ID0gcG9zMS54KnBvczIueSAtIHBvczEueSpwb3MyLng7XG4iKSxmYXRfbGluZXMmJihyZXN1bHQrPSIgICB2ZWMyIGFzcGVjdFZlYyA9IHZlYzIodUFzcGVjdCwgMS4wKTtcbiAgIG1hdDQgcHJvalZpZXdNb2RlbCA9IHByTWF0cml4ICogbXZNYXRyaXg7XG4gICB2ZWM0IGN1cnJlbnRQcm9qZWN0ZWQgPSBwcm9qVmlld01vZGVsICogdmVjNChhUG9zLCAxLjApO1xuICAgY3VycmVudFByb2plY3RlZCA9IGN1cnJlbnRQcm9qZWN0ZWQvY3VycmVudFByb2plY3RlZC53O1xuICAgdmVjNCBuZXh0UHJvamVjdGVkID0gcHJvalZpZXdNb2RlbCAqIHZlYzQoYU5leHQsIDEuMCk7XG4gICB2ZWMyIGN1cnJlbnRTY3JlZW4gPSBjdXJyZW50UHJvamVjdGVkLnh5ICogYXNwZWN0VmVjO1xuICAgdmVjMiBuZXh0U2NyZWVuID0gKG5leHRQcm9qZWN0ZWQueHkgLyBuZXh0UHJvamVjdGVkLncpICogYXNwZWN0VmVjO1xuICAgZmxvYXQgbGVuID0gdUx3ZDtcbiAgIHZlYzIgZGlyID0gdmVjMigxLjAsIDAuMCk7XG4gICB2UG9pbnQgPSBhUG9pbnQ7XG4gICB2TGVuZ3RoID0gbGVuZ3RoKG5leHRTY3JlZW4gLSBjdXJyZW50U2NyZWVuKS8yLjA7XG4gICB2TGVuZ3RoID0gdkxlbmd0aC8odkxlbmd0aCArIGxlbik7XG4gICBpZiAodkxlbmd0aCA+IDAuMCkge1xuICAgICBkaXIgPSBub3JtYWxpemUobmV4dFNjcmVlbiAtIGN1cnJlbnRTY3JlZW4pO1xuICAgfVxuICAgdmVjMiBub3JtYWwgPSB2ZWMyKC1kaXIueSwgZGlyLngpO1xuICAgZGlyLnggLz0gdUFzcGVjdDtcbiAgIG5vcm1hbC54IC89IHVBc3BlY3Q7XG4gICB2ZWM0IG9mZnNldCA9IHZlYzQobGVuKihub3JtYWwqYVBvaW50LngqYVBvaW50LnkgLSBkaXIpLCAwLjAsIDAuMCk7XG4gICBnbF9Qb3NpdGlvbiA9IGN1cnJlbnRQcm9qZWN0ZWQgKyBvZmZzZXQ7XG4iKSxpc19icnVzaCYmKHJlc3VsdCs9IiAgIGdsX1Bvc2l0aW9uID0gdmVjNChhUG9zLCAxLik7XG4iKSxyZXN1bHQrPSIgIH1cbiJ9fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZ2V0RnJhZ21lbnRTaGFkZXI9ZnVuY3Rpb24oaWQpe3ZhciBpLHRleHR1cmVfZm9ybWF0LG5saWdodHMscmVzdWx0LG9iaj10aGlzLmdldE9iaihpZCksdXNlclNoYWRlcj1vYmoudXNlckZyYWdtZW50U2hhZGVyLGZsYWdzPW9iai5mbGFncyx0eXBlPW9iai50eXBlLGlzX2xpdD10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc19saXQpLGhhc190ZXh0dXJlPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2hhc190ZXh0dXJlKSxmaXhlZF9xdWFkcz10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9maXhlZF9xdWFkcyksc3ByaXRlc18zZD10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9zcHJpdGVzXzNkKSxpc190d29zaWRlZD10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc190d29zaWRlZCksZmF0X2xpbmVzPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2ZhdF9saW5lcyksaXNfdHJhbnNwYXJlbnQ9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaXNfdHJhbnNwYXJlbnQpLGlzX3BvaW50cz10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc19wb2ludHMpLGhhc19mb2c9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaGFzX2ZvZyksbmNsaXBwbGFuZXM9dGhpcy5jb3VudENsaXBwbGFuZXMoKTtpZigiY2xpcHBsYW5lcyIhPT10eXBlJiYhc3ByaXRlc18zZCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB1c2VyU2hhZGVyKXJldHVybiB1c2VyU2hhZGVyO2ZvcihoYXNfdGV4dHVyZSYmKHRleHR1cmVfZm9ybWF0PXRoaXMuZ2V0TWF0ZXJpYWwoaWQsInRleHR5cGUiKSkscmVzdWx0PSIvKiAqKioqKiogIit0eXBlKyIgb2JqZWN0ICIraWQrIiBmcmFnbWVudCBzaGFkZXIgKioqKioqICovXG4jaWZkZWYgR0xfRVNcbiNpZmRlZiBHTF9GUkFHTUVOVF9QUkVDSVNJT05fSElHSFxuICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4jZWxzZVxuICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiNlbmRpZlxuI2VuZGlmXG4gIHZhcnlpbmcgdmVjNCB2Q29sOyAvLyBjYXJyaWVzIGFscGhhXG4gIHZhcnlpbmcgdmVjNCB2UG9zaXRpb247XG4iLChoYXNfdGV4dHVyZXx8InRleHQiPT09dHlwZSkmJihyZXN1bHQrPSIgIHZhcnlpbmcgdmVjMiB2VGV4Y29vcmQ7XG4gIHVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1xuIiksaGFzX2ZvZyYmKHJlc3VsdCs9IiAgdW5pZm9ybSBpbnQgdUZvZ01vZGU7XG4gIHVuaWZvcm0gdmVjMyB1Rm9nQ29sb3I7XG4gIHVuaWZvcm0gdmVjNCB1Rm9nUGFybXM7XG4iKSxpc19saXQmJiFmaXhlZF9xdWFkcyYmKHJlc3VsdCs9IiAgdmFyeWluZyB2ZWMzIHZOb3JtYWw7XG4iKSxpPTA7bmNsaXBwbGFuZXM+aTtpKyspcmVzdWx0PXJlc3VsdCsiICB1bmlmb3JtIHZlYzQgdkNsaXBwbGFuZSIraSsiO1xuIjtpZihpc19saXQmJihubGlnaHRzPXRoaXMuY291bnRMaWdodHMoKSxubGlnaHRzP3Jlc3VsdCs9IiAgdW5pZm9ybSBtYXQ0IG12TWF0cml4O1xuIjppc19saXQ9ITEpLGlzX2xpdClmb3IocmVzdWx0Kz0iICB1bmlmb3JtIHZlYzMgZW1pc3Npb247XG4gIHVuaWZvcm0gZmxvYXQgc2hpbmluZXNzO1xuIixpPTA7bmxpZ2h0cz5pO2krKylyZXN1bHQ9cmVzdWx0KyIgIHVuaWZvcm0gdmVjMyBhbWJpZW50IitpKyI7XG4gIHVuaWZvcm0gdmVjMyBzcGVjdWxhciIraSsiOyAvLyBsaWdodCptYXRlcmlhbFxuICB1bmlmb3JtIHZlYzMgZGlmZnVzZSIraSsiO1xuICB1bmlmb3JtIHZlYzMgbGlnaHREaXIiK2krIjtcbiAgdW5pZm9ybSBib29sIHZpZXdwb2ludCIraSsiO1xuICB1bmlmb3JtIGJvb2wgZmluaXRlIitpKyI7XG4iO2lmKGlzX3R3b3NpZGVkJiYocmVzdWx0Kz0iICB1bmlmb3JtIGJvb2wgZnJvbnQ7XG4gIHZhcnlpbmcgZmxvYXQgbm9ybXo7XG4iKSxmYXRfbGluZXMmJihyZXN1bHQrPSIgIHZhcnlpbmcgdmVjMiB2UG9pbnQ7XG4gIHZhcnlpbmcgZmxvYXQgdkxlbmd0aDtcbiIpLHJlc3VsdCs9IiAgdm9pZCBtYWluKHZvaWQpIHtcbiAgICB2ZWM0IGZyYWdDb2xvcjtcbiIsZmF0X2xpbmVzJiYocmVzdWx0Kz0iICAgIHZlYzIgcG9pbnQgPSB2UG9pbnQ7XG4gICAgYm9vbCBuZWcgPSBwb2ludC55IDwgMC4wO1xuICAgIHBvaW50LnkgPSBuZWcgPyAgICAgICAocG9pbnQueSArIHZMZW5ndGgpLygxLjAgLSB2TGVuZ3RoKSA6XG4gICAgIC0ocG9pbnQueSAtIHZMZW5ndGgpLygxLjAgLSB2TGVuZ3RoKTtcbiIsaXNfdHJhbnNwYXJlbnQmJiJsaW5lc3RyaXAiPT09dHlwZSYmKHJlc3VsdCs9IiAgICBpZiAobmVnICYmIGxlbmd0aChwb2ludCkgPD0gMS4wKSBkaXNjYXJkO1xuIikscmVzdWx0Kz0iICAgIHBvaW50LnkgPSBtaW4ocG9pbnQueSwgMC4wKTtcbiAgICBpZiAobGVuZ3RoKHBvaW50KSA+IDEuMCkgZGlzY2FyZDtcbiIpLGlzX3BvaW50cyl7dmFyIHJvdW5kPXRoaXMuZ2V0TWF0ZXJpYWwoaWQsInBvaW50X2FudGlhbGlhcyIpO3JvdW5kJiYocmVzdWx0Kz0iICAgIHZlYzIgY29vcmQgPSBnbF9Qb2ludENvb3JkIC0gdmVjMigwLjUpO1xuICAgIGlmIChsZW5ndGgoY29vcmQpID4gMC41KSBkaXNjYXJkO1xuIil9Zm9yKGk9MDtuY2xpcHBsYW5lcz5pO2krKylyZXN1bHQ9cmVzdWx0KyIgICAgaWYgKGRvdCh2UG9zaXRpb24sIHZDbGlwcGxhbmUiK2krIikgPCAwLjApIGRpc2NhcmQ7XG4iO2lmKGZpeGVkX3F1YWRzP3Jlc3VsdCs9IiAgICB2ZWMzIG4gPSB2ZWMzKDAuLCAwLiwgMS4pO1xuIjppc19saXQmJihyZXN1bHQrPSIgICAgdmVjMyBuID0gbm9ybWFsaXplKHZOb3JtYWwpO1xuIiksaXNfdHdvc2lkZWQmJihyZXN1bHQrPSIgICAgaWYgKChub3JteiA8PSAwLikgIT0gZnJvbnQpIGRpc2NhcmQ7XG4iKSxpc19saXQpZm9yKHJlc3VsdCs9IiAgICB2ZWMzIGV5ZSA9IG5vcm1hbGl6ZSgtdlBvc2l0aW9uLnh5eik7XG4gICB2ZWMzIGxpZ2h0ZGlyO1xuICAgdmVjNCBjb2xEaWZmO1xuICAgdmVjMyBoYWxmVmVjO1xuICAgdmVjNCBsaWdodGVmZmVjdCA9IHZlYzQoZW1pc3Npb24sIDAuKTtcbiAgIHZlYzMgY29sO1xuICAgZmxvYXQgbkRvdEw7XG4iLGZpeGVkX3F1YWRzfHwocmVzdWx0Kz0iICAgbiA9IC1mYWNlZm9yd2FyZChuLCBuLCBleWUpO1xuIiksaT0wO25saWdodHM+aTtpKyspcmVzdWx0PXJlc3VsdCsiICAgY29sRGlmZiA9IHZlYzQodkNvbC5yZ2IgKiBkaWZmdXNlIitpKyIsIHZDb2wuYSk7XG4gICBsaWdodGRpciA9IGxpZ2h0RGlyIitpKyI7XG4gICBpZiAoIXZpZXdwb2ludCIraSsiKVxuICAgICBsaWdodGRpciA9IChtdk1hdHJpeCAqIHZlYzQobGlnaHRkaXIsIDEuKSkueHl6O1xuICAgaWYgKCFmaW5pdGUiK2krIikge1xuICAgICBoYWxmVmVjID0gbm9ybWFsaXplKGxpZ2h0ZGlyICsgZXllKTtcbiAgIH0gZWxzZSB7XG4gICAgIGxpZ2h0ZGlyID0gbm9ybWFsaXplKGxpZ2h0ZGlyIC0gdlBvc2l0aW9uLnh5eik7XG4gICAgIGhhbGZWZWMgPSBub3JtYWxpemUobGlnaHRkaXIgKyBleWUpO1xuICAgfVxuICAgIGNvbCA9IGFtYmllbnQiK2krIjtcbiAgIG5Eb3RMID0gZG90KG4sIGxpZ2h0ZGlyKTtcbiAgIGNvbCA9IGNvbCArIG1heChuRG90TCwgMC4pICogY29sRGlmZi5yZ2I7XG4gICBjb2wgPSBjb2wgKyBwb3cobWF4KGRvdChoYWxmVmVjLCBuKSwgMC4pLCBzaGluaW5lc3MpICogc3BlY3VsYXIiK2krIjtcbiAgIGxpZ2h0ZWZmZWN0ID0gbGlnaHRlZmZlY3QgKyB2ZWM0KGNvbCwgY29sRGlmZi5hKTtcbiI7ZWxzZSByZXN1bHQrPSIgICAgdmVjNCBjb2xEaWZmID0gdkNvbDtcbiAgICB2ZWM0IGxpZ2h0ZWZmZWN0ID0gY29sRGlmZjtcbiI7cmV0dXJuInRleHQiPT09dHlwZSYmKHJlc3VsdCs9IiAgICB2ZWM0IHRleHR1cmVDb2xvciA9IGxpZ2h0ZWZmZWN0KnRleHR1cmUyRCh1U2FtcGxlciwgdlRleGNvb3JkKTtcbiIpLGhhc190ZXh0dXJlP3Jlc3VsdD1yZXN1bHQre3JnYjoiICAgdmVjNCB0ZXh0dXJlQ29sb3IgPSBsaWdodGVmZmVjdCp2ZWM0KHRleHR1cmUyRCh1U2FtcGxlciwgdlRleGNvb3JkKS5yZ2IsIDEuKTtcbiIscmdiYToiICAgdmVjNCB0ZXh0dXJlQ29sb3IgPSBsaWdodGVmZmVjdCp0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXhjb29yZCk7XG4iLGFscGhhOiIgICB2ZWM0IHRleHR1cmVDb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleGNvb3JkKTtcbiAgIGZsb2F0IGx1bWluYW5jZSA9IGRvdCh2ZWMzKDEuLDEuLDEuKSwgdGV4dHVyZUNvbG9yLnJnYikvMy47XG4gICB0ZXh0dXJlQ29sb3IgPSAgdmVjNChsaWdodGVmZmVjdC5yZ2IsIGxpZ2h0ZWZmZWN0LmEqbHVtaW5hbmNlKTtcbiIsbHVtaW5hbmNlOiIgICB2ZWM0IHRleHR1cmVDb2xvciA9IHZlYzQobGlnaHRlZmZlY3QucmdiKmRvdCh0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXhjb29yZCkucmdiLCB2ZWMzKDEuLDEuLDEuKSkvMy4sIGxpZ2h0ZWZmZWN0LmEpO1xuIiwibHVtaW5hbmNlLmFscGhhIjoiICAgIHZlYzQgdGV4dHVyZUNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4Y29vcmQpO1xuICAgIGZsb2F0IGx1bWluYW5jZSA9IGRvdCh2ZWMzKDEuLDEuLDEuKSx0ZXh0dXJlQ29sb3IucmdiKS8zLjtcbiAgICB0ZXh0dXJlQ29sb3IgPSB2ZWM0KGxpZ2h0ZWZmZWN0LnJnYipsdW1pbmFuY2UsIGxpZ2h0ZWZmZWN0LmEqdGV4dHVyZUNvbG9yLmEpO1xuIn1bdGV4dHVyZV9mb3JtYXRdKyIgICAgZnJhZ0NvbG9yID0gdGV4dHVyZUNvbG9yO1xuIjpyZXN1bHQrPSJ0ZXh0Ij09PXR5cGU/IiAgICBpZiAodGV4dHVyZUNvbG9yLmEgPCAwLjEpXG4gICAgICBkaXNjYXJkO1xuICAgIGVsc2VcbiAgICAgIGZyYWdDb2xvciA9IHRleHR1cmVDb2xvcjtcbiI6IiAgICBmcmFnQ29sb3IgPSBsaWdodGVmZmVjdDtcbiIscmVzdWx0Kz1oYXNfZm9nPyIgICAgZmxvYXQgZm9nRjtcbiAgICBpZiAodUZvZ01vZGUgPiAwKSB7XG4gICAgICBmb2dGID0gKHVGb2dQYXJtcy55IC0gdlBvc2l0aW9uLnovdlBvc2l0aW9uLncpLyh1Rm9nUGFybXMueSAtIHVGb2dQYXJtcy54KTtcbiAgICAgIGlmICh1Rm9nTW9kZSA+IDEpXG4gICAgICAgIGZvZ0YgPSBtaXgodUZvZ1Bhcm1zLncsIDEuMCwgZm9nRik7XG4gICAgICBmb2dGID0gZm9nRip1Rm9nUGFybXMuejtcbiAgICAgIGlmICh1Rm9nTW9kZSA9PSAyKVxuICAgICAgICBmb2dGID0gMS4wIC0gZXhwKC1mb2dGKTtcbiAgICAgIGVsc2UgaWYgKHVGb2dNb2RlID09IDMpXG4gICAgICAgIGZvZ0YgPSAxLjAgLSBleHAoLWZvZ0YqZm9nRik7XG4gICAgICBmb2dGID0gY2xhbXAoZm9nRiwgMC4wLCAxLjApO1xuICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChtaXgoZnJhZ0NvbG9yLnJnYiwgdUZvZ0NvbG9yLCBmb2dGKSwgZnJhZ0NvbG9yLmEpO1xuICAgIH0gZWxzZSBnbF9GcmFnQ29sb3IgPSBmcmFnQ29sb3I7XG4iOiIgICAgZ2xfRnJhZ0NvbG9yID0gZnJhZ0NvbG9yO1xuIixyZXN1bHQrPSIgIH1cbiJ9fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZ2V0U2hhZGVyPWZ1bmN0aW9uKHNoYWRlclR5cGUsY29kZSl7dmFyIHNoYWRlcixnbD10aGlzLmdsO3JldHVybiBzaGFkZXI9Z2wuY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpLGdsLnNoYWRlclNvdXJjZShzaGFkZXIsY29kZSksZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpLGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsZ2wuQ09NUElMRV9TVEFUVVMpfHxnbC5pc0NvbnRleHRMb3N0KCl8fGFsZXJ0KGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSksc2hhZGVyfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuaGFuZGxlTG9hZGVkVGV4dHVyZT1mdW5jdGlvbih0ZXh0dXJlLHRleHR1cmVDYW52YXMpe3ZhciBnbD10aGlzLmdsfHx0aGlzLmluaXRHTCgpO2dsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19GTElQX1lfV0VCR0wsITApLGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsdGV4dHVyZSksZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELDAsZ2wuUkdCQSxnbC5SR0JBLGdsLlVOU0lHTkVEX0JZVEUsdGV4dHVyZUNhbnZhcyksZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELGdsLlRFWFRVUkVfTUFHX0ZJTFRFUixnbC5MSU5FQVIpLGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCxnbC5URVhUVVJFX01JTl9GSUxURVIsZ2wuTElORUFSX01JUE1BUF9ORUFSRVNUKSxnbC5nZW5lcmF0ZU1pcG1hcChnbC5URVhUVVJFXzJEKSxnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELG51bGwpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZ2V0TWF4VGV4U2l6ZT1mdW5jdGlvbigpe3ZhciBnbD10aGlzLmdsfHx0aGlzLmluaXRHTCgpO3JldHVybiBNYXRoLm1pbig0MDk2LGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVEVYVFVSRV9TSVpFKSl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5sb2FkSW1hZ2VUb1RleHR1cmU9ZnVuY3Rpb24odXJpLHRleHR1cmUpe3ZhciBjYW52YXM9dGhpcy50ZXh0dXJlQ2FudmFzLGN0eD1jYW52YXMuZ2V0Q29udGV4dCgiMmQiKSxpbWFnZT1uZXcgSW1hZ2Usc2VsZj10aGlzO2ltYWdlLm9ubG9hZD1mdW5jdGlvbigpe2Zvcih2YXIgdz1pbWFnZS53aWR0aCxoPWltYWdlLmhlaWdodCxjYW52YXNYPXNlbGYuZ2V0UG93ZXJPZlR3byh3KSxjYW52YXNZPXNlbGYuZ2V0UG93ZXJPZlR3byhoKSxtYXhUZXhTaXplPXNlbGYuZ2V0TWF4VGV4U2l6ZSgpO2NhbnZhc1g+MSYmY2FudmFzWT4xJiYoY2FudmFzWD5tYXhUZXhTaXplfHxjYW52YXNZPm1heFRleFNpemUpOyljYW52YXNYLz0yLGNhbnZhc1kvPTI7Y2FudmFzLndpZHRoPWNhbnZhc1gsY2FudmFzLmhlaWdodD1jYW52YXNZLGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQ9ITAsY3R4LmRyYXdJbWFnZShpbWFnZSwwLDAsY2FudmFzWCxjYW52YXNZKSxzZWxmLmhhbmRsZUxvYWRlZFRleHR1cmUodGV4dHVyZSxjYW52YXMpLHNlbGYuZHJhd1NjZW5lKCl9LGltYWdlLnNyYz11cml9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kcmF3VGV4dFRvQ2FudmFzPWZ1bmN0aW9uKHRleHQsY2V4LGZhbWlseSxmb250KXt2YXIgY2FudmFzWCxjYW52YXNZLGksd2lkdGgsb2Zmc2V0eCxsaW5lLHNjYWxpbmc9MjAsdGV4dENvbG91cj0id2hpdGUiLGJhY2tncm91bmRDb2xvdXI9InJnYmEoMCwwLDAsMCkiLGNhbnZhcz10aGlzLnRleHR1cmVDYW52YXMsY3R4PWNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLHRleHRIZWlnaHQ9MCx0ZXh0SGVpZ2h0cz1bXSx3aWR0aHM9W10sb2Zmc2V0eT0wLGxpbmVzPVtdLG9mZnNldHN4PVtdLG9mZnNldHN5PVtdLGxpbmVvZmZzZXRzeT1bXSxmb250U3RyaW5ncz1bXSxtYXhUZXhTaXplPXRoaXMuZ2V0TWF4VGV4U2l6ZSgpLGdldEZvbnRTdHJpbmc9ZnVuY3Rpb24oaSl7dGV4dEhlaWdodHNbaV09c2NhbGluZypjZXhbaV07dmFyIGZvbnRTdHJpbmc9dGV4dEhlaWdodHNbaV0rInB4IixmYW1pbHkwPWZhbWlseVtpXSxmb250MD1mb250W2ldO3JldHVybiJzYW5zIj09PWZhbWlseTA/ZmFtaWx5MD0ic2Fucy1zZXJpZiI6Im1vbm8iPT09ZmFtaWx5MCYmKGZhbWlseTA9Im1vbm9zcGFjZSIpLGZvbnRTdHJpbmc9Zm9udFN0cmluZysiICIrZmFtaWx5MCwoMj09PWZvbnQwfHw0PT09Zm9udDApJiYoZm9udFN0cmluZz0iYm9sZCAiK2ZvbnRTdHJpbmcpLCgzPT09Zm9udDB8fDQ9PT1mb250MCkmJihmb250U3RyaW5nPSJpdGFsaWMgIitmb250U3RyaW5nKSxmb250U3RyaW5nfTtmb3IoY2V4PXRoaXMucmVwZWF0VG9MZW4oY2V4LHRleHQubGVuZ3RoKSxmYW1pbHk9dGhpcy5yZXBlYXRUb0xlbihmYW1pbHksdGV4dC5sZW5ndGgpLGZvbnQ9dGhpcy5yZXBlYXRUb0xlbihmb250LHRleHQubGVuZ3RoKSxjYW52YXNYPTEsbGluZT0tMSxvZmZzZXR4PW1heFRleFNpemUsaT0wO2k8dGV4dC5sZW5ndGg7aSsrKWN0eC5mb250PWZvbnRTdHJpbmdzW2ldPWdldEZvbnRTdHJpbmcoaSksd2lkdGg9d2lkdGhzW2ldPWN0eC5tZWFzdXJlVGV4dCh0ZXh0W2ldKS53aWR0aCxvZmZzZXR4K3dpZHRoPm1heFRleFNpemUmJihvZmZzZXR5Kz0yKnRleHRIZWlnaHQsbGluZT49MCYmKGxpbmVvZmZzZXRzeVtsaW5lXT1vZmZzZXR5KSxsaW5lKz0xLG9mZnNldHk+bWF4VGV4U2l6ZSYmY29uc29sZS5lcnJvcigiVG9vIG1hbnkgc3RyaW5ncyBmb3IgdGV4dHVyZS4iKSx0ZXh0SGVpZ2h0PTAsb2Zmc2V0eD0wKSx0ZXh0SGVpZ2h0PU1hdGgubWF4KHRleHRIZWlnaHQsdGV4dEhlaWdodHNbaV0pLG9mZnNldHN4W2ldPW9mZnNldHgsb2Zmc2V0eCs9d2lkdGgsY2FudmFzWD1NYXRoLm1heChjYW52YXNYLG9mZnNldHgpLGxpbmVzW2ldPWxpbmU7Zm9yKG9mZnNldHk9bGluZW9mZnNldHN5W2xpbmVdPW9mZnNldHkrMip0ZXh0SGVpZ2h0LGk9MDtpPHRleHQubGVuZ3RoO2krKylvZmZzZXRzeVtpXT1saW5lb2Zmc2V0c3lbbGluZXNbaV1dO2ZvcihjYW52YXNYPXRoaXMuZ2V0UG93ZXJPZlR3byhjYW52YXNYKSxjYW52YXNZPXRoaXMuZ2V0UG93ZXJPZlR3byhvZmZzZXR5KSxjYW52YXMud2lkdGg9Y2FudmFzWCxjYW52YXMuaGVpZ2h0PWNhbnZhc1ksY3R4LmZpbGxTdHlsZT1iYWNrZ3JvdW5kQ29sb3VyLGN0eC5maWxsUmVjdCgwLDAsY3R4LmNhbnZhcy53aWR0aCxjdHguY2FudmFzLmhlaWdodCksY3R4LnRleHRCYXNlbGluZT0iYWxwaGFiZXRpYyIsaT0wO2k8dGV4dC5sZW5ndGg7aSsrKWN0eC5mb250PWZvbnRTdHJpbmdzW2ldLGN0eC5maWxsU3R5bGU9dGV4dENvbG91cixjdHgudGV4dEFsaWduPSJsZWZ0IixjdHguZmlsbFRleHQodGV4dFtpXSxvZmZzZXRzeFtpXSxvZmZzZXRzeVtpXSk7cmV0dXJue2NhbnZhc1g6Y2FudmFzWCxjYW52YXNZOmNhbnZhc1ksd2lkdGhzOndpZHRocyx0ZXh0SGVpZ2h0czp0ZXh0SGVpZ2h0cyxvZmZzZXRzeDpvZmZzZXRzeCxvZmZzZXRzeTpvZmZzZXRzeX19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5nZXRWaWV3cG9ydD1mdW5jdGlvbihpZCl7dmFyIHZwPXRoaXMuZ2V0T2JqKGlkKS5wYXIzZC52aWV3cG9ydCx4PXZwLngqdGhpcy5jYW52YXMud2lkdGgseT12cC55KnRoaXMuY2FudmFzLmhlaWdodCx3aWR0aD12cC53aWR0aCp0aGlzLmNhbnZhcy53aWR0aCxoZWlnaHQ9dnAuaGVpZ2h0KnRoaXMuY2FudmFzLmhlaWdodDt0aGlzLnZwPXt4OngseTp5LHdpZHRoOndpZHRoLGhlaWdodDpoZWlnaHR9fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuc2V0Vmlld3BvcnQ9ZnVuY3Rpb24oaWQpe3ZhciBnbD10aGlzLmdsfHx0aGlzLmluaXRHTCgpO3RoaXMuZ2V0Vmlld3BvcnQoaWQpLGdsLnZpZXdwb3J0KHRoaXMudnAueCx0aGlzLnZwLnksdGhpcy52cC53aWR0aCx0aGlzLnZwLmhlaWdodCksZ2wuc2Npc3Nvcih0aGlzLnZwLngsdGhpcy52cC55LHRoaXMudnAud2lkdGgsdGhpcy52cC5oZWlnaHQpLGdsLmVuYWJsZShnbC5TQ0lTU09SX1RFU1QpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuc2V0cHJNYXRyaXg9ZnVuY3Rpb24oaWQpe3ZhciBzdWJzY2VuZT10aGlzLmdldE9iaihpZCksZW1iZWRkaW5nPXN1YnNjZW5lLmVtYmVkZGluZ3MucHJvamVjdGlvbjtpZigicmVwbGFjZSI9PT1lbWJlZGRpbmc/dGhpcy5wck1hdHJpeC5tYWtlSWRlbnRpdHkoKTp0aGlzLnNldHByTWF0cml4KHN1YnNjZW5lLnBhcmVudCksImluaGVyaXQiIT09ZW1iZWRkaW5nKXt2YXIgYmJveD1zdWJzY2VuZS5wYXIzZC5iYm94LHNjYWxlPXN1YnNjZW5lLnBhcjNkLnNjYWxlLHJhbmdlcz1bKGJib3hbMV0tYmJveFswXSkqc2NhbGVbMF0vMiwoYmJveFszXS1iYm94WzJdKSpzY2FsZVsxXS8yLChiYm94WzVdLWJib3hbNF0pKnNjYWxlWzJdLzJdLHJhZGl1cz0xLjEqTWF0aC5zcXJ0KHRoaXMuc3Vtc3EocmFuZ2VzKSk7MD49cmFkaXVzJiYocmFkaXVzPTEpO3ZhciBobGVuLG9ic2VydmVyPXN1YnNjZW5lLnBhcjNkLm9ic2VydmVyLGRpc3RhbmNlPW9ic2VydmVyWzJdLEZPVj1zdWJzY2VuZS5wYXIzZC5GT1Ysb3J0aG89MD09PUZPVix0PW9ydGhvPzE6TWF0aC50YW4oRk9WKk1hdGguUEkvMzYwKSxuZWFyPWRpc3RhbmNlLXJhZGl1cyxmYXI9ZGlzdGFuY2UrcmFkaXVzLGFzcGVjdD10aGlzLnZwLndpZHRoL3RoaXMudnAuaGVpZ2h0LHo9c3Vic2NlbmUucGFyM2Quem9vbSx1c2VyUHJvamVjdGlvbj1zdWJzY2VuZS5wYXIzZC51c2VyUHJvamVjdGlvbjswPmZhciYmKGZhcj0xKSxmYXIvMTAwPm5lYXImJihuZWFyPWZhci8xMDApLHRoaXMuZnJ1c3R1bT17bmVhcjpuZWFyLGZhcjpmYXJ9LGhsZW49dCpuZWFyLG9ydGhvP2FzcGVjdD4xP3RoaXMucHJNYXRyaXgub3J0aG8oLWhsZW4qYXNwZWN0KnosaGxlbiphc3BlY3QqeiwtaGxlbip6LGhsZW4qeixuZWFyLGZhcik6dGhpcy5wck1hdHJpeC5vcnRobygtaGxlbip6LGhsZW4qeiwtaGxlbip6L2FzcGVjdCxobGVuKnovYXNwZWN0LG5lYXIsZmFyKTphc3BlY3Q+MT90aGlzLnByTWF0cml4LmZydXN0dW0oLWhsZW4qYXNwZWN0KnosaGxlbiphc3BlY3QqeiwtaGxlbip6LGhsZW4qeixuZWFyLGZhcik6dGhpcy5wck1hdHJpeC5mcnVzdHVtKC1obGVuKnosaGxlbip6LC1obGVuKnovYXNwZWN0LGhsZW4qei9hc3BlY3QsbmVhcixmYXIpLHRoaXMucHJNYXRyaXgubXVsdFJpZ2h0KHVzZXJQcm9qZWN0aW9uKX19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5zZXRtdk1hdHJpeD1mdW5jdGlvbihpZCl7dmFyIG9ic2VydmVyPXRoaXMuZ2V0T2JqKGlkKS5wYXIzZC5vYnNlcnZlcjt0aGlzLm12TWF0cml4Lm1ha2VJZGVudGl0eSgpLHRoaXMuc2V0bW9kZWxNYXRyaXgoaWQpLHRoaXMubXZNYXRyaXgudHJhbnNsYXRlKC1vYnNlcnZlclswXSwtb2JzZXJ2ZXJbMV0sLW9ic2VydmVyWzJdKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLnNldG1vZGVsTWF0cml4PWZ1bmN0aW9uKGlkKXt2YXIgc3Vic2NlbmU9dGhpcy5nZXRPYmooaWQpLGVtYmVkZGluZz1zdWJzY2VuZS5lbWJlZGRpbmdzLm1vZGVsO2lmKCJpbmhlcml0IiE9PWVtYmVkZGluZyl7dmFyIHNjYWxlPXN1YnNjZW5lLnBhcjNkLnNjYWxlLGJib3g9c3Vic2NlbmUucGFyM2QuYmJveCxjZW50ZXI9WyhiYm94WzBdK2Jib3hbMV0pLzIsKGJib3hbMl0rYmJveFszXSkvMiwoYmJveFs0XStiYm94WzVdKS8yXTt0aGlzLm12TWF0cml4LnRyYW5zbGF0ZSgtY2VudGVyWzBdLC1jZW50ZXJbMV0sLWNlbnRlclsyXSksdGhpcy5tdk1hdHJpeC5zY2FsZShzY2FsZVswXSxzY2FsZVsxXSxzY2FsZVsyXSksdGhpcy5tdk1hdHJpeC5tdWx0UmlnaHQoc3Vic2NlbmUucGFyM2QudXNlck1hdHJpeCl9InJlcGxhY2UiIT09ZW1iZWRkaW5nJiZ0aGlzLnNldG1vZGVsTWF0cml4KHN1YnNjZW5lLnBhcmVudCl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5zZXRub3JtTWF0cml4PWZ1bmN0aW9uKHN1YnNjZW5laWQpe3ZhciBzZWxmPXRoaXMscmVjdXJzZT1mdW5jdGlvbihpZCl7dmFyIHN1Yj1zZWxmLmdldE9iaihpZCksZW1iZWRkaW5nPXN1Yi5lbWJlZGRpbmdzLm1vZGVsO2lmKCJpbmhlcml0IiE9PWVtYmVkZGluZyl7dmFyIHNjYWxlPXN1Yi5wYXIzZC5zY2FsZTtzZWxmLm5vcm1NYXRyaXguc2NhbGUoMS9zY2FsZVswXSwxL3NjYWxlWzFdLDEvc2NhbGVbMl0pLHNlbGYubm9ybU1hdHJpeC5tdWx0UmlnaHQoc3ViLnBhcjNkLnVzZXJNYXRyaXgpfSJyZXBsYWNlIiE9PWVtYmVkZGluZyYmcmVjdXJzZShzdWIucGFyZW50KX07c2VsZi5ub3JtTWF0cml4Lm1ha2VJZGVudGl0eSgpLHJlY3Vyc2Uoc3Vic2NlbmVpZCl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5zZXRwcm12TWF0cml4PWZ1bmN0aW9uKCl7dGhpcy5wcm12TWF0cml4PW5ldyBDYW52YXNNYXRyaXg0KHRoaXMubXZNYXRyaXgpLHRoaXMucHJtdk1hdHJpeC5tdWx0UmlnaHQodGhpcy5wck1hdHJpeCl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5nZXRDdXJzb3I9ZnVuY3Rpb24obW9kZSl7c3dpdGNoKG1vZGUpe2Nhc2Uibm9uZSI6cmV0dXJuIm5vbmUiO2Nhc2UidHJhY2tiYWxsIjpjYXNlInhBeGlzIjpjYXNlInlBeGlzIjpjYXNlInpBeGlzIjpjYXNlInBvbGFyIjpyZXR1cm4iZ3JhYiI7Y2FzZSJzZWxlY3RpbmciOnJldHVybiJjcm9zc2hhaXIiO2Nhc2UiZm92IjpjYXNlInpvb20iOnJldHVybiJ6b29tLWluIn1yZXR1cm4iZHJhZ2dpbmcifSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuc2V0TW91c2VNb2RlPWZ1bmN0aW9uKG1vZGUsYnV0dG9uLHN1YnNjZW5lLHN0YXlBY3RpdmUpe3ZhciBzdWI9dGhpcy5nZXRPYmooc3Vic2NlbmUpLHdoaWNoPVsibGVmdCIsInJpZ2h0IiwibWlkZGxlIl1bYnV0dG9uLTFdO3N0YXlBY3RpdmV8fCJzZWxlY3RpbmciIT09c3ViLnBhcjNkLm1vdXNlTW9kZVt3aGljaF18fHRoaXMuY2xlYXJCcnVzaChudWxsKSxzdWIucGFyM2QubW91c2VNb2RlW3doaWNoXT1tb2RlLDE9PT1idXR0b24mJih0aGlzLmNhbnZhcy5zdHlsZS5jdXJzb3I9dGhpcy5nZXRDdXJzb3IobW9kZSkpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUucmVsTW91c2VDb29yZHM9ZnVuY3Rpb24oZXZlbnQpe3ZhciByZWN0PXRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybnt4OmV2ZW50LmNsaWVudFgtcmVjdC5sZWZ0LHk6ZXZlbnQuY2xpZW50WS1yZWN0LnRvcH19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5yZWNvcmRTZWxlY3Rpb249ZnVuY3Rpb24oc3ViaWQpe3ZhciByZXN1bHQ9e307InVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzLnNlbGVjdCYmInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzLnNlbGVjdC5zdGF0ZSYmImluYWN0aXZlIiE9PXRoaXMuc2VsZWN0LnN0YXRlPyhyZXN1bHQ9e3N1YnNjZW5lOnN1YmlkLHN0YXRlOnRoaXMuc2VsZWN0LnN0YXRlLHJlZ2lvbjp0aGlzLnNlbGVjdC5yZWdpb259LHRoaXMuc2V0bXZNYXRyaXgoc3ViaWQpLHJlc3VsdC5tb2RlbD10aGlzLm12TWF0cml4LHRoaXMuc2V0cHJNYXRyaXgoc3ViaWQpLHJlc3VsdC5wcm9qPXRoaXMucHJNYXRyaXgsdGhpcy5nZXRWaWV3cG9ydChzdWJpZCkscmVzdWx0LnZpZXc9dGhpcy52cCk6cmVzdWx0LnN0YXRlPSJpbmFjdGl2ZSIsU2hpbnkuc2V0SW5wdXRWYWx1ZSh0aGlzLnNjZW5lLnNlbGVjdGlvbklucHV0KyI6c2hpbnlNb3VzZTNkIixyZXN1bHQpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuc2V0TW91c2VIYW5kbGVycz1mdW5jdGlvbigpe3ZhciBhY3RpdmVTdWJzY2VuZSxoYW5kbGVyLHNlbGY9dGhpcyxoYW5kbGVycz17fSxkcmFnPTA7aGFuZGxlcnMucm90QmFzZT0wLHRoaXMuc2NyZWVuVG9WZWN0b3I9ZnVuY3Rpb24oeCx5KXt2YXIgdmlld3BvcnQ9dGhpcy5nZXRPYmooYWN0aXZlU3Vic2NlbmUpLnBhcjNkLnZpZXdwb3J0LHdpZHRoPXZpZXdwb3J0LndpZHRoKnRoaXMuY2FudmFzLndpZHRoLGhlaWdodD12aWV3cG9ydC5oZWlnaHQqdGhpcy5jYW52YXMuaGVpZ2h0LHJhZGl1cz1NYXRoLm1heCh3aWR0aCxoZWlnaHQpLzIsY3g9d2lkdGgvMixjeT1oZWlnaHQvMixweD0oeC1jeCkvcmFkaXVzLHB5PSh5LWN5KS9yYWRpdXMscGxlbj1NYXRoLnNxcnQocHgqcHgrcHkqcHkpO3BsZW4+MWUtNiYmKHB4Lz1wbGVuLHB5Lz1wbGVuKTt2YXIgYW5nbGU9KE1hdGguU1FSVDItcGxlbikvTWF0aC5TUVJUMipNYXRoLlBJLzIsej1NYXRoLnNpbihhbmdsZSksemxlbj1NYXRoLnNxcnQoMS16KnopO3JldHVybiBweCo9emxlbixweSo9emxlbixbcHgscHksel19LGhhbmRsZXJzLnRyYWNrYmFsbGRvd249ZnVuY3Rpb24oeCx5KXt2YXIgaSxhY3RpdmVTdWI9dGhpcy5nZXRPYmooYWN0aXZlU3Vic2NlbmUpLGFjdGl2ZU1vZGVsPXRoaXMuZ2V0T2JqKHRoaXMudXNlaWQoYWN0aXZlU3ViLmlkLCJtb2RlbCIpKSxsPWFjdGl2ZU1vZGVsLnBhcjNkLmxpc3RlbmVycztmb3IoaGFuZGxlcnMucm90QmFzZT10aGlzLnNjcmVlblRvVmVjdG9yKHgseSksdGhpcy5zYXZlTWF0PVtdLGk9MDtpPGwubGVuZ3RoO2krKylhY3RpdmVTdWI9dGhpcy5nZXRPYmoobFtpXSksYWN0aXZlU3ViLnNhdmVNYXQ9bmV3IENhbnZhc01hdHJpeDQoYWN0aXZlU3ViLnBhcjNkLnVzZXJNYXRyaXgpO3RoaXMuY2FudmFzLnN0eWxlLmN1cnNvcj0iZ3JhYmJpbmcifSxoYW5kbGVycy50cmFja2JhbGxtb3ZlPWZ1bmN0aW9uKHgseSl7dmFyIGkscm90Q3VycmVudD10aGlzLnNjcmVlblRvVmVjdG9yKHgseSkscm90QmFzZT1oYW5kbGVycy5yb3RCYXNlLGRvdD1yb3RCYXNlWzBdKnJvdEN1cnJlbnRbMF0rcm90QmFzZVsxXSpyb3RDdXJyZW50WzFdK3JvdEJhc2VbMl0qcm90Q3VycmVudFsyXSxhbmdsZT0xODAqTWF0aC5hY29zKGRvdC90aGlzLnZsZW4ocm90QmFzZSkvdGhpcy52bGVuKHJvdEN1cnJlbnQpKS9NYXRoLlBJLGF4aXM9dGhpcy54cHJvZChyb3RCYXNlLHJvdEN1cnJlbnQpLG9iamVjdHM9dGhpcy5zY2VuZS5vYmplY3RzLGFjdGl2ZVN1Yj10aGlzLmdldE9iaihhY3RpdmVTdWJzY2VuZSksYWN0aXZlTW9kZWw9dGhpcy5nZXRPYmoodGhpcy51c2VpZChhY3RpdmVTdWIuaWQsIm1vZGVsIikpLGw9YWN0aXZlTW9kZWwucGFyM2QubGlzdGVuZXJzO2ZvcihpPTA7aTxsLmxlbmd0aDtpKyspYWN0aXZlU3ViPXRoaXMuZ2V0T2JqKGxbaV0pLGFjdGl2ZVN1Yi5wYXIzZC51c2VyTWF0cml4LmxvYWQob2JqZWN0c1tsW2ldXS5zYXZlTWF0KSxhY3RpdmVTdWIucGFyM2QudXNlck1hdHJpeC5yb3RhdGUoYW5nbGUsYXhpc1swXSxheGlzWzFdLGF4aXNbMl0pO3RoaXMuZHJhd1NjZW5lKCl9LGhhbmRsZXJzLnRyYWNrYmFsbGVuZD0wLHRoaXMuY2xhbXA9ZnVuY3Rpb24oeCxsbyxoaSl7cmV0dXJuIE1hdGgubWF4KGxvLE1hdGgubWluKHgsaGkpKX0sdGhpcy5zY3JlZW5Ub1BvbGFyPWZ1bmN0aW9uKHgseSl7dmFyIHZpZXdwb3J0PXRoaXMuZ2V0T2JqKGFjdGl2ZVN1YnNjZW5lKS5wYXIzZC52aWV3cG9ydCx3aWR0aD12aWV3cG9ydC53aWR0aCp0aGlzLmNhbnZhcy53aWR0aCxoZWlnaHQ9dmlld3BvcnQuaGVpZ2h0KnRoaXMuY2FudmFzLmhlaWdodCxyPU1hdGgubWluKHdpZHRoLGhlaWdodCkvMixkeD10aGlzLmNsYW1wKHgtd2lkdGgvMiwtcixyKSxkeT10aGlzLmNsYW1wKHktaGVpZ2h0LzIsLXIscik7cmV0dXJuW01hdGguYXNpbihkeC9yKSxNYXRoLmFzaW4oLWR5L3IpXX0saGFuZGxlcnMucG9sYXJkb3duPWZ1bmN0aW9uKHgseSl7dmFyIGksYWN0aXZlU3ViPXRoaXMuZ2V0T2JqKGFjdGl2ZVN1YnNjZW5lKSxhY3RpdmVNb2RlbD10aGlzLmdldE9iaih0aGlzLnVzZWlkKGFjdGl2ZVN1Yi5pZCwibW9kZWwiKSksbD1hY3RpdmVNb2RlbC5wYXIzZC5saXN0ZW5lcnM7Zm9yKGhhbmRsZXJzLmRyYWdCYXNlPXRoaXMuc2NyZWVuVG9Qb2xhcih4LHkpLHRoaXMuc2F2ZU1hdD1bXSxpPTA7aTxsLmxlbmd0aDtpKyspYWN0aXZlU3ViPXRoaXMuZ2V0T2JqKGxbaV0pLGFjdGl2ZVN1Yi5zYXZlTWF0PW5ldyBDYW52YXNNYXRyaXg0KGFjdGl2ZVN1Yi5wYXIzZC51c2VyTWF0cml4KSxhY3RpdmVTdWIuY2FtQmFzZT1bLU1hdGguYXRhbjIoYWN0aXZlU3ViLnNhdmVNYXQubTEzLGFjdGl2ZVN1Yi5zYXZlTWF0Lm0xMSksTWF0aC5hdGFuMihhY3RpdmVTdWIuc2F2ZU1hdC5tMzIsYWN0aXZlU3ViLnNhdmVNYXQubTIyKV07dGhpcy5jYW52YXMuc3R5bGUuY3Vyc29yPSJncmFiYmluZyJ9LGhhbmRsZXJzLnBvbGFybW92ZT1mdW5jdGlvbih4LHkpe3ZhciBpLGosZHJhZ0N1cnJlbnQ9dGhpcy5zY3JlZW5Ub1BvbGFyKHgseSksYWN0aXZlU3ViPXRoaXMuZ2V0T2JqKGFjdGl2ZVN1YnNjZW5lKSxhY3RpdmVNb2RlbD10aGlzLmdldE9iaih0aGlzLnVzZWlkKGFjdGl2ZVN1Yi5pZCwibW9kZWwiKSksb2JqZWN0cz10aGlzLnNjZW5lLm9iamVjdHMsbD1hY3RpdmVNb2RlbC5wYXIzZC5saXN0ZW5lcnMsY2hhbmdlcG9zPVtdO2ZvcihpPTA7aTxsLmxlbmd0aDtpKyspe2ZvcihhY3RpdmVTdWI9dGhpcy5nZXRPYmoobFtpXSksaj0wOzI+ajtqKyspY2hhbmdlcG9zW2pdPS0oZHJhZ0N1cnJlbnRbal0taGFuZGxlcnMuZHJhZ0Jhc2Vbal0pO2FjdGl2ZVN1Yi5wYXIzZC51c2VyTWF0cml4Lm1ha2VJZGVudGl0eSgpLGFjdGl2ZVN1Yi5wYXIzZC51c2VyTWF0cml4LnJvdGF0ZSgxODAqY2hhbmdlcG9zWzBdL01hdGguUEksMCwtMSwwKSxhY3RpdmVTdWIucGFyM2QudXNlck1hdHJpeC5tdWx0UmlnaHQob2JqZWN0c1tsW2ldXS5zYXZlTWF0KSxhY3RpdmVTdWIucGFyM2QudXNlck1hdHJpeC5yb3RhdGUoMTgwKmNoYW5nZXBvc1sxXS9NYXRoLlBJLC0xLDAsMCl9dGhpcy5kcmF3U2NlbmUoKX0saGFuZGxlcnMucG9sYXJlbmQ9MCxoYW5kbGVycy5heGlzZG93bj1mdW5jdGlvbih4KXtoYW5kbGVycy5yb3RCYXNlPXRoaXMuc2NyZWVuVG9WZWN0b3IoeCx0aGlzLmNhbnZhcy5oZWlnaHQvMik7dmFyIGksYWN0aXZlU3ViPXRoaXMuZ2V0T2JqKGFjdGl2ZVN1YnNjZW5lKSxhY3RpdmVNb2RlbD10aGlzLmdldE9iaih0aGlzLnVzZWlkKGFjdGl2ZVN1Yi5pZCwibW9kZWwiKSksbD1hY3RpdmVNb2RlbC5wYXIzZC5saXN0ZW5lcnM7Zm9yKGk9MDtpPGwubGVuZ3RoO2krKylhY3RpdmVTdWI9dGhpcy5nZXRPYmoobFtpXSksYWN0aXZlU3ViLnNhdmVNYXQ9bmV3IENhbnZhc01hdHJpeDQoYWN0aXZlU3ViLnBhcjNkLnVzZXJNYXRyaXgpO3RoaXMuY2FudmFzLnN0eWxlLmN1cnNvcj0iZ3JhYmJpbmcifSxoYW5kbGVycy5heGlzbW92ZT1mdW5jdGlvbih4KXt2YXIgcm90Q3VycmVudD10aGlzLnNjcmVlblRvVmVjdG9yKHgsdGhpcy5jYW52YXMuaGVpZ2h0LzIpLHJvdEJhc2U9aGFuZGxlcnMucm90QmFzZSxhbmdsZT0xODAqKHJvdEN1cnJlbnRbMF0tcm90QmFzZVswXSkvTWF0aC5QSSxyb3RNYXQ9bmV3IENhbnZhc01hdHJpeDQ7cm90TWF0LnJvdGF0ZShhbmdsZSxoYW5kbGVycy5heGlzWzBdLGhhbmRsZXJzLmF4aXNbMV0saGFuZGxlcnMuYXhpc1syXSk7dmFyIGksYWN0aXZlU3ViPXRoaXMuZ2V0T2JqKGFjdGl2ZVN1YnNjZW5lKSxhY3RpdmVNb2RlbD10aGlzLmdldE9iaih0aGlzLnVzZWlkKGFjdGl2ZVN1Yi5pZCwibW9kZWwiKSksbD1hY3RpdmVNb2RlbC5wYXIzZC5saXN0ZW5lcnM7Zm9yKGk9MDtpPGwubGVuZ3RoO2krKylhY3RpdmVTdWI9dGhpcy5nZXRPYmoobFtpXSksYWN0aXZlU3ViLnBhcjNkLnVzZXJNYXRyaXgubG9hZChhY3RpdmVTdWIuc2F2ZU1hdCksYWN0aXZlU3ViLnBhcjNkLnVzZXJNYXRyaXgubXVsdExlZnQocm90TWF0KTt0aGlzLmRyYXdTY2VuZSgpfSxoYW5kbGVycy5heGlzZW5kPTAsaGFuZGxlcnMueTB6b29tPTAsaGFuZGxlcnMuem9vbWRvd249ZnVuY3Rpb24oeCx5KXt2YXIgaSxhY3RpdmVTdWI9c2VsZi5nZXRPYmooYWN0aXZlU3Vic2NlbmUpLGFjdGl2ZVByb2plY3Rpb249c2VsZi5nZXRPYmooc2VsZi51c2VpZChhY3RpdmVTdWIuaWQsInByb2plY3Rpb24iKSksbD1hY3RpdmVQcm9qZWN0aW9uLnBhcjNkLmxpc3RlbmVycztmb3IoaGFuZGxlcnMueTB6b29tPXksaT0wO2k8bC5sZW5ndGg7aSsrKWFjdGl2ZVN1Yj1zZWxmLmdldE9iaihsW2ldKSxhY3RpdmVTdWIuem9vbTA9TWF0aC5sb2coYWN0aXZlU3ViLnBhcjNkLnpvb20pO3NlbGYuY2FudmFzLnN0eWxlLmN1cnNvcj0iem9vbS1pbiJ9LGhhbmRsZXJzLnpvb21tb3ZlPWZ1bmN0aW9uKHgseSl7dmFyIGksYWN0aXZlU3ViPXNlbGYuZ2V0T2JqKGFjdGl2ZVN1YnNjZW5lKSxhY3RpdmVQcm9qZWN0aW9uPXNlbGYuZ2V0T2JqKHNlbGYudXNlaWQoYWN0aXZlU3ViLmlkLCJwcm9qZWN0aW9uIikpLGw9YWN0aXZlUHJvamVjdGlvbi5wYXIzZC5saXN0ZW5lcnM7Zm9yKGk9MDtpPGwubGVuZ3RoO2krKylhY3RpdmVTdWI9c2VsZi5nZXRPYmoobFtpXSksYWN0aXZlU3ViLnBhcjNkLnpvb209TWF0aC5leHAoYWN0aXZlU3ViLnpvb20wKyh5LWhhbmRsZXJzLnkwem9vbSkvc2VsZi5jYW52YXMuaGVpZ2h0KTtzZWxmLmRyYXdTY2VuZSgpfSxoYW5kbGVycy56b29tZW5kPTAsaGFuZGxlcnMueTBmb3Y9MCxoYW5kbGVycy5mb3Zkb3duPWZ1bmN0aW9uKHgseSl7aGFuZGxlcnMueTBmb3Y9eTt2YXIgaSxhY3RpdmVTdWI9dGhpcy5nZXRPYmooYWN0aXZlU3Vic2NlbmUpLGFjdGl2ZVByb2plY3Rpb249dGhpcy5nZXRPYmoodGhpcy51c2VpZChhY3RpdmVTdWIuaWQsInByb2plY3Rpb24iKSksbD1hY3RpdmVQcm9qZWN0aW9uLnBhcjNkLmxpc3RlbmVycztmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKWFjdGl2ZVN1Yj10aGlzLmdldE9iaihsW2ldKSxhY3RpdmVTdWIuZm92MD1hY3RpdmVTdWIucGFyM2QuRk9WOwp0aGlzLmNhbnZhcy5zdHlsZS5jdXJzb3I9Inpvb20taW4ifSxoYW5kbGVycy5mb3Ztb3ZlPWZ1bmN0aW9uKHgseSl7dmFyIGksYWN0aXZlU3ViPXRoaXMuZ2V0T2JqKGFjdGl2ZVN1YnNjZW5lKSxhY3RpdmVQcm9qZWN0aW9uPXRoaXMuZ2V0T2JqKHRoaXMudXNlaWQoYWN0aXZlU3ViLmlkLCJwcm9qZWN0aW9uIikpLGw9YWN0aXZlUHJvamVjdGlvbi5wYXIzZC5saXN0ZW5lcnM7Zm9yKGk9MDtpPGwubGVuZ3RoO2krKylhY3RpdmVTdWI9dGhpcy5nZXRPYmoobFtpXSksYWN0aXZlU3ViLnBhcjNkLkZPVj1NYXRoLm1heCgxLE1hdGgubWluKDE3OSxhY3RpdmVTdWIuZm92MCsxODAqKHktaGFuZGxlcnMueTBmb3YpL3RoaXMuY2FudmFzLmhlaWdodCkpO3RoaXMuZHJhd1NjZW5lKCl9LGhhbmRsZXJzLmZvdmVuZD0wLGhhbmRsZXJzLnNlbGVjdGluZ2Rvd249ZnVuY3Rpb24oeCx5KXt2YXIgdmlld3BvcnQ9dGhpcy5nZXRPYmooYWN0aXZlU3Vic2NlbmUpLnBhcjNkLnZpZXdwb3J0LHdpZHRoPXZpZXdwb3J0LndpZHRoKnRoaXMuY2FudmFzLndpZHRoLGhlaWdodD12aWV3cG9ydC5oZWlnaHQqdGhpcy5jYW52YXMuaGVpZ2h0LHA9e3g6Mip4L3dpZHRoLTEseToyKnkvaGVpZ2h0LTF9O3RoaXMuc2VsZWN0LnJlZ2lvbj17cDE6cCxwMjpwfSx0aGlzLnNlbGVjdC5zdWJzY2VuZSYmdGhpcy5zZWxlY3Quc3Vic2NlbmUhPT1hY3RpdmVTdWJzY2VuZSYmdGhpcy5kZWxGcm9tU3Vic2NlbmUodGhpcy5zY2VuZS5icnVzaElkLHRoaXMuc2VsZWN0LnN1YnNjZW5lKSx0aGlzLnNlbGVjdC5zdWJzY2VuZT1hY3RpdmVTdWJzY2VuZSx0aGlzLmFkZFRvU3Vic2NlbmUodGhpcy5zY2VuZS5icnVzaElkLGFjdGl2ZVN1YnNjZW5lKSx0aGlzLnNlbGVjdC5zdGF0ZT0iY2hhbmdpbmciLCJ1bmRlZmluZWQiIT10eXBlb2YgdGhpcy5zY2VuZS5icnVzaElkJiYodGhpcy5nZXRPYmoodGhpcy5zY2VuZS5icnVzaElkKS5pbml0aWFsaXplZD0hMSksInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzLnNjZW5lLnNlbGVjdGlvbklucHV0JiZzZWxmLnJlY29yZFNlbGVjdGlvbihhY3RpdmVTdWJzY2VuZSksdGhpcy5kcmF3U2NlbmUoKSx0aGlzLmNhbnZhcy5zdHlsZS5jdXJzb3I9ImNyb3NzaGFpciJ9LGhhbmRsZXJzLnNlbGVjdGluZ21vdmU9ZnVuY3Rpb24oeCx5KXt2YXIgdmlld3BvcnQ9dGhpcy5nZXRPYmooYWN0aXZlU3Vic2NlbmUpLnBhcjNkLnZpZXdwb3J0LHdpZHRoPXZpZXdwb3J0LndpZHRoKnRoaXMuY2FudmFzLndpZHRoLGhlaWdodD12aWV3cG9ydC5oZWlnaHQqdGhpcy5jYW52YXMuaGVpZ2h0OyJpbmFjdGl2ZSIhPT10aGlzLnNlbGVjdC5zdGF0ZSYmKHRoaXMuc2VsZWN0LnJlZ2lvbi5wMj17eDoyKngvd2lkdGgtMSx5OjIqeS9oZWlnaHQtMX0sInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzLnNjZW5lLmJydXNoSWQmJih0aGlzLmdldE9iaih0aGlzLnNjZW5lLmJydXNoSWQpLmluaXRpYWxpemVkPSExKSwidW5kZWZpbmVkIiE9dHlwZW9mIHRoaXMuc2NlbmUuc2VsZWN0aW9uSW5wdXQmJnRoaXMucmVjb3JkU2VsZWN0aW9uKGFjdGl2ZVN1YnNjZW5lKSx0aGlzLmRyYXdTY2VuZSgpKX0saGFuZGxlcnMuc2VsZWN0aW5nZW5kPTAsdGhpcy5jYW52YXMub25tb3VzZWRvd249ZnVuY3Rpb24oZXYpe2lmKCFldi53aGljaClzd2l0Y2goZXYuYnV0dG9uKXtjYXNlIDA6ZXYud2hpY2g9MTticmVhaztjYXNlIDE6Y2FzZSA0OmV2LndoaWNoPTI7YnJlYWs7Y2FzZSAyOmV2LndoaWNoPTN9ZHJhZz1bImxlZnQiLCJtaWRkbGUiLCJyaWdodCJdW2V2LndoaWNoLTFdO3ZhciBjb29yZHM9c2VsZi5yZWxNb3VzZUNvb3Jkcyhldik7Y29vcmRzLnk9c2VsZi5jYW52YXMuaGVpZ2h0LWNvb3Jkcy55LGFjdGl2ZVN1YnNjZW5lPXNlbGYud2hpY2hTdWJzY2VuZShjb29yZHMpO3ZhciBmLHN1Yj1zZWxmLmdldE9iaihhY3RpdmVTdWJzY2VuZSk7c3dpdGNoKGhhbmRsZXI9c3ViLnBhcjNkLm1vdXNlTW9kZVtkcmFnXSl7Y2FzZSJ4QXhpcyI6aGFuZGxlcj0iYXhpcyIsaGFuZGxlcnMuYXhpcz1bMSwwLDBdO2JyZWFrO2Nhc2UieUF4aXMiOmhhbmRsZXI9ImF4aXMiLGhhbmRsZXJzLmF4aXM9WzAsMSwwXTticmVhaztjYXNlInpBeGlzIjpoYW5kbGVyPSJheGlzIixoYW5kbGVycy5heGlzPVswLDAsMV19Zj1oYW5kbGVyc1toYW5kbGVyKyJkb3duIl0sZj8oY29vcmRzPXNlbGYudHJhbnNsYXRlQ29vcmRzKGFjdGl2ZVN1YnNjZW5lLGNvb3JkcyksZi5jYWxsKHNlbGYsY29vcmRzLngsY29vcmRzLnkpLGV2LnByZXZlbnREZWZhdWx0KCkpOmNvbnNvbGUud2FybigiTW91c2UgaGFuZGxlciAnIitoYW5kbGVyKyInIGlzIG5vdCBpbXBsZW1lbnRlZC4iKX0sdGhpcy5jYW52YXMub25tb3VzZXVwPWZ1bmN0aW9uKGV2KXtpZigwIT09ZHJhZyl7dmFyIGY9aGFuZGxlcnNbaGFuZGxlcisiZW5kIl07ZiYmKGYuY2FsbChzZWxmKSxldi5wcmV2ZW50RGVmYXVsdCgpKSxkcmFnPTAsdGhpcy5vbm1vdXNlbW92ZShldil9fSx0aGlzLmNhbnZhcy5vbm1vdXNlb3V0PXRoaXMuY2FudmFzLm9ubW91c2V1cCx0aGlzLmNhbnZhcy5vbm1vdXNlbW92ZT1mdW5jdGlvbihldil7dmFyIHN1YixmLGNvb3Jkcz1zZWxmLnJlbE1vdXNlQ29vcmRzKGV2KTtjb29yZHMueT1zZWxmLmNhbnZhcy5oZWlnaHQtY29vcmRzLnksMD09PWRyYWc/KGFjdGl2ZVN1YnNjZW5lPXNlbGYud2hpY2hTdWJzY2VuZShjb29yZHMpLHN1Yj1zZWxmLmdldE9iaihhY3RpdmVTdWJzY2VuZSksdGhpcy5zdHlsZS5jdXJzb3I9c2VsZi5nZXRDdXJzb3Ioc3ViLnBhcjNkLm1vdXNlTW9kZS5sZWZ0KSk6KGY9aGFuZGxlcnNbaGFuZGxlcisibW92ZSJdLGYmJihjb29yZHM9c2VsZi50cmFuc2xhdGVDb29yZHMoYWN0aXZlU3Vic2NlbmUsY29vcmRzKSxmLmNhbGwoc2VsZixjb29yZHMueCxjb29yZHMueSkpKX0saGFuZGxlcnMuc2V0Wm9vbT1mdW5jdGlvbihkcyl7dmFyIGk7InVuZGVmaW5lZCI9PXR5cGVvZiBhY3RpdmVTdWJzY2VuZSYmKGFjdGl2ZVN1YnNjZW5lPXNlbGYuc2NlbmUucm9vdFN1YnNjZW5lKTt2YXIgYWN0aXZlU3ViPXNlbGYuZ2V0T2JqKGFjdGl2ZVN1YnNjZW5lKSxhY3RpdmVQcm9qZWN0aW9uPXNlbGYuZ2V0T2JqKHNlbGYudXNlaWQoYWN0aXZlU3ViLmlkLCJwcm9qZWN0aW9uIikpLGw9YWN0aXZlUHJvamVjdGlvbi5wYXIzZC5saXN0ZW5lcnM7Zm9yKGk9MDtpPGwubGVuZ3RoO2krKylhY3RpdmVTdWI9c2VsZi5nZXRPYmoobFtpXSksYWN0aXZlU3ViLnBhcjNkLnpvb20qPWRzO3NlbGYuZHJhd1NjZW5lKCl9LGhhbmRsZXJzLndoZWVsSGFuZGxlcj1mdW5jdGlvbihldil7dmFyIGRlbD0xLjAyO2V2LnNoaWZ0S2V5JiYoZGVsPTEuMDAyKTt2YXIgZHM9KGV2LmRldGFpbHx8ZXYud2hlZWxEZWx0YSk+MD9kZWw6MS9kZWw7aGFuZGxlcnMuc2V0Wm9vbShkcyksZXYucHJldmVudERlZmF1bHQoKX0saGFuZGxlcnMuZ2V0X2Zpbmdlcl9kaXN0PWZ1bmN0aW9uKGV2KXt2YXIgZGlmZlg9ZXYudG91Y2hlc1swXS5jbGllbnRYLWV2LnRvdWNoZXNbMV0uY2xpZW50WCxkaWZmWT1ldi50b3VjaGVzWzBdLmNsaWVudFktZXYudG91Y2hlc1sxXS5jbGllbnRZO3JldHVybiBNYXRoLnNxcnQoZGlmZlgqZGlmZlgrZGlmZlkqZGlmZlkpfSxoYW5kbGVycy50b3VjaHN0YXJ0PWZ1bmN0aW9uKGV2KXt2YXIgdG91Y2g9ZXYudG91Y2hlc1swXSxtb3VzZUV2ZW50PW5ldyBNb3VzZUV2ZW50KCJtb3VzZWRvd24iLHtjbGllbnRYOnRvdWNoLmNsaWVudFgsY2xpZW50WTp0b3VjaC5jbGllbnRZfSk7aWYoZXYucHJldmVudERlZmF1bHQoKSwyPT09ZXYudG91Y2hlcy5sZW5ndGgpe3ZhciBjb29yZHM9c2VsZi5yZWxNb3VzZUNvb3Jkcyh0b3VjaCk7Y29vcmRzLnk9c2VsZi5jYW52YXMuaGVpZ2h0LWNvb3Jkcy55LGFjdGl2ZVN1YnNjZW5lPXNlbGYud2hpY2hTdWJzY2VuZShjb29yZHMpLGhhbmRsZXJzLmZpbmdlcl9kaXN0MD1oYW5kbGVycy5nZXRfZmluZ2VyX2Rpc3QoZXYpLGhhbmRsZXJzLnpvb21kb3duKGNvb3Jkcy54LGNvb3Jkcy55KX10aGlzLmRpc3BhdGNoRXZlbnQobW91c2VFdmVudCl9LGhhbmRsZXJzLnRvdWNoZW5kPWZ1bmN0aW9uKGV2KXt2YXIgbW91c2VFdmVudDtldi5wcmV2ZW50RGVmYXVsdCgpLDE9PT1ldi50b3VjaGVzLmxlbmd0aCYmKG1vdXNlRXZlbnQ9bmV3IE1vdXNlRXZlbnQoIm1vdXNldXAiLHt9KSx0aGlzLmRpc3BhdGNoRXZlbnQobW91c2VFdmVudCkpfSxoYW5kbGVycy50b3VjaG1vdmU9ZnVuY3Rpb24oZXYpe3ZhciBtb3VzZUV2ZW50LHRvdWNoPWV2LnRvdWNoZXNbMF07aWYoZXYucHJldmVudERlZmF1bHQoKSxldi50b3VjaGVzLmxlbmd0aD4xKXt2YXIgY29vcmRzPXNlbGYucmVsTW91c2VDb29yZHModG91Y2gpLG5ld19kaXN0PWhhbmRsZXJzLmdldF9maW5nZXJfZGlzdChldik7Y29vcmRzLnk9c2VsZi5jYW52YXMuaGVpZ2h0Kk1hdGgubG9nKGhhbmRsZXJzLmZpbmdlcl9kaXN0MC9uZXdfZGlzdCkraGFuZGxlcnMueTB6b29tLGhhbmRsZXJzLnpvb21tb3ZlKGNvb3Jkcy54LGNvb3Jkcy55KX1lbHNlIG1vdXNlRXZlbnQ9bmV3IE1vdXNlRXZlbnQoIm1vdXNlbW92ZSIse2NsaWVudFg6dG91Y2guY2xpZW50WCxjbGllbnRZOnRvdWNoLmNsaWVudFl9KSx0aGlzLmRpc3BhdGNoRXZlbnQobW91c2VFdmVudCl9LHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU1vdXNlU2Nyb2xsIixoYW5kbGVycy53aGVlbEhhbmRsZXIsITEpLHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNld2hlZWwiLGhhbmRsZXJzLndoZWVsSGFuZGxlciwhMSksdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsaGFuZGxlcnMudG91Y2hzdGFydCx7cGFzc2l2ZTohMX0pLHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIixoYW5kbGVycy50b3VjaGVuZCx7cGFzc2l2ZTohMX0pLHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsaGFuZGxlcnMudG91Y2htb3ZlLHtwYXNzaXZlOiExfSl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5pbml0R0wwPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ/dm9pZCAwOnZvaWQgdGhpcy5hbGVydE9uY2UoIllvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYkdMLiBTZWUgaHR0cDovL2dldC53ZWJnbC5vcmciKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmluaXRHTD1mdW5jdGlvbigpe3ZhciBzZWxmPXRoaXMsc3VjY2Vzcz0hMTtpZih0aGlzLmdsKXtpZih0aGlzLmRyYXdpbmd8fCF0aGlzLmdsLmlzQ29udGV4dExvc3QoKSlyZXR1cm4gdGhpcy5nbDt0aGlzLnJlc3RhcnRDYW52YXMoKX10aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJ3ZWJnbGNvbnRleHRyZXN0b3JlZCIsdGhpcy5vbkNvbnRleHRSZXN0b3JlZCwhMSksdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigid2ViZ2xjb250ZXh0bG9zdCIsdGhpcy5vbkNvbnRleHRMb3N0LCExKSx0aGlzLmdsPXRoaXMuY2FudmFzLmdldENvbnRleHQoIndlYmdsIix0aGlzLndlYkdMb3B0aW9ucyl8fHRoaXMuY2FudmFzLmdldENvbnRleHQoImV4cGVyaW1lbnRhbC13ZWJnbCIsdGhpcy53ZWJHTG9wdGlvbnMpLHN1Y2Nlc3M9ISEodGhpcy5nbCYmdGhpcy5nbCBpbnN0YW5jZW9mIFdlYkdMUmVuZGVyaW5nQ29udGV4dCksc3VjY2Vzc3x8dGhpcy5hbGVydE9uY2UoIllvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYkdMLiBTZWUgaHR0cDovL2dldC53ZWJnbC5vcmciKSx0aGlzLmluZGV4X3VpbnQ9dGhpcy5nbC5nZXRFeHRlbnNpb24oIk9FU19lbGVtZW50X2luZGV4X3VpbnQiKTt2YXIgc2F2ZT10aGlzLnN0YXJ0RHJhd2luZygpO3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnNjZW5lLm9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24oa2V5KXtzZWxmLmluaXRPYmoocGFyc2VJbnQoa2V5LDEwKSl9KSx0aGlzLnN0b3BEcmF3aW5nKHNhdmUpLHRoaXMuZ2x9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZWwpe3RoaXMuY2FudmFzLndpZHRoPWVsLndpZHRoLHRoaXMuY2FudmFzLmhlaWdodD1lbC5oZWlnaHR9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5pbml0U3BoZXJlPWZ1bmN0aW9uKHNlY3Rpb25zLHNlZ21lbnRzKXt2YXIgaSxqLGssaW5kLG1vZDEscG9sZSx2PVtdLHBoaT1bXSx0aGV0YT1bXSxpdD1bXSxjZW50ZXJzPVtdLHJlc3VsdD17fTtmb3IoaT0wO3NlY3Rpb25zLTE+aTtpKyspcGhpLnB1c2goKGkrMSkvc2VjdGlvbnMtLjUpO2ZvcihqPTA7c2VnbWVudHM+ajtqKyspZm9yKHRoZXRhLnB1c2goMipqL3NlZ21lbnRzKSxpPTA7c2VjdGlvbnMtMT5pO2krKyl2LnB1c2goW01hdGguc2luKE1hdGguUEkqdGhldGFbal0pKk1hdGguY29zKE1hdGguUEkqcGhpW2ldKSxNYXRoLnNpbihNYXRoLlBJKnBoaVtpXSksTWF0aC5jb3MoTWF0aC5QSSp0aGV0YVtqXSkqTWF0aC5jb3MoTWF0aC5QSSpwaGlbaV0pLHRoZXRhW2pdLzIscGhpW2ldKy41XSk7Zm9yKHBvbGU9di5sZW5ndGgsdi5wdXNoKFswLC0xLDAsMCwwXSksdi5wdXNoKFswLDEsMCwwLDFdKSxyZXN1bHQudmFsdWVzPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5mbGF0dGVuKHYpKSxyZXN1bHQudmVydGV4Q291bnQ9di5sZW5ndGgsbW9kMT1zZWdtZW50cyooc2VjdGlvbnMtMSksaj0wO3NlZ21lbnRzPmo7aisrKXtmb3IoaT0wO3NlY3Rpb25zLTI+aTtpKyspaW5kPWkrKHNlY3Rpb25zLTEpKmosaXQucHVzaChbaW5kJW1vZDEsKGluZCtzZWN0aW9ucy0xKSVtb2QxLChpbmQrc2VjdGlvbnMpJW1vZDFdKSxpdC5wdXNoKFtpbmQlbW9kMSwoaW5kK3NlY3Rpb25zKSVtb2QxLChpbmQrMSklbW9kMV0pO2l0LnB1c2goW3BvbGUsKGorMSkqKHNlY3Rpb25zLTEpJW1vZDEsKChqKzEpKihzZWN0aW9ucy0xKS1zZWN0aW9ucysxKSVtb2QxXSksaXQucHVzaChbcG9sZSsxLCgoaisxKSooc2VjdGlvbnMtMSktMSklbW9kMSwoKGorMSkqKHNlY3Rpb25zLTEpK3NlY3Rpb25zLTIpJW1vZDFdKX1mb3IocmVzdWx0Lml0PW5ldyBVaW50MTZBcnJheSh0aGlzLmZsYXR0ZW4oaXQpKSxpPTA7aTxpdC5sZW5ndGg7aSsrKWZvcihjZW50ZXJzLnB1c2goWzAsMCwwXSksaj0wOzM+ajtqKyspZm9yKGs9MDszPms7aysrKWNlbnRlcnNbaV1bal0rPXZbaXRbaV1ba11dW2pdLzM7cmVzdWx0LmNlbnRlcnM9Y2VudGVycyxyZXN1bHQudk9mZnNldHM9e3ZvZnM6MCxjb2ZzOi0xLG5vZnM6MCxyYWRvZnM6LTEsb29mczotMSx0b2ZzOjMsbmV4dG9mczotMSxwb2ludG9mczotMSxzdHJpZGU6NX0scmVzdWx0LmY9W10scmVzdWx0LmluZGljZXM9e30scmVzdWx0LmNvbG9yQ291bnQ9MSxyZXN1bHQudHlwZT0ic3BoZXJlIix0aGlzLnNwaGVyZT1yZXN1bHQsdGhpcy5pbml0U3BoZXJlR0woKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmluaXRTcGhlcmVHTD1mdW5jdGlvbigpe3ZhciBnbD10aGlzLmdsfHx0aGlzLmluaXRHTCgpLHNwaGVyZT10aGlzLnNwaGVyZTtnbC5pc0NvbnRleHRMb3N0KCl8fChzcGhlcmUuYnVmPWdsLmNyZWF0ZUJ1ZmZlcigpLGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLHNwaGVyZS5idWYpLGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLHNwaGVyZS52YWx1ZXMsZ2wuU1RBVElDX0RSQVcpLHNwaGVyZS5pYnVmPVtnbC5jcmVhdGVCdWZmZXIoKSxnbC5jcmVhdGVCdWZmZXIoKV0pfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuaW5pdFNwaGVyZUZyb21PYmo9ZnVuY3Rpb24ob2JqKXt2YXIgaSxwYXNzLGYsbW9kZSxzcGhlcmU9dGhpcy5zcGhlcmU7aWYoc3BoZXJlLm9mc0xvYz1vYmoub2ZzTG9jLHNwaGVyZS50ZXhMb2M9b2JqLnRleExvYyxzcGhlcmUuc2FtcGxlcj1vYmouc2FtcGxlcixzcGhlcmUudUZvZ01vZGU9b2JqLnVGb2dNb2RlLHNwaGVyZS51Rm9nQ29sb3I9b2JqLnVGb2dDb2xvcixzcGhlcmUudUZvZ1Bhcm1zPW9iai51Rm9nUGFybXMsc3BoZXJlLnVzZXJBdHRyaWJMb2NhdGlvbnM9b2JqLnVzZXJBdHRyaWJMb2NhdGlvbnMsc3BoZXJlLnVzZXJVbmlmb3JtTG9jYXRpb25zPW9iai51c2VyVW5pZm9ybUxvY2F0aW9ucyxzcGhlcmUubm9ybUxvYz1vYmoubm9ybUxvYyxzcGhlcmUuY2xpcExvYz1vYmouY2xpcExvYyxzcGhlcmUubmV4dExvYz1vYmoubmV4dExvYyxzcGhlcmUucG9pbnRMb2M9b2JqLnBvaW50TG9jLHNwaGVyZS5hc3BlY3RMb2M9b2JqLmFzcGVjdExvYyxzcGhlcmUubHdkTG9jPW9iai5sd2RMb2Msc3BoZXJlLnByb2c9b2JqLnByb2csc3BoZXJlLm1hdGVyaWFsPW9iai5tYXRlcmlhbCxzcGhlcmUuZmxhZ3M9b2JqLmZsYWdzLHNwaGVyZS5zb21lSGlkZGVuPW9iai5zb21lSGlkZGVuLHNwaGVyZS5mYXN0VHJhbnNwYXJlbmN5PW9iai5mYXN0VHJhbnNwYXJlbmN5LHNwaGVyZS5ubGlnaHRzPW9iai5ubGlnaHRzLHNwaGVyZS5lbWlzc2lvbj1vYmouZW1pc3Npb24sc3BoZXJlLmVtaXNzaW9uTG9jPW9iai5lbWlzc2lvbkxvYyxzcGhlcmUuc2hpbmluZXNzPW9iai5zaGluaW5lc3Msc3BoZXJlLnNoaW5pbmVzc0xvYz1vYmouc2hpbmluZXNzTG9jLHNwaGVyZS5hbWJpZW50PW9iai5hbWJpZW50LHNwaGVyZS5hbWJpZW50TG9jPW9iai5hbWJpZW50TG9jLHNwaGVyZS5zcGVjdWxhcj1vYmouc3BlY3VsYXIsc3BoZXJlLnNwZWN1bGFyTG9jPW9iai5zcGVjdWxhckxvYyxzcGhlcmUuZGlmZnVzZT1vYmouZGlmZnVzZSxzcGhlcmUuZGlmZnVzZUxvYz1vYmouZGlmZnVzZUxvYyxzcGhlcmUubGlnaHREaXI9b2JqLmxpZ2h0RGlyLHNwaGVyZS5saWdodERpckxvYz1vYmoubGlnaHREaXJMb2Msc3BoZXJlLnZpZXdwb2ludD1vYmoudmlld3BvaW50LHNwaGVyZS52aWV3cG9pbnRMb2M9b2JqLnZpZXdwb2ludExvYyxzcGhlcmUuZmluaXRlPW9iai5maW5pdGUsc3BoZXJlLmZpbml0ZUxvYz1vYmouZmluaXRlTG9jLHNwaGVyZS5wck1hdExvYz1vYmoucHJNYXRMb2Msc3BoZXJlLm12TWF0TG9jPW9iai5tdk1hdExvYyxzcGhlcmUubm9ybU1hdExvYz1vYmoubm9ybU1hdExvYyxzcGhlcmUuZnJvbnRMb2M9b2JqLmZyb250TG9jLHNwaGVyZS5pbmRleF91aW50PSExLHNwaGVyZS5pc190cmFuc3BhcmVudD1vYmouaXNfdHJhbnNwYXJlbnQsc3BoZXJlLmlnbm9yZUV4dGVudD1vYmouaWdub3JlRXh0ZW50LHNwaGVyZS5wYXNzZXMhPT1vYmoucGFzc2VzfHxKU09OLnN0cmluZ2lmeShzcGhlcmUucG1vZGUpIT09SlNPTi5zdHJpbmdpZnkob2JqLnBtb2RlKSlmb3Ioc3BoZXJlLnBhc3Nlcz1vYmoucGFzc2VzLHNwaGVyZS5wbW9kZT1vYmoucG1vZGUscGFzcz0wO3Bhc3M8b2JqLnBhc3NlcztwYXNzKyspe2lmKG1vZGU9c3BoZXJlLnBtb2RlW3Bhc3NdLCJ1bmRlZmluZWQiPT10eXBlb2Ygc3BoZXJlLmluZGljZXNbbW9kZV0pe3N3aXRjaChmPVtdLG1vZGUpe2Nhc2UiY3VsbGVkIjpicmVhaztjYXNlInBvaW50cyI6Zm9yKGYubGVuZ3RoPXNwaGVyZS52ZXJ0ZXhDb3VudCxpPTA7aTxmLmxlbmd0aDtpKyspZltpXT1pO2JyZWFrO2Nhc2UibGluZXMiOmZvcihmLmxlbmd0aD0yKnNwaGVyZS5pdC5sZW5ndGgsaT0wO2k8c3BoZXJlLml0Lmxlbmd0aC8zO2krKylmWzYqaV09c3BoZXJlLml0WzMqaV0sZls2KmkrMV09c3BoZXJlLml0WzMqaSsxXSxmWzYqaSsyXT1zcGhlcmUuaXRbMyppKzFdLGZbNippKzNdPXNwaGVyZS5pdFszKmkrMl0sZls2KmkrNF09c3BoZXJlLml0WzMqaSsyXSxmWzYqaSs1XT1zcGhlcmUuaXRbMyppXTticmVhaztjYXNlImZpbGxlZCI6Zj1zcGhlcmUuaXR9c3BoZXJlLmluZGljZXNbbW9kZV09bmV3IFVpbnQxNkFycmF5KGYpfXNwaGVyZS5mW3Bhc3NdPXNwaGVyZS5pbmRpY2VzW21vZGVdfXNwaGVyZS5pbml0aWFsaXplZD0hMH0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmluaXRTdWJzY2VuZT1mdW5jdGlvbihpZCl7dmFyIGksb2JqLHN1Yj10aGlzLmdldE9iaihpZCk7aWYoInN1YnNjZW5lIj09PXN1Yi50eXBlKWZvcihzdWIucGFyM2QudXNlck1hdHJpeD10aGlzLnRvQ2FudmFzTWF0cml4NChzdWIucGFyM2QudXNlck1hdHJpeCksc3ViLnBhcjNkLnVzZXJQcm9qZWN0aW9uPXRoaXMudG9DYW52YXNNYXRyaXg0KHN1Yi5wYXIzZC51c2VyUHJvamVjdGlvbiksc3ViLnBhcjNkLnVzZXJQcm9qZWN0aW9uLnRyYW5zcG9zZSgpLHN1Yi5wYXIzZC5saXN0ZW5lcnM9W10uY29uY2F0KHN1Yi5wYXIzZC5saXN0ZW5lcnMpLHN1Yi5iYWNrZ3JvdW5kSWQ9dm9pZCAwLHN1Yi5zdWJzY2VuZXM9W10sc3ViLmNsaXBwbGFuZXM9W10sc3ViLnRyYW5zcGFyZW50PVtdLHN1Yi5vcGFxdWU9W10sc3ViLmxpZ2h0cz1bXSxpPTA7aTxzdWIub2JqZWN0cy5sZW5ndGg7aSsrKW9iaj10aGlzLmdldE9iaihzdWIub2JqZWN0c1tpXSksInVuZGVmaW5lZCI9PXR5cGVvZiBvYmo/KHN1Yi5vYmplY3RzLnNwbGljZShpLDEpLGktLSk6ImJhY2tncm91bmQiPT09b2JqLnR5cGU/c3ViLmJhY2tncm91bmRJZD1vYmouaWQ6c3ViW3RoaXMud2hpY2hMaXN0KG9iai5pZCldLnB1c2gob2JqLmlkKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmluaXRPYmo9ZnVuY3Rpb24oaWQpe3ZhciBwb2x5Z29uX29mZnNldCx0ZXhpbmZvLGRyYXd0eXBlLG5jbGlwcGxhbmVzLGYsbnJvd3Msb2xkcm93cyxpLGosdix2MSx2MixtYXQsdXJpLG1hdG9iaixwYXNzLHBtb2RlLGRpbSxueCxueixucm93LG9iaj10aGlzLmdldE9iaihpZCksZmxhZ3M9b2JqLmZsYWdzLHR5cGU9b2JqLnR5cGUsaXNfbGl0PXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2lzX2xpdCksZmF0X2xpbmVzPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2ZhdF9saW5lcyksaGFzX3RleHR1cmU9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaGFzX3RleHR1cmUpLGZpeGVkX3F1YWRzPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2ZpeGVkX3F1YWRzKSxpc190cmFuc3BhcmVudD10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc190cmFuc3BhcmVudCksZGVwdGhfc29ydD10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9kZXB0aF9zb3J0KSxzcHJpdGVzXzNkPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX3Nwcml0ZXNfM2QpLGZpeGVkX3NpemU9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfZml4ZWRfc2l6ZSksaXNfdHdvc2lkZWQ9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaXNfdHdvc2lkZWQpLGlzX2JydXNoPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2lzX2JydXNoKSxoYXNfZm9nPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2hhc19mb2cpLGhhc19ub3JtYWxzPSJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLm5vcm1hbHMsZ2w9dGhpcy5nbHx8dGhpcy5pbml0R0woKTtpZigibnVtYmVyIiE9dHlwZW9mIGlkJiZ0aGlzLmFsZXJ0T25jZSgiaW5pdE9iaiBpZCBpcyAiK3R5cGVvZiBpZCksb2JqLmluaXRpYWxpemVkPSEwLG9iai5zb21lSGlkZGVuPSExLG9iai5pc190cmFuc3BhcmVudD1pc190cmFuc3BhcmVudCwiYmJveGRlY28iIT09dHlwZSYmInN1YnNjZW5lIiE9PXR5cGUpe2lmKCJzcGhlcmVzIj09PXR5cGUmJiJ1bmRlZmluZWQiPT10eXBlb2YgdGhpcy5zcGhlcmUmJnRoaXMuaW5pdFNwaGVyZSgxNiwxNiksImxpZ2h0Ij09PXR5cGUpcmV0dXJuIG9iai5hbWJpZW50PW5ldyBGbG9hdDMyQXJyYXkob2JqLmNvbG9yc1swXS5zbGljZSgwLDMpKSxvYmouZGlmZnVzZT1uZXcgRmxvYXQzMkFycmF5KG9iai5jb2xvcnNbMV0uc2xpY2UoMCwzKSksb2JqLnNwZWN1bGFyPW5ldyBGbG9hdDMyQXJyYXkob2JqLmNvbG9yc1syXS5zbGljZSgwLDMpKSx2b2lkKG9iai5saWdodERpcj1uZXcgRmxvYXQzMkFycmF5KG9iai52ZXJ0aWNlc1swXSkpO2lmKCJjbGlwcGxhbmVzIj09PXR5cGUpcmV0dXJuIHZvaWQob2JqLnZDbGlwcGxhbmU9dGhpcy5mbGF0dGVuKHRoaXMuY2JpbmQob2JqLm5vcm1hbHMsb2JqLm9mZnNldHMpKSk7aWYoImJhY2tncm91bmQiPT09dHlwZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBvYmouaWRzKXJldHVybiB2b2lkKG9iai5xdWFkPXRoaXMuZmxhdHRlbihbXS5jb25jYXQob2JqLmlkcykpKTtpZihwb2x5Z29uX29mZnNldD10aGlzLmdldE1hdGVyaWFsKGlkLCJwb2x5Z29uX29mZnNldCIpLCgwIT09cG9seWdvbl9vZmZzZXRbMF18fDAhPT1wb2x5Z29uX29mZnNldFsxXSkmJihvYmoucG9seWdvbl9vZmZzZXQ9cG9seWdvbl9vZmZzZXQpLGlzX3RyYW5zcGFyZW50JiYoZGVwdGhfc29ydD1bInRyaWFuZ2xlcyIsInF1YWRzIiwic3VyZmFjZSIsInNwaGVyZXMiLCJzcHJpdGVzIiwidGV4dCJdLmluZGV4T2YodHlwZSk+PTApLGlzX2JydXNoJiZ0aGlzLmluaXRTZWxlY3Rpb24oaWQpLCJ1bmRlZmluZWQiPT10eXBlb2Ygb2JqLnZlcnRpY2VzJiYob2JqLnZlcnRpY2VzPVtdKSx2PW9iai52ZXJ0aWNlcyxvYmoudmVydGV4Q291bnQ9di5sZW5ndGgsb2JqLnZlcnRleENvdW50KXtpZihpc190d29zaWRlZCYmIWhhc19ub3JtYWxzKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIG9iai51c2VyQXR0cmlidXRlcyYmKG9iai51c2VyQXR0cmlidXRlcz17fSksdjE9QXJyYXkodi5sZW5ndGgpLHYyPUFycmF5KHYubGVuZ3RoKSwidHJpYW5nbGVzIj09PW9iai50eXBlfHwicXVhZHMiPT09b2JqLnR5cGUpZm9yKG5yb3c9InRyaWFuZ2xlcyI9PT1vYmoudHlwZT8zOjQsaT0wO2k8TWF0aC5mbG9vcih2Lmxlbmd0aC9ucm93KTtpKyspZm9yKGo9MDtucm93Pmo7aisrKXYxW25yb3cqaStqXT12W25yb3cqaSsoaisxKSVucm93XSx2Mltucm93Kmkral09dltucm93KmkrKGorMiklbnJvd107ZWxzZSBpZigic3VyZmFjZSI9PT1vYmoudHlwZSlmb3IoZGltPW9iai5kaW1bMF0sbng9ZGltWzBdLG56PWRpbVsxXSxqPTA7bng+ajtqKyspZm9yKGk9MDtuej5pO2krKyluej5pKzEmJm54PmorMT8odjJbaitueCppXT12W2orbngqKGkrMSldLHYxW2orbngqaV09dltqKzErbngqKGkrMSldKTpuej5pKzE/KHYyW2orbngqaV09dltqLTErbngqaV0sdjFbaitueCppXT12W2orbngqKGkrMSldKToodjJbaitueCppXT12W2orbngqKGktMSldLHYxW2orbngqaV09dltqLTErbngqKGktMSldKTtvYmoudXNlckF0dHJpYnV0ZXMuYVBvczE9djEsb2JqLnVzZXJBdHRyaWJ1dGVzLmFQb3MyPXYyfWlmKCFzcHJpdGVzXzNkKXtpZihnbC5pc0NvbnRleHRMb3N0KCkpcmV0dXJuO29iai5wcm9nPWdsLmNyZWF0ZVByb2dyYW0oKSxnbC5hdHRhY2hTaGFkZXIob2JqLnByb2csdGhpcy5nZXRTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUix0aGlzLmdldFZlcnRleFNoYWRlcihpZCkpKSxnbC5hdHRhY2hTaGFkZXIob2JqLnByb2csdGhpcy5nZXRTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSLHRoaXMuZ2V0RnJhZ21lbnRTaGFkZXIoaWQpKSksZ2wuYmluZEF0dHJpYkxvY2F0aW9uKG9iai5wcm9nLDAsImFQb3MiKSxnbC5iaW5kQXR0cmliTG9jYXRpb24ob2JqLnByb2csMSwiYUNvbCIpLGdsLmxpbmtQcm9ncmFtKG9iai5wcm9nKTt2YXIgbGlua2VkPWdsLmdldFByb2dyYW1QYXJhbWV0ZXIob2JqLnByb2csZ2wuTElOS19TVEFUVVMpO2lmKCFsaW5rZWQpe3ZhciBsYXN0RXJyb3I9Z2wuZ2V0UHJvZ3JhbUluZm9Mb2cob2JqLnByb2cpO3JldHVybiBjb25zb2xlLndhcm4oIkVycm9yIGluIHByb2dyYW0gbGlua2luZzoiK2xhc3RFcnJvciksdm9pZCBnbC5kZWxldGVQcm9ncmFtKG9iai5wcm9nKX19InRleHQiPT09dHlwZSYmKHRleGluZm89dGhpcy5kcmF3VGV4dFRvQ2FudmFzKG9iai50ZXh0cyx0aGlzLmZsYXR0ZW4ob2JqLmNleCksdGhpcy5mbGF0dGVuKG9iai5mYW1pbHkpLHRoaXMuZmxhdHRlbihvYmouZmFtaWx5KSkpLGZpeGVkX3F1YWRzJiYhc3ByaXRlc18zZCYmKG9iai5vZnNMb2M9Z2wuZ2V0QXR0cmliTG9jYXRpb24ob2JqLnByb2csImFPZnMiKSksKGhhc190ZXh0dXJlfHwidGV4dCI9PT10eXBlKSYmKG9iai50ZXh0dXJlfHwob2JqLnRleHR1cmU9Z2wuY3JlYXRlVGV4dHVyZSgpKSxvYmoudGV4TG9jPWdsLmdldEF0dHJpYkxvY2F0aW9uKG9iai5wcm9nLCJhVGV4Y29vcmQiKSxvYmouc2FtcGxlcj1nbC5nZXRVbmlmb3JtTG9jYXRpb24ob2JqLnByb2csInVTYW1wbGVyIikpLGhhc19mb2cmJiFzcHJpdGVzXzNkJiYob2JqLnVGb2dNb2RlPWdsLmdldFVuaWZvcm1Mb2NhdGlvbihvYmoucHJvZywidUZvZ01vZGUiKSxvYmoudUZvZ0NvbG9yPWdsLmdldFVuaWZvcm1Mb2NhdGlvbihvYmoucHJvZywidUZvZ0NvbG9yIiksb2JqLnVGb2dQYXJtcz1nbC5nZXRVbmlmb3JtTG9jYXRpb24ob2JqLnByb2csInVGb2dQYXJtcyIpKSxoYXNfdGV4dHVyZSYmKG1hdD1vYmoubWF0ZXJpYWwsInVuZGVmaW5lZCIhPXR5cGVvZiBtYXQudXJpP3VyaT1tYXQudXJpOiJ1bmRlZmluZWQiPT10eXBlb2YgbWF0LnVyaUVsZW1lbnRJZD8obWF0b2JqPXRoaXMuZ2V0T2JqKG1hdC51cmlJZCksdXJpPSJ1bmRlZmluZWQiIT10eXBlb2YgbWF0b2JqP21hdG9iai5tYXRlcmlhbC51cmk6IiIpOnVyaT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChtYXQudXJpRWxlbWVudElkKS5yZ2xpbnN0YW5jZS5nZXRPYmoobWF0LnVyaUlkKS5tYXRlcmlhbC51cmksdGhpcy5sb2FkSW1hZ2VUb1RleHR1cmUodXJpLG9iai50ZXh0dXJlKSksInRleHQiPT09dHlwZSYmdGhpcy5oYW5kbGVMb2FkZWRUZXh0dXJlKG9iai50ZXh0dXJlLHRoaXMudGV4dHVyZUNhbnZhcyk7dmFyIG5jLGNvZnMsbm9mcyxyYWRvZnMsb29mcyx0b2ZzLHZuZXcsZm5ldyxhbGlhcyxjb2xvcnMsa2V5LHNlbGVjdGlvbixmaWx0ZXIsYWRqLHBvcyxvZmZzZXQsYXR0cixsYXN0LG9wdGlvbnMsc3RyaWRlPTMsbmV4dG9mcz0tMSxwb2ludG9mcz0tMTtpZihvYmouYWxpYXM9dm9pZCAwLGNvbG9ycz1vYmouY29sb3JzLGo9dGhpcy5zY2VuZS5jcm9zc3RhbGsuaWQuaW5kZXhPZihpZCksaj49MCl7Zm9yKGtleT10aGlzLnNjZW5lLmNyb3NzdGFsay5rZXlbal0sb3B0aW9ucz10aGlzLnNjZW5lLmNyb3NzdGFsay5vcHRpb25zW2pdLGNvbG9ycz1jb2xvcnMuc2xpY2UoMCksaT0wO2k8di5sZW5ndGg7aSsrKWNvbG9yc1tpXT1vYmouY29sb3JzW2klb2JqLmNvbG9ycy5sZW5ndGhdLnNsaWNlKDApO2lmKChzZWxlY3Rpb249dGhpcy5zY2VuZS5jcm9zc3RhbGsuc2VsZWN0aW9uKSYmKHNlbGVjdGlvbi5sZW5ndGh8fCFvcHRpb25zLnNlbGVjdGVkSWdub3JlTm9uZSkpZm9yKGk9MDtpPHYubGVuZ3RoO2krKylzZWxlY3Rpb24uaW5jbHVkZXMoa2V5W2ldKT9vcHRpb25zLnNlbGVjdGVkQ29sb3ImJihjb2xvcnNbaV09b3B0aW9ucy5zZWxlY3RlZENvbG9yLnNsaWNlKDApKToob3B0aW9ucy5kZXNlbGVjdGVkQ29sb3ImJihjb2xvcnNbaV09b3B0aW9ucy5kZXNlbGVjdGVkQ29sb3Iuc2xpY2UoMCkpLGNvbG9yc1tpXVszXT1jb2xvcnNbaV1bM10qb3B0aW9ucy5kZXNlbGVjdGVkRmFkZSk7aWYoZmlsdGVyPXRoaXMuc2NlbmUuY3Jvc3N0YWxrLmZpbHRlcilmb3IoaT0wO2k8di5sZW5ndGg7aSsrKWZpbHRlci5pbmNsdWRlcyhrZXlbaV0pfHwob3B0aW9ucy5maWx0ZXJlZENvbG9yJiYoY29sb3JzW2ldPW9wdGlvbnMuZmlsdGVyZWRDb2xvci5zbGljZSgwKSksY29sb3JzW2ldWzNdPWNvbG9yc1tpXVszXSpvcHRpb25zLmZpbHRlcmVkRmFkZSl9Zm9yKCJzcGhlcmVzIj09PW9iai50eXBlJiYob2JqLnNwaGVyZUNvbG9ycz1jb2xvcnMpLG5jPW9iai5jb2xvckNvdW50PWNvbG9ycy5sZW5ndGgsbmM+MT8oY29mcz1zdHJpZGUsc3RyaWRlKz00LHY9dGhpcy5jYmluZCh2LGNvbG9ycykpOihjb2ZzPS0xLG9iai5vbmVjb2xvcj10aGlzLmZsYXR0ZW4oY29sb3JzKSksaGFzX25vcm1hbHM/KG5vZnM9c3RyaWRlLHN0cmlkZSs9Myx2PXRoaXMuY2JpbmQodiwidW5kZWZpbmVkIiE9dHlwZW9mIG9iai5wbm9ybWFscz9vYmoucG5vcm1hbHM6b2JqLm5vcm1hbHMpKTpub2ZzPS0xLCJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLnJhZGlpPyhyYWRvZnM9c3RyaWRlLHN0cmlkZSs9MSxvYmoucmFkaWkubGVuZ3RoPT09di5sZW5ndGg/dj10aGlzLmNiaW5kKHYsb2JqLnJhZGlpKToxPT09b2JqLnJhZGlpLmxlbmd0aCYmKHY9di5tYXAoZnVuY3Rpb24ocm93KXtyZXR1cm4gcm93LmNvbmNhdChvYmoucmFkaWlbMF0pfSkpKTpyYWRvZnM9LTEsZj1BcnJheSh2Lmxlbmd0aCksaT0wO2k8di5sZW5ndGg7aSsrKWZbaV09aTtpZihvYmouZj1bZixmXSwic3ByaXRlcyIhPT10eXBlfHxzcHJpdGVzXzNkKWlmKCJ0ZXh0Ij09PXR5cGUpe2Zvcih0b2ZzPXN0cmlkZSxzdHJpZGUrPTIsb29mcz1zdHJpZGUsc3RyaWRlKz0yLHZuZXc9bmV3IEFycmF5KDQqdi5sZW5ndGgpLGY9b2JqLmZbMF0sZm5ldz1uZXcgQXJyYXkoNCpmLmxlbmd0aCksYWxpYXM9bmV3IEFycmF5KHYubGVuZ3RoKSxsYXN0PXYubGVuZ3RoLGFkaj10aGlzLmZsYXR0ZW4ob2JqLmFkaiksInVuZGVmaW5lZCIhPXR5cGVvZiBvYmoucG9zJiYocG9zPXRoaXMuZmxhdHRlbihvYmoucG9zKSxvZmZzZXQ9YWRqWzBdKSxpPTA7aTx2Lmxlbmd0aDtpKyspZm9yKCJ1bmRlZmluZWQiIT10eXBlb2YgcG9zJiYoYWRqPXRoaXMuZ2V0QWRqKHBvc1tpJXBvcy5sZW5ndGhdLG9mZnNldCxvYmoudGV4dHNbaV0pKSx2bmV3W2ldPXZbaV0uY29uY2F0KFswLC0uNV0pLmNvbmNhdChhZGopLGZuZXdbNCppXT1mW2ldLHZuZXdbbGFzdF09dltpXS5jb25jYXQoWzEsLS41XSkuY29uY2F0KGFkaiksZm5ld1s0KmkrMV09bGFzdCsrLHZuZXdbbGFzdF09dltpXS5jb25jYXQoWzEsMS41XSkuY29uY2F0KGFkaiksZm5ld1s0KmkrMl09bGFzdCsrLHZuZXdbbGFzdF09dltpXS5jb25jYXQoWzAsMS41XSkuY29uY2F0KGFkaiksZm5ld1s0KmkrM109bGFzdCsrLGFsaWFzW2ldPVtsYXN0LTMsbGFzdC0yLGxhc3QtMV0saj0wOzQ+ajtqKyspdjE9dm5ld1tmbmV3WzQqaStqXV0sdjFbdG9mcysyXT0yKih2MVt0b2ZzXS12MVt0b2ZzKzJdKSp0ZXhpbmZvLndpZHRoc1tpXSx2MVt0b2ZzKzNdPTIqKHYxW3RvZnMrMV0tdjFbdG9mcyszXSkqdGV4aW5mby50ZXh0SGVpZ2h0c1tpXSx2MVt0b2ZzXT0odGV4aW5mby5vZmZzZXRzeFtpXSt2MVt0b2ZzXSp0ZXhpbmZvLndpZHRoc1tpXSkvdGV4aW5mby5jYW52YXNYLHYxW3RvZnMrMV09MS0odGV4aW5mby5vZmZzZXRzeVtpXS12MVt0b2ZzKzFdKnRleGluZm8udGV4dEhlaWdodHNbaV0pL3RleGluZm8uY2FudmFzWSx2bmV3W2ZuZXdbNCppK2pdXT12MTt2PXZuZXcsb2JqLnZlcnRleENvdW50PXYubGVuZ3RoLG9iai5mPVtmbmV3LGZuZXddfWVsc2UidW5kZWZpbmVkIiE9dHlwZW9mIG9iai50ZXhjb29yZHM/KHRvZnM9c3RyaWRlLHN0cmlkZSs9Mixvb2ZzPS0xLHY9dGhpcy5jYmluZCh2LG9iai50ZXhjb29yZHMpKToodG9mcz0tMSxvb2ZzPS0xKTtlbHNle3RvZnM9c3RyaWRlLHN0cmlkZSs9Mixvb2ZzPXN0cmlkZSxzdHJpZGUrPTIsdm5ldz1uZXcgQXJyYXkoNCp2Lmxlbmd0aCksZm5ldz1uZXcgQXJyYXkoNCp2Lmxlbmd0aCksYWxpYXM9bmV3IEFycmF5KHYubGVuZ3RoKTt2YXIgcmVzY2FsZT1maXhlZF9zaXplPzcyOjEsc2l6ZT1vYmoucmFkaWkscz1yZXNjYWxlKnNpemVbMF0vMjtmb3IobGFzdD12Lmxlbmd0aCxmPW9iai5mWzBdLGk9MDtpPHYubGVuZ3RoO2krKylzaXplLmxlbmd0aD4xJiYocz1yZXNjYWxlKnNpemVbaV0vMiksdm5ld1tpXT12W2ldLmNvbmNhdChbMCwwLC1zLC1zXSksZm5ld1s0KmldPWZbaV0sdm5ld1tsYXN0XT12W2ldLmNvbmNhdChbMSwwLHMsLXNdKSxmbmV3WzQqaSsxXT1sYXN0Kyssdm5ld1tsYXN0XT12W2ldLmNvbmNhdChbMSwxLHMsc10pLGZuZXdbNCppKzJdPWxhc3QrKyx2bmV3W2xhc3RdPXZbaV0uY29uY2F0KFswLDEsLXMsc10pLGZuZXdbNCppKzNdPWxhc3QrKyxhbGlhc1tpXT1bbGFzdC0zLGxhc3QtMixsYXN0LTFdO3Y9dm5ldyxvYmoudmVydGV4Q291bnQ9di5sZW5ndGgsb2JqLmY9W2ZuZXcsZm5ld119aWYob2JqLmFsaWFzPWFsaWFzLCJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLnVzZXJBdHRyaWJ1dGVzKXtvYmoudXNlckF0dHJpYk9mZnNldHM9e30sb2JqLnVzZXJBdHRyaWJMb2NhdGlvbnM9e30sb2JqLnVzZXJBdHRyaWJTaXplcz17fTtmb3IoYXR0ciBpbiBvYmoudXNlckF0dHJpYnV0ZXMpb2JqLnVzZXJBdHRyaWJMb2NhdGlvbnNbYXR0cl09Z2wuZ2V0QXR0cmliTG9jYXRpb24ob2JqLnByb2csYXR0ciksb2JqLnVzZXJBdHRyaWJMb2NhdGlvbnNbYXR0cl0+PTAmJihvYmoudXNlckF0dHJpYk9mZnNldHNbYXR0cl09c3RyaWRlLHY9dGhpcy5jYmluZCh2LG9iai51c2VyQXR0cmlidXRlc1thdHRyXSksc3RyaWRlPXZbMF0ubGVuZ3RoLG9iai51c2VyQXR0cmliU2l6ZXNbYXR0cl09c3RyaWRlLW9iai51c2VyQXR0cmliT2Zmc2V0c1thdHRyXSl9aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBvYmoudXNlclVuaWZvcm1zKXtvYmoudXNlclVuaWZvcm1Mb2NhdGlvbnM9e307Zm9yKGF0dHIgaW4gb2JqLnVzZXJVbmlmb3JtcylvYmoudXNlclVuaWZvcm1Mb2NhdGlvbnNbYXR0cl09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKG9iai5wcm9nLGF0dHIpfWlmKHNwcml0ZXNfM2QpZm9yKG9iai51c2VyTWF0cml4PW5ldyBDYW52YXNNYXRyaXg0KG9iai51c2VybWF0cml4KSxvYmoub2JqZWN0cz10aGlzLmZsYXR0ZW4oW10uY29uY2F0KG9iai5pZHMpKSxpc19saXQ9ITEsaT0wO2k8b2JqLm9iamVjdHMubGVuZ3RoO2krKyl0aGlzLmluaXRPYmoob2JqLm9iamVjdHNbaV0pO2lmKGlzX2xpdCYmIWZpeGVkX3F1YWRzJiYob2JqLm5vcm1Mb2M9Z2wuZ2V0QXR0cmliTG9jYXRpb24ob2JqLnByb2csImFOb3JtIikpLG5jbGlwcGxhbmVzPXRoaXMuY291bnRDbGlwcGxhbmVzKCksbmNsaXBwbGFuZXMmJiFzcHJpdGVzXzNkKWZvcihvYmouY2xpcExvYz1bXSxpPTA7bmNsaXBwbGFuZXM+aTtpKyspb2JqLmNsaXBMb2NbaV09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKG9iai5wcm9nLCJ2Q2xpcHBsYW5lIitpKTtpZihpc19saXQpZm9yKG9iai5lbWlzc2lvbkxvYz1nbC5nZXRVbmlmb3JtTG9jYXRpb24ob2JqLnByb2csImVtaXNzaW9uIiksb2JqLmVtaXNzaW9uPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5zdHJpbmdUb1JnYih0aGlzLmdldE1hdGVyaWFsKGlkLCJlbWlzc2lvbiIpKSksb2JqLnNoaW5pbmVzc0xvYz1nbC5nZXRVbmlmb3JtTG9jYXRpb24ob2JqLnByb2csInNoaW5pbmVzcyIpLG9iai5zaGluaW5lc3M9dGhpcy5nZXRNYXRlcmlhbChpZCwic2hpbmluZXNzIiksb2JqLm5saWdodHM9dGhpcy5jb3VudExpZ2h0cygpLG9iai5hbWJpZW50TG9jPVtdLG9iai5hbWJpZW50PW5ldyBGbG9hdDMyQXJyYXkodGhpcy5zdHJpbmdUb1JnYih0aGlzLmdldE1hdGVyaWFsKGlkLCJhbWJpZW50IikpKSxvYmouc3BlY3VsYXJMb2M9W10sb2JqLnNwZWN1bGFyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5zdHJpbmdUb1JnYih0aGlzLmdldE1hdGVyaWFsKGlkLCJzcGVjdWxhciIpKSksb2JqLmRpZmZ1c2VMb2M9W10sb2JqLmxpZ2h0RGlyTG9jPVtdLG9iai52aWV3cG9pbnRMb2M9W10sb2JqLmZpbml0ZUxvYz1bXSxpPTA7aTxvYmoubmxpZ2h0cztpKyspb2JqLmFtYmllbnRMb2NbaV09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKG9iai5wcm9nLCJhbWJpZW50IitpKSxvYmouc3BlY3VsYXJMb2NbaV09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKG9iai5wcm9nLCJzcGVjdWxhciIraSksb2JqLmRpZmZ1c2VMb2NbaV09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKG9iai5wcm9nLCJkaWZmdXNlIitpKSxvYmoubGlnaHREaXJMb2NbaV09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKG9iai5wcm9nLCJsaWdodERpciIraSksb2JqLnZpZXdwb2ludExvY1tpXT1nbC5nZXRVbmlmb3JtTG9jYXRpb24ob2JqLnByb2csInZpZXdwb2ludCIraSksb2JqLmZpbml0ZUxvY1tpXT1nbC5nZXRVbmlmb3JtTG9jYXRpb24ob2JqLnByb2csImZpbml0ZSIraSk7Zm9yKG9iai5wYXNzZXM9aXNfdHdvc2lkZWQrMSxvYmoucG1vZGU9bmV3IEFycmF5KG9iai5wYXNzZXMpLHBhc3M9MDtwYXNzPG9iai5wYXNzZXM7cGFzcysrKXBtb2RlPSJ0cmlhbmdsZXMiPT09dHlwZXx8InF1YWRzIj09PXR5cGV8fCJzdXJmYWNlIj09PXR5cGV8fCJzcGhlcmVzIj09PXR5cGU/dGhpcy5nZXRNYXRlcmlhbChpZCwwPT09cGFzcz8iZnJvbnQiOiJiYWNrIik6ImZpbGxlZCIsb2JqLnBtb2RlW3Bhc3NdPXBtb2RlO2lmKCJzcGhlcmVzIiE9PXR5cGUpZm9yKG9iai5mLmxlbmd0aD1vYmoucGFzc2VzLHBhc3M9MDtwYXNzPG9iai5wYXNzZXM7cGFzcysrKXtpZihmPWZuZXc9b2JqLmZbcGFzc10scG1vZGU9b2JqLnBtb2RlW3Bhc3NdLCJjdWxsZWQiPT09cG1vZGUpZj1bXTtlbHNlIGlmKCJwb2ludHMiPT09cG1vZGUpO2Vsc2UgaWYoInF1YWRzIiE9PXR5cGUmJiJ0ZXh0IiE9PXR5cGUmJiJzcHJpdGVzIiE9PXR5cGV8fHNwcml0ZXNfM2Qpe2lmKCJ0cmlhbmdsZXMiPT09dHlwZSl7aWYobnJvd3M9TWF0aC5mbG9vcihvYmoudmVydGV4Q291bnQvMyksImZpbGxlZCI9PT1wbW9kZSlmb3IoZm5ldz1BcnJheSgzKm5yb3dzKSxpPTA7aTxmbmV3Lmxlbmd0aDtpKyspZm5ld1tpXT1mW2ldO2Vsc2UgaWYoImxpbmVzIj09PXBtb2RlKWZvcihmbmV3PUFycmF5KDYqbnJvd3MpLGk9MDtucm93cz5pO2krKylmbmV3WzYqaV09ZlszKmldLGZuZXdbNippKzFdPWZbMyppKzFdLGZuZXdbNippKzJdPWZbMyppKzFdLGZuZXdbNippKzNdPWZbMyppKzJdLGZuZXdbNippKzRdPWZbMyppKzJdLGZuZXdbNippKzVdPWZbMyppXX1lbHNlIGlmKCJzcGhlcmVzIj09PXR5cGUpO2Vsc2UgaWYoInN1cmZhY2UiPT09dHlwZSlpZihkaW09b2JqLmRpbVswXSxueD1kaW1bMF0sbno9ZGltWzFdLCJmaWxsZWQiPT09cG1vZGUpZm9yKGZuZXc9W10saj0wO254LTE+ajtqKyspZm9yKGk9MDtuei0xPmk7aSsrKWZuZXcucHVzaChmW2orbngqaV0sZltqK254KihpKzEpXSxmW2orMStueCooaSsxKV0sZltqK254KmldLGZbaisxK254KihpKzEpXSxmW2orMStueCppXSk7ZWxzZSBpZigibGluZXMiPT09cG1vZGUpZm9yKGZuZXc9W10saj0wO254Pmo7aisrKWZvcihpPTA7bno+aTtpKyspbno+aSsxJiZmbmV3LnB1c2goZltqK254KmldLGZbaitueCooaSsxKV0pLG54PmorMSYmZm5ldy5wdXNoKGZbaitueCppXSxmW2orMStueCppXSl9ZWxzZSBpZihucm93cz1NYXRoLmZsb29yKG9iai52ZXJ0ZXhDb3VudC80KSwiZmlsbGVkIj09PXBtb2RlKWZvcihmbmV3PUFycmF5KDYqbnJvd3MpLGk9MDtucm93cz5pO2krKylmbmV3WzYqaV09Zls0KmldLGZuZXdbNippKzFdPWZbNCppKzFdLGZuZXdbNippKzJdPWZbNCppKzJdLGZuZXdbNippKzNdPWZbNCppXSxmbmV3WzYqaSs0XT1mWzQqaSsyXSxmbmV3WzYqaSs1XT1mWzQqaSszXTtlbHNlIGZvcihmbmV3PUFycmF5KDgqbnJvd3MpLGk9MDtucm93cz5pO2krKylmbmV3WzgqaV09Zls0KmldLGZuZXdbOCppKzFdPWZbNCppKzFdLGZuZXdbOCppKzJdPWZbNCppKzFdLGZuZXdbOCppKzNdPWZbNCppKzJdLGZuZXdbOCppKzRdPWZbNCppKzJdLGZuZXdbOCppKzVdPWZbNCppKzNdLGZuZXdbOCppKzZdPWZbNCppKzNdLGZuZXdbOCppKzddPWZbNCppXTtvYmouZltwYXNzXT1mbmV3LGRyYXd0eXBlPWRlcHRoX3NvcnQ/IkRZTkFNSUNfRFJBVyI6IlNUQVRJQ19EUkFXIn1pZihmYXRfbGluZXMpe2ZvcihhbGlhcz12b2lkIDAsb2JqLm5leHRMb2M9Z2wuZ2V0QXR0cmliTG9jYXRpb24ob2JqLnByb2csImFOZXh0Iiksb2JqLnBvaW50TG9jPWdsLmdldEF0dHJpYkxvY2F0aW9uKG9iai5wcm9nLCJhUG9pbnQiKSxvYmouYXNwZWN0TG9jPWdsLmdldFVuaWZvcm1Mb2NhdGlvbihvYmoucHJvZywidUFzcGVjdCIpLG9iai5sd2RMb2M9Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKG9iai5wcm9nLCJ1THdkIikscGFzcz0wO3Bhc3M8b2JqLnBhc3NlcyYmKGY9b2JqLmZbcGFzc10sb2xkcm93cz1mLmxlbmd0aCwibGluZXMiIT09b2JqLnBtb2RlW3Bhc3NdKTtwYXNzKyspO2Zvcihucm93cz0ibGluZXN0cmlwIj09PXR5cGU/NCoob2xkcm93cy0xKToyKm9sZHJvd3Msdm5ldz1uZXcgQXJyYXkobnJvd3MpLGZuZXc9bmV3IEFycmF5KDEuNSpucm93cyksaT0wO2k8di5sZW5ndGg7aSsrKXZuZXdbaV09dltpXS5jb25jYXQoWzAsMCwwLDAsMF0pO25leHRvZnM9c3RyaWRlLHBvaW50b2ZzPXN0cmlkZSszLHN0cmlkZSs9NTt2YXIgaW5kLGs7Zm9yKGxhc3Q9di5sZW5ndGgtMSxpbmQ9MCxhbGlhcz1uZXcgQXJyYXkoZi5sZW5ndGgpLGk9MDtpPGYubGVuZ3RoO2krKylhbGlhc1tpXT1bXTtmb3IoaT0wO2k8Zi5sZW5ndGgtMTtpKyspaWYoImxpbmVzdHJpcCI9PT10eXBlfHxpJTIhPT0xKXtmb3Ioaz0rK2xhc3Qsdm5ld1trXT12bmV3W2ZbaV1dLnNsaWNlKCksaj0wOzM+ajtqKyspdm5ld1trXVtuZXh0b2ZzK2pdPXZuZXdbZltpKzFdXVtqXTtmb3Iodm5ld1trXVtwb2ludG9mc109LTEsdm5ld1trXVtwb2ludG9mcysxXT0tMSxmbmV3W2luZF09ayxsYXN0Kyssdm5ld1tsYXN0XT12bmV3W2tdLnNsaWNlKCksdm5ld1tsYXN0XVtwb2ludG9mc109MSxmbmV3W2luZCsxXT1sYXN0LGFsaWFzW2ZbaV1dLnB1c2gobGFzdC0xLGxhc3QpLGxhc3QrKyxrPWxhc3Qsdm5ld1trXT12bmV3W2ZbaSsxXV0uc2xpY2UoKSxqPTA7Mz5qO2orKyl2bmV3W2tdW25leHRvZnMral09dm5ld1tmW2ldXVtqXTt2bmV3W2tdW3BvaW50b2ZzXT0tMSx2bmV3W2tdW3BvaW50b2ZzKzFdPTEsZm5ld1tpbmQrMl09ayxmbmV3W2luZCszXT1mbmV3W2luZCsxXSxsYXN0Kyssdm5ld1tsYXN0XT12bmV3W2tdLnNsaWNlKCksdm5ld1tsYXN0XVtwb2ludG9mc109MSxmbmV3W2luZCs0XT1sYXN0LGZuZXdbaW5kKzVdPWZuZXdbaW5kKzJdLGluZCs9NixhbGlhc1tmW2krMV1dLnB1c2gobGFzdC0xLGxhc3QpfWlmKHZuZXcubGVuZ3RoPWxhc3QrMSx2PXZuZXcsb2JqLnZlcnRleENvdW50PXYubGVuZ3RoLCJ1bmRlZmluZWQiIT10eXBlb2YgYWxpYXMmJiJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLmFsaWFzKXt2YXIgb2xkYWxpYXM9b2JqLmFsaWFzLG5ld2FsaWFzPUFycmF5KG9iai5hbGlhcy5sZW5ndGgpO2ZvcihpPTA7aTxuZXdhbGlhcy5sZW5ndGg7aSsrKWZvcihuZXdhbGlhc1tpXT1vbGRhbGlhc1tpXS5zbGljZSgpLGo9MDtqPG9sZGFsaWFzW2ldLmxlbmd0aDtqKyspQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobmV3YWxpYXNbaV0sYWxpYXNbb2xkYWxpYXNbal1dKTtvYmouYWxpYXM9bmV3YWxpYXN9ZWxzZSBvYmouYWxpYXM9YWxpYXM7Zm9yKHBhc3M9MDtwYXNzPG9iai5wYXNzZXM7cGFzcysrKSgibGluZXMiPT09dHlwZXx8ImxpbmVzdHJpcCI9PT10eXBlfHwibGluZXMiPT09b2JqLnBtb2RlW3Bhc3NdKSYmKG9iai5mW3Bhc3NdPWZuZXcpO2RyYXd0eXBlPWRlcHRoX3NvcnQ/IkRZTkFNSUNfRFJBVyI6IlNUQVRJQ19EUkFXIn1mb3IocGFzcz0wO3Bhc3M8b2JqLnBhc3NlcztwYXNzKyspb2JqLnZlcnRleENvdW50PjY1NTM1P3RoaXMuaW5kZXhfdWludD8ob2JqLmZbcGFzc109bmV3IFVpbnQzMkFycmF5KG9iai5mW3Bhc3NdKSxvYmouaW5kZXhfdWludD0hMCk6dGhpcy5hbGVydE9uY2UoIk9iamVjdCBoYXMgIitvYmoudmVydGV4Q291bnQrIiB2ZXJ0aWNlcywgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXIuIik6KG9iai5mW3Bhc3NdPW5ldyBVaW50MTZBcnJheShvYmouZltwYXNzXSksb2JqLmluZGV4X3VpbnQ9ITEpO3N0cmlkZSE9PXZbMF0ubGVuZ3RoJiZ0aGlzLmFsZXJ0T25jZSgicHJvYmxlbSBpbiBzdHJpZGUgY2FsY3VsYXRpb24iKSxvYmoudk9mZnNldHM9e3ZvZnM6MCxjb2ZzOmNvZnMsbm9mczpub2ZzLHJhZG9mczpyYWRvZnMsb29mczpvb2ZzLHRvZnM6dG9mcyxuZXh0b2ZzOm5leHRvZnMscG9pbnRvZnM6cG9pbnRvZnMsc3RyaWRlOnN0cmlkZX0sb2JqLnZhbHVlcz1uZXcgRmxvYXQzMkFycmF5KHRoaXMuZmxhdHRlbih2KSksInNwaGVyZXMiPT09dHlwZXx8c3ByaXRlc18zZHx8KG9iai5idWY9Z2wuY3JlYXRlQnVmZmVyKCksZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsb2JqLmJ1ZiksZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsb2JqLnZhbHVlcyxnbC5TVEFUSUNfRFJBVyksb2JqLmlidWY9QXJyYXkob2JqLnBhc3Nlcyksb2JqLmlidWZbMF09Z2wuY3JlYXRlQnVmZmVyKCksZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixvYmouaWJ1ZlswXSksZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixvYmouZlswXSxnbFtkcmF3dHlwZV0pLGlzX3R3b3NpZGVkJiYob2JqLmlidWZbMV09Z2wuY3JlYXRlQnVmZmVyKCksZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixvYmouaWJ1ZlsxXSksZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixvYmouZlsxXSxnbFtkcmF3dHlwZV0pKSksc3ByaXRlc18zZHx8KG9iai5tdk1hdExvYz1nbC5nZXRVbmlmb3JtTG9jYXRpb24ob2JqLnByb2csIm12TWF0cml4Iiksb2JqLnByTWF0TG9jPWdsLmdldFVuaWZvcm1Mb2NhdGlvbihvYmoucHJvZywicHJNYXRyaXgiKSksZml4ZWRfc2l6ZSYmKG9iai50ZXh0U2NhbGVMb2M9Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKG9iai5wcm9nLCJ0ZXh0U2NhbGUiKSksaXNfbGl0JiYhc3ByaXRlc18zZCYmKG9iai5ub3JtTWF0TG9jPWdsLmdldFVuaWZvcm1Mb2NhdGlvbihvYmoucHJvZywibm9ybU1hdHJpeCIpKSxpc190d29zaWRlZCYmKG9iai5mcm9udExvYz1nbC5nZXRVbmlmb3JtTG9jYXRpb24ob2JqLnByb2csImZyb250IikpfX19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKGVsLHgpe2lmKHRoaXMudGV4dHVyZUNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSx0aGlzLnRleHR1cmVDYW52YXMuc3R5bGUuZGlzcGxheT0iYmxvY2siLHRoaXMuc2NlbmU9eCx0aGlzLm5vcm1NYXRyaXg9bmV3IENhbnZhc01hdHJpeDQsdGhpcy5zYXZlTWF0PXt9LHRoaXMuZGlzdGFuY2U9bnVsbCx0aGlzLnBvc0xvYz0wLHRoaXMuY29sTG9jPTEsZWwmJihlbC5yZ2xpbnN0YW5jZT10aGlzLHRoaXMuZWw9ZWwsdGhpcy53ZWJHTG9wdGlvbnM9ZWwucmdsaW5zdGFuY2Uuc2NlbmUud2ViR0xvcHRpb25zLHRoaXMuaW5pdENhbnZhcygpKSwidW5kZWZpbmVkIiE9dHlwZW9mIFNoaW55KXt2YXIgc2VsZj10aGlzO1NoaW55LmFkZEN1c3RvbU1lc3NhZ2VIYW5kbGVyKCJzaGlueUdldFBhcjNkIixmdW5jdGlvbihtZXNzYWdlKXt2YXIgaSxwYXJhbSxzdWJzY2VuZT1zZWxmLmdldE9iaihtZXNzYWdlLnN1YnNjZW5lKSxwYXJhbWV0ZXJzPVtdLmNvbmNhdChtZXNzYWdlLnBhcmFtZXRlcnMpLHJlc3VsdD17dGFnOm1lc3NhZ2UudGFnLHN1YnNjZW5lOm1lc3NhZ2Uuc3Vic2NlbmV9O2lmKCJ1bmRlZmluZWQiIT10eXBlb2Ygc3Vic2NlbmUpZm9yKGk9MDtpPHBhcmFtZXRlcnMubGVuZ3RoO2krKylwYXJhbT1wYXJhbWV0ZXJzW2ldLHJlc3VsdFtwYXJhbV09c3Vic2NlbmUucGFyM2RbcGFyYW1dO2Vsc2UgY29uc29sZS5sb2coInN1YnNjZW5lICIrbWVzc2FnZS5zdWJzY2VuZSsiIHVuZGVmaW5lZC4iKTtTaGlueS5zZXRJbnB1dFZhbHVlKCJwYXIzZDpzaGlueVBhcjNkIixyZXN1bHQse3ByaW9yaXR5OiJldmVudCJ9KX0pLFNoaW55LmFkZEN1c3RvbU1lc3NhZ2VIYW5kbGVyKCJzaGlueVNldFBhcjNkIixmdW5jdGlvbihtZXNzYWdlKXt2YXIgcGFyYW09bWVzc2FnZS5wYXJhbWV0ZXIsc3Vic2NlbmU9c2VsZi5nZXRPYmoobWVzc2FnZS5zdWJzY2VuZSk7InVuZGVmaW5lZCIhPXR5cGVvZiBzdWJzY2VuZT8oc3Vic2NlbmUucGFyM2RbcGFyYW1dPW1lc3NhZ2UudmFsdWUsc3Vic2NlbmUuaW5pdGlhbGl6ZWQ9ITEsc2VsZi5kcmF3U2NlbmUoKSk6Y29uc29sZS5sb2coInN1YnNjZW5lICIrbWVzc2FnZS5zdWJzY2VuZSsiIHVuZGVmaW5lZC4iKX0pLFNoaW55LmFkZEN1c3RvbU1lc3NhZ2VIYW5kbGVyKCJyZXNldEJydXNoIixmdW5jdGlvbihtZXNzYWdlKXttZXNzYWdlPT09c2VsZi5zY2VuZS5zZWxlY3Rpb25JbnB1dCYmKHNlbGYuY2xlYXJCcnVzaChudWxsKSxzZWxmLnJlY29yZFNlbGVjdGlvbigwKSl9KX19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5yZXN0YXJ0Q2FudmFzPWZ1bmN0aW9uKCl7dmFyIG5ld2NhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSxzZWxmPXRoaXM7Zm9yKG5ld2NhbnZhcy53aWR0aD10aGlzLmVsLndpZHRoLG5ld2NhbnZhcy5oZWlnaHQ9dGhpcy5lbC5oZWlnaHQsbmV3Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIndlYmdsY29udGV4dHJlc3RvcmVkIix0aGlzLm9uQ29udGV4dFJlc3RvcmVkLCExKSxuZXdjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigid2ViZ2xjb250ZXh0bG9zdCIsdGhpcy5vbkNvbnRleHRMb3N0LCExKTt0aGlzLmVsLmZpcnN0Q2hpbGQ7KXRoaXMuZWwucmVtb3ZlQ2hpbGQodGhpcy5lbC5maXJzdENoaWxkKTt0aGlzLmVsLmFwcGVuZENoaWxkKG5ld2NhbnZhcyksdGhpcy5jYW52YXM9bmV3Y2FudmFzLHRoaXMuc2V0TW91c2VIYW5kbGVycygpLHRoaXMuZ2wmJk9iamVjdC5rZXlzKHRoaXMuc2NlbmUub2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbihrZXkpe3NlbGYuZ2V0T2JqKHBhcnNlSW50KGtleSwxMCkpLnRleHR1cmU9dm9pZCAwfSksdGhpcy5nbD1udWxsfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuaW5pdENhbnZhcz1mdW5jdGlvbigpe3RoaXMucmVzdGFydENhbnZhcygpO3ZhciBvYmpzPXRoaXMuc2NlbmUub2JqZWN0cyxzZWxmPXRoaXM7aWYoT2JqZWN0LmtleXMob2JqcykuZm9yRWFjaChmdW5jdGlvbihrZXkpe3NlbGYuaW5pdFN1YnNjZW5lKHBhcnNlSW50KGtleSwxMCkpfSksdGhpcy5zZXRNb3VzZUhhbmRsZXJzKCksdGhpcy5vbkNvbnRleHRSZXN0b3JlZD1mdW5jdGlvbigpe3NlbGYuaW5pdEdMKCksc2VsZi5kcmF3U2NlbmUoKX0sdGhpcy5vbkNvbnRleHRMb3N0PWZ1bmN0aW9uKGV2ZW50KXtzZWxmLmRyYXdpbmd8fCh0aGlzLmdsPW51bGwpLGV2ZW50LnByZXZlbnREZWZhdWx0KCl9LHRoaXMuaW5pdEdMMCgpLHRoaXMubGF6eUxvYWRTY2VuZT1mdW5jdGlvbigpeyJ1bmRlZmluZWQiPT10eXBlb2Ygc2VsZi5zbGlkZSYmKHNlbGYuc2xpZGU9c2VsZi5nZXRTbGlkZSgpKSxzZWxmLmlzSW5Ccm93c2VyVmlld3BvcnQoKSYmKCghc2VsZi5nbHx8c2VsZi5nbC5pc0NvbnRleHRMb3N0KCkpJiZzZWxmLmluaXRHTCgpLHNlbGYuZHJhd1NjZW5lKCkpfSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdGhpcy5sYXp5TG9hZFNjZW5lLCExKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsdGhpcy5sYXp5TG9hZFNjZW5lLCExKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIix0aGlzLmxhenlMb2FkU2NlbmUsITEpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLHRoaXMubGF6eUxvYWRTY2VuZSwhMSksdGhpcy5zbGlkZT10aGlzLmdldFNsaWRlKCksdGhpcy5zbGlkZSYmKCJ1bmRlZmluZWQiPT10eXBlb2YgdGhpcy5zbGlkZS5yZ2w/dGhpcy5zbGlkZS5yZ2w9W3RoaXNdOnRoaXMuc2xpZGUucmdsLnB1c2godGhpcyksdGhpcy5zY2VuZS5jb250ZXh0LnJtYXJrZG93bikpaWYoImlvc2xpZGVzX3ByZXNlbnRhdGlvbiI9PT10aGlzLnNjZW5lLmNvbnRleHQucm1hcmtkb3duKXRoaXMuc2xpZGUuc2V0QXR0cmlidXRlKCJzbGlkZWVudGVyIiwidGhpcy5yZ2wuZm9yRWFjaChmdW5jdGlvbihzY2VuZSkgeyBzY2VuZS5sYXp5TG9hZFNjZW5lLmNhbGwod2luZG93KTt9KSIpO2Vsc2UgaWYoInNsaWR5X3ByZXNlbnRhdGlvbiI9PT10aGlzLnNjZW5lLmNvbnRleHQucm1hcmtkb3duKXt2YXIgTXV0YXRpb25PYnNlcnZlcj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5Nb3pNdXRhdGlvbk9ic2VydmVyLG9ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucyl7bXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24oKXtzZWxmLnNsaWRlLnJnbC5mb3JFYWNoKGZ1bmN0aW9uKHNjZW5lKXtzY2VuZS5sYXp5TG9hZFNjZW5lLmNhbGwod2luZG93KX0pfSl9KTtvYnNlcnZlci5vYnNlcnZlKHRoaXMuc2xpZGUse2F0dHJpYnV0ZXM6ITAsYXR0cmlidXRlRmlsdGVyOlsiY2xhc3MiXX0pfX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmdldFBpZWNlcz1mdW5jdGlvbihjb250ZXh0LG9iamlkLHN1YmlkLG9iail7dmFyIGRlcHRoLHosdyxpLG49b2JqLmNlbnRlcnMubGVuZ3RoLHJlc3VsdD1uZXcgQXJyYXkobik7Zm9yKGNvbnRleHQ9Y29udGV4dC5zbGljZSgpLGk9MDtuPmk7aSsrKXo9dGhpcy5wcm12TWF0cml4Lm0xMypvYmouY2VudGVyc1tpXVswXSt0aGlzLnBybXZNYXRyaXgubTIzKm9iai5jZW50ZXJzW2ldWzFdK3RoaXMucHJtdk1hdHJpeC5tMzMqb2JqLmNlbnRlcnNbaV1bMl0rdGhpcy5wcm12TWF0cml4Lm00Myx3PXRoaXMucHJtdk1hdHJpeC5tMTQqb2JqLmNlbnRlcnNbaV1bMF0rdGhpcy5wcm12TWF0cml4Lm0yNCpvYmouY2VudGVyc1tpXVsxXSt0aGlzLnBybXZNYXRyaXgubTM0Km9iai5jZW50ZXJzW2ldWzJdK3RoaXMucHJtdk1hdHJpeC5tNDQsZGVwdGg9ei93LHJlc3VsdFtpXT17Y29udGV4dDpjb250ZXh0LG9iamlkOm9iamlkLHN1YmlkOnN1YmlkLGluZGV4OmksZGVwdGg6ZGVwdGh9O3JldHVybiByZXN1bHR9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5nZXRTcGhlcmVQaWVjZXM9ZnVuY3Rpb24oY29udGV4dCxzdWJpZCxvYmope3JldHVybiBvYmouZmFzdFRyYW5zcGFyZW5jeT8wPT09c3ViaWQ/dGhpcy5nZXRQaWVjZXMoY29udGV4dCxvYmouaWQsLTEsb2JqKTpbXTp0aGlzLmdldFBpZWNlcyhjb250ZXh0LG9iai5pZCxzdWJpZCx0aGlzLnNwaGVyZSl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5tZXJnZVBpZWNlcz1mdW5jdGlvbihwaWVjZXMpe3ZhciByZXN1bHQ9W107aWYocGllY2VzLmxlbmd0aD4wKXt2YXIgaSx0aGlzY29udGV4dD1waWVjZXNbMF0uY29udGV4dCx0aGlzb2JqaWQ9cGllY2VzWzBdLm9iamlkLHRoaXNzdWJpZD1waWVjZXNbMF0uc3ViaWQsaW5kaWNlcz1bXTtmb3IoaT0wO2k8cGllY2VzLmxlbmd0aDtpKyspKHBpZWNlc1tpXS5jb250ZXh0IT09dGhpc2NvbnRleHR8fHBpZWNlc1tpXS5vYmppZCE9PXRoaXNvYmppZHx8cGllY2VzW2ldLnN1YmlkIT09dGhpc3N1YmlkKSYmKHJlc3VsdC5wdXNoKHtjb250ZXh0OnRoaXNjb250ZXh0LG9iamlkOnRoaXNvYmppZCxzdWJpZDp0aGlzc3ViaWQsaW5kaWNlczppbmRpY2VzfSksdGhpc2NvbnRleHQ9cGllY2VzW2ldLmNvbnRleHQsdGhpc29iamlkPXBpZWNlc1tpXS5vYmppZCx0aGlzc3ViaWQ9cGllY2VzW2ldLnN1YmlkLGluZGljZXM9W10pLGluZGljZXMucHVzaChwaWVjZXNbaV0uaW5kZXgpO3Jlc3VsdC5wdXNoKHtjb250ZXh0OnRoaXNjb250ZXh0LG9iamlkOnRoaXNvYmppZCxzdWJpZDp0aGlzc3ViaWQsaW5kaWNlczppbmRpY2VzfSl9cmV0dXJuIHJlc3VsdH0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLnNvcnRQaWVjZXM9ZnVuY3Rpb24ocGllY2VzKXt2YXIgY29tcGFyZT1mdW5jdGlvbihpLGope3ZhciBkaWZmPWouZGVwdGgtaS5kZXB0aDtpZigwPT09ZGlmZil7dmFyIGMxPWouY29udGV4dC5zbGljZSgpLGMyPWkuY29udGV4dC5zbGljZSgpO2ZvcihkaWZmPWMxLmxlbmd0aC1jMi5sZW5ndGg7MD09PWRpZmYmJmMxLmxlbmd0aD4wOylkaWZmPWMxLnBvcCgpLWMyLnBvcCgpOzA9PT1kaWZmJiYoZGlmZj1qLm9iamlkLWkub2JqaWQpLDA9PT1kaWZmJiYoZGlmZj1qLnN1YmlkLWkuc3ViaWQpfXJldHVybiBkaWZmfSxyZXN1bHQ9W107cmV0dXJuIHBpZWNlcy5sZW5ndGgmJihyZXN1bHQ9cGllY2VzLnNvcnQoY29tcGFyZSkpLHJlc3VsdH0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLnN0YXJ0RHJhd2luZz1mdW5jdGlvbigpe3ZhciB2YWx1ZT10aGlzLmRyYXdpbmc7cmV0dXJuIHRoaXMuZHJhd2luZz0hMCx2YWx1ZX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLnN0b3BEcmF3aW5nPWZ1bmN0aW9uKHNhdmVkKXt0aGlzLmRyYXdpbmc9c2F2ZWQsIXNhdmVkJiZ0aGlzLmdsJiZ0aGlzLmdsLmlzQ29udGV4dExvc3QoKSYmdGhpcy5yZXN0YXJ0Q2FudmFzKCl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5wbGFuZVVwZGF0ZVRyaWFuZ2xlcz1mdW5jdGlvbihvYmosYmJveCl7dmFyIHgseHJvdyxlbGVtLEEsZCxuaGl0cyxpLGosayx1LHYsdyxpbnRlcnNlY3Qsd2hpY2gsdjAsdjIsdngscmV2ZXJzZSxwZXJtcz1bWzAsMCwxXSxbMSwyLDJdLFsyLDEsMF1dLGZhY2UxPVtdLGZhY2UyPVtdLG5vcm1hbHM9W10sblBsYW5lcz1vYmoubm9ybWFscy5sZW5ndGg7Zm9yKG9iai5iYm94PWJib3gsb2JqLnZlcnRpY2VzPVtdLG9iai5pbml0aWFsaXplZD0hMSxlbGVtPTA7blBsYW5lcz5lbGVtO2VsZW0rKyl7Zm9yKHg9W10sQT1vYmoubm9ybWFsc1tlbGVtXSxkPW9iai5vZmZzZXRzW2VsZW1dWzBdLG5oaXRzPTAsaT0wOzM+aTtpKyspZm9yKGo9MDsyPmo7aisrKWZvcihrPTA7Mj5rO2srKyl1PXBlcm1zWzBdW2ldLHY9cGVybXNbMV1baV0sdz1wZXJtc1syXVtpXSwwIT09QVt3XSYmKGludGVyc2VjdD0tKGQrQVt1XSpiYm94W2orMip1XStBW3ZdKmJib3hbaysyKnZdKS9BW3ddLGJib3hbMip3XTxpbnRlcnNlY3QmJmludGVyc2VjdDxiYm94WzErMip3XSYmKHhyb3c9W10seHJvd1t1XT1iYm94W2orMip1XSx4cm93W3ZdPWJib3hbaysyKnZdLHhyb3dbd109aW50ZXJzZWN0LHgucHVzaCh4cm93KSxmYWNlMVtuaGl0c109aisyKnUsZmFjZTJbbmhpdHNdPWsrMip2LG5oaXRzKyspKTtpZihuaGl0cz4zKWZvcihpPTA7bmhpdHMtMj5pO2krKyl7Zm9yKHdoaWNoPTAsaj1pKzE7bmhpdHM+ajtqKyspaWYoZmFjZTFbaV09PT1mYWNlMVtqXXx8ZmFjZTFbaV09PT1mYWNlMltqXXx8ZmFjZTJbaV09PT1mYWNlMVtqXXx8ZmFjZTJbaV09PT1mYWNlMltqXSl7d2hpY2g9ajticmVha313aGljaD5pKzEmJih0aGlzLnN3YXAoeCxpKzEsd2hpY2gpLHRoaXMuc3dhcChmYWNlMSxpKzEsd2hpY2gpLHRoaXMuc3dhcChmYWNlMixpKzEsd2hpY2gpKX1pZihuaGl0cz49Mylmb3IodjA9W3hbMF1bMF0teFsxXVswXSx4WzBdWzFdLXhbMV1bMV0seFswXVsyXS14WzFdWzJdXSx2Mj1beFsyXVswXS14WzFdWzBdLHhbMl1bMV0teFsxXVsxXSx4WzJdWzJdLXhbMV1bMl1dLHZ4PXRoaXMueHByb2QodjAsdjIpLHJldmVyc2U9dGhpcy5kb3Rwcm9kKHZ4LEEpPjAsaT0wO25oaXRzLTI+aTtpKyspZm9yKG9iai52ZXJ0aWNlcy5wdXNoKHhbMF0pLG5vcm1hbHMucHVzaChBKSxqPTE7Mz5qO2orKylvYmoudmVydGljZXMucHVzaCh4W2krKHJldmVyc2U/My1qOmopXSksbm9ybWFscy5wdXNoKEEpfW9iai5wbm9ybWFscz1ub3JtYWxzfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUubW9kZTR0eXBlPXtwb2ludHM6IlBPSU5UUyIsbGluZXN0cmlwOiJMSU5FX1NUUklQIixhYmNsaW5lczoiTElORVMiLGxpbmVzOiJMSU5FUyIsc3ByaXRlczoiVFJJQU5HTEVTIixwbGFuZXM6IlRSSUFOR0xFUyIsdGV4dDoiVFJJQU5HTEVTIixxdWFkczoiVFJJQU5HTEVTIixzdXJmYWNlOiJUUklBTkdMRVMiLHRyaWFuZ2xlczoiVFJJQU5HTEVTIixzcGhlcmU6IlRSSUFOR0xFUyJ9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kaXNhYmxlQXJyYXlzPWZ1bmN0aW9uKG9iaixlbmFibGVkKXt2YXIgaSxhdHRyLGdsPXRoaXMuZ2x8fHRoaXMuaW5pdEdMKCksb2JqTG9jcz1bIm5vcm1Mb2MiLCJ0ZXhMb2MiLCJvZnNMb2MiLCJwb2ludExvYyIsIm5leHRMb2MiXSx0aGlzTG9jcz1bInBvc0xvYyIsImNvbExvYyJdO2ZvcihpPTA7aTxvYmpMb2NzLmxlbmd0aDtpKyspZW5hYmxlZFtvYmpMb2NzW2ldXSYmZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KG9ialtvYmpMb2NzW2ldXSk7Zm9yKGk9MDtpPHRoaXNMb2NzLmxlbmd0aDtpKyspZW5hYmxlZFt0aGlzTG9jc1tpXV0mJmdsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzW29iakxvY3NbaV1dKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG9iai51c2VyQXR0cmlidXRlcylmb3IoYXR0ciBpbiBvYmoudXNlckF0dHJpYlNpemVzKWdsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShvYmoudXNlckF0dHJpYkxvY2F0aW9uc1thdHRyXSl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kb1N0YXJ0U2NlbmU9ZnVuY3Rpb24oKXt2YXIgZ2w9dGhpcy5nbHx8dGhpcy5pbml0R0woKTsKZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpLGdsLmRlcHRoRnVuYyhnbC5MRVFVQUwpLGdsLmNsZWFyRGVwdGgoMSksZ2wuY2xlYXJDb2xvcigxLDEsMSwxKSxnbC5kZXB0aE1hc2soITApLGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVR8Z2wuREVQVEhfQlVGRkVSX0JJVCl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kb0RlcHRoVGVzdD1mdW5jdGlvbihvYmope3ZhciBnbD10aGlzLmdsLHRlc3RzPXtuZXZlcjpnbC5ORVZFUixsZXNzOmdsLkxFU1MsZXF1YWw6Z2wuRVFVQUwsbGVxdWFsOmdsLkxFUVVBTCxncmVhdGVyOmdsLkdSRUFURVIsbm90ZXF1YWw6Z2wuTk9URVFVQUwsZ2VxdWFsOmdsLkdFUVVBTCxhbHdheXM6Z2wuQUxXQVlTfSx0ZXN0PXRlc3RzW3RoaXMuZ2V0T2JqTWF0ZXJpYWwob2JqLCJkZXB0aF90ZXN0IildO2dsLmRlcHRoRnVuYyh0ZXN0KX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRvUG9seWdvbk9mZnNldD1mdW5jdGlvbihvYmope3ZhciBnbD10aGlzLmdsOyJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLnBvbHlnb25fb2Zmc2V0PyhnbC5wb2x5Z29uT2Zmc2V0KG9iai5wb2x5Z29uX29mZnNldFswXSxvYmoucG9seWdvbl9vZmZzZXRbMV0pLGdsLmVuYWJsZShnbC5QT0xZR09OX09GRlNFVF9GSUxMKSk6Z2wuZGlzYWJsZShnbC5QT0xZR09OX09GRlNFVF9GSUxMKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRvQ2xpcHBpbmc9ZnVuY3Rpb24ob2JqLHN1YnNjZW5lKXt2YXIgY2xpcCxpLGosZ2w9dGhpcy5nbCxjbGlwY2hlY2s9MCxjbGlwcGxhbmVpZHM9c3Vic2NlbmUuY2xpcHBsYW5lcztmb3IoaT0wO2k8Y2xpcHBsYW5laWRzLmxlbmd0aDtpKyspe2ZvcihjbGlwPXRoaXMuZ2V0T2JqKGNsaXBwbGFuZWlkc1tpXSksaj0wO2o8Y2xpcC5vZmZzZXRzLmxlbmd0aDtqKyspZ2wudW5pZm9ybTRmdihvYmouY2xpcExvY1tjbGlwY2hlY2sral0sY2xpcC5JTVZDbGlwW2pdKTtjbGlwY2hlY2srPWNsaXAub2Zmc2V0cy5sZW5ndGh9aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBvYmouY2xpcExvYylmb3IoaT1jbGlwY2hlY2s7aTxvYmouY2xpcExvYy5sZW5ndGg7aSsrKWdsLnVuaWZvcm00ZihvYmouY2xpcExvY1tpXSwwLDAsMCwwKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRvTGlnaHRpbmc9ZnVuY3Rpb24ob2JqLHN1YnNjZW5lKXt2YXIgaSxsaWdodCxnbD10aGlzLmdsO2ZvcihnbC51bmlmb3JtTWF0cml4NGZ2KG9iai5ub3JtTWF0TG9jLCExLG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ub3JtTWF0cml4LmdldEFzQXJyYXkoKSkpLGdsLnVuaWZvcm0zZnYob2JqLmVtaXNzaW9uTG9jLG9iai5lbWlzc2lvbiksZ2wudW5pZm9ybTFmKG9iai5zaGluaW5lc3NMb2Msb2JqLnNoaW5pbmVzcyksaT0wO2k8c3Vic2NlbmUubGlnaHRzLmxlbmd0aDtpKyspbGlnaHQ9dGhpcy5nZXRPYmooc3Vic2NlbmUubGlnaHRzW2ldKSxsaWdodC5pbml0aWFsaXplZHx8dGhpcy5pbml0T2JqKGxpZ2h0LmlkKSxnbC51bmlmb3JtM2Z2KG9iai5hbWJpZW50TG9jW2ldLHRoaXMuY29tcG9uZW50UHJvZHVjdChsaWdodC5hbWJpZW50LG9iai5hbWJpZW50KSksZ2wudW5pZm9ybTNmdihvYmouc3BlY3VsYXJMb2NbaV0sdGhpcy5jb21wb25lbnRQcm9kdWN0KGxpZ2h0LnNwZWN1bGFyLG9iai5zcGVjdWxhcikpLGdsLnVuaWZvcm0zZnYob2JqLmRpZmZ1c2VMb2NbaV0sbGlnaHQuZGlmZnVzZSksZ2wudW5pZm9ybTNmdihvYmoubGlnaHREaXJMb2NbaV0sbGlnaHQubGlnaHREaXIpLGdsLnVuaWZvcm0xaShvYmoudmlld3BvaW50TG9jW2ldLGxpZ2h0LnZpZXdwb2ludCksZ2wudW5pZm9ybTFpKG9iai5maW5pdGVMb2NbaV0sbGlnaHQuZmluaXRlKTtmb3IoaT1zdWJzY2VuZS5saWdodHMubGVuZ3RoO2k8b2JqLm5saWdodHM7aSsrKWdsLnVuaWZvcm0zZihvYmouYW1iaWVudExvY1tpXSwwLDAsMCksZ2wudW5pZm9ybTNmKG9iai5zcGVjdWxhckxvY1tpXSwwLDAsMCksZ2wudW5pZm9ybTNmKG9iai5kaWZmdXNlTG9jW2ldLDAsMCwwKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRvQ29sb3JzPWZ1bmN0aW9uKG9iail7dmFyIGdsPXRoaXMuZ2w7cmV0dXJuIDE9PT1vYmouY29sb3JDb3VudD8oZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuY29sTG9jKSxnbC52ZXJ0ZXhBdHRyaWI0ZnYodGhpcy5jb2xMb2MsbmV3IEZsb2F0MzJBcnJheShvYmoub25lY29sb3IpKSwhMSk6KGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuY29sTG9jKSxnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuY29sTG9jLDQsZ2wuRkxPQVQsITEsNCpvYmoudk9mZnNldHMuc3RyaWRlLDQqb2JqLnZPZmZzZXRzLmNvZnMpLCEwKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRvTm9ybWFscz1mdW5jdGlvbihvYmope3ZhciBnbD10aGlzLmdsO3JldHVybiBvYmoudk9mZnNldHMubm9mcz49MD8oZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkob2JqLm5vcm1Mb2MpLGdsLnZlcnRleEF0dHJpYlBvaW50ZXIob2JqLm5vcm1Mb2MsMyxnbC5GTE9BVCwhMSw0Km9iai52T2Zmc2V0cy5zdHJpZGUsNCpvYmoudk9mZnNldHMubm9mcyksITApOiExfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZG9UZXh0dXJlPWZ1bmN0aW9uKG9iail7dmFyIGdsPXRoaXMuZ2wsaXNfc3BoZXJlcz0ic3BoZXJlcyI9PT1vYmoudHlwZTtyZXR1cm4gZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkob2JqLnRleExvYyksaXNfc3BoZXJlcz9nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKG9iai50ZXhMb2MsMixnbC5GTE9BVCwhMSw0KnRoaXMuc3BoZXJlLnZPZmZzZXRzLnN0cmlkZSw0KnRoaXMuc3BoZXJlLnZPZmZzZXRzLnRvZnMpOmdsLnZlcnRleEF0dHJpYlBvaW50ZXIob2JqLnRleExvYywyLGdsLkZMT0FULCExLDQqb2JqLnZPZmZzZXRzLnN0cmlkZSw0Km9iai52T2Zmc2V0cy50b2ZzKSxnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKSxnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELG9iai50ZXh0dXJlKSxnbC51bmlmb3JtMWkob2JqLnNhbXBsZXIsMCksITB9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kb1VzZXJBdHRyaWJ1dGVzPWZ1bmN0aW9uKG9iail7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBvYmoudXNlckF0dHJpYnV0ZXMpe3ZhciBnbD10aGlzLmdsO2Zvcih2YXIgYXR0ciBpbiBvYmoudXNlckF0dHJpYlNpemVzKWdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KG9iai51c2VyQXR0cmliTG9jYXRpb25zW2F0dHJdKSxnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKG9iai51c2VyQXR0cmliTG9jYXRpb25zW2F0dHJdLG9iai51c2VyQXR0cmliU2l6ZXNbYXR0cl0sZ2wuRkxPQVQsITEsNCpvYmoudk9mZnNldHMuc3RyaWRlLDQqb2JqLnVzZXJBdHRyaWJPZmZzZXRzW2F0dHJdKX19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kb1VzZXJVbmlmb3Jtcz1mdW5jdGlvbihvYmope2lmKCJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLnVzZXJVbmlmb3Jtcyl7dmFyIGdsPXRoaXMuZ2w7Zm9yKHZhciBhdHRyIGluIG9iai51c2VyVW5pZm9ybUxvY2F0aW9ucyl7dmFyIGxvYz1vYmoudXNlclVuaWZvcm1Mb2NhdGlvbnNbYXR0cl07aWYobnVsbCE9PWxvYyl7dmFyIHVuaWZvcm09b2JqLnVzZXJVbmlmb3Jtc1thdHRyXTtpZigidW5kZWZpbmVkIj09dHlwZW9mIHVuaWZvcm0ubGVuZ3RoKWdsLnVuaWZvcm0xZihsb2MsdW5pZm9ybSk7ZWxzZSBpZigidW5kZWZpbmVkIj09dHlwZW9mIHVuaWZvcm1bMF0ubGVuZ3RoKXN3aXRjaCh1bmlmb3JtPW5ldyBGbG9hdDMyQXJyYXkodW5pZm9ybSksdW5pZm9ybS5sZW5ndGgpe2Nhc2UgMjpnbC51bmlmb3JtMmZ2KGxvYyx1bmlmb3JtKTticmVhaztjYXNlIDM6Z2wudW5pZm9ybTNmdihsb2MsdW5pZm9ybSk7YnJlYWs7Y2FzZSA0OmdsLnVuaWZvcm00ZnYobG9jLHVuaWZvcm0pO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKCJiYWQgdW5pZm9ybSBsZW5ndGgiKX1lbHNlIDQ9PT11bmlmb3JtLmxlbmd0aCYmND09PXVuaWZvcm1bMF0ubGVuZ3RoP2dsLnVuaWZvcm1NYXRyaXg0ZnYobG9jLCExLG5ldyBGbG9hdDMyQXJyYXkodW5pZm9ybS5nZXRBc0FycmF5KCkpKTpjb25zb2xlLndhcm4oInVuc3VwcG9ydGVkIHVuaWZvcm0gbWF0cml4Iil9fX19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kb0xvYWRJbmRpY2VzPWZ1bmN0aW9uKG9iaixwYXNzLGluZGljZXMpe3ZhciBmbmV3LHN0ZXAsZ2w9dGhpcy5nbCxmPW9iai5mW3Bhc3NdLHR5cGU9b2JqLnR5cGUsZmF0X2xpbmVzPXRoaXMuaXNTZXQob2JqLmZsYWdzLHRoaXMuZl9mYXRfbGluZXMpO3N3aXRjaCh0eXBlKXtjYXNlInBvaW50cyI6c3RlcD0xO2JyZWFrO2Nhc2UiYWJjbGluZXMiOmNhc2UibGluZXMiOnN0ZXA9ZmF0X2xpbmVzPzY6MjticmVhaztjYXNlImxpbmVzdHJpcCI6c3RlcD1mYXRfbGluZXM/NjoxO2JyZWFrO2Nhc2Uic3BoZXJlIjpjYXNlInBsYW5lcyI6Y2FzZSJ0cmlhbmdsZXMiOnN0ZXA9MzticmVhaztjYXNlInRleHQiOmNhc2Uic3ByaXRlcyI6Y2FzZSJxdWFkcyI6Y2FzZSJzdXJmYWNlIjpzdGVwPTY7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gY29uc29sZS5lcnJvcigibG9hZEluZGljZXMgZm9yICIrdHlwZSksMH1mbmV3PW9iai5pbmRleF91aW50P25ldyBVaW50MzJBcnJheShzdGVwKmluZGljZXMubGVuZ3RoKTpuZXcgVWludDE2QXJyYXkoc3RlcCppbmRpY2VzLmxlbmd0aCk7Zm9yKHZhciBpPTA7aTxpbmRpY2VzLmxlbmd0aDtpKyspZm9yKHZhciBqPTA7c3RlcD5qO2orKylmbmV3W3N0ZXAqaStqXT1mW3N0ZXAqaW5kaWNlc1tpXStqXTtyZXR1cm4gZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixmbmV3LGdsLkRZTkFNSUNfRFJBVyksZm5ldy5sZW5ndGh9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kb01hc2tpbmc9ZnVuY3Rpb24obWFzayl7dmFyIGdsPXRoaXMuZ2w7Z2wuZGVwdGhNYXNrKG1hc2spfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZG9CbGVuZGluZz1mdW5jdGlvbihibGVuZCl7dmFyIGdsPXRoaXMuZ2w7YmxlbmQ/KGdsLmJsZW5kRnVuY1NlcGFyYXRlKGdsLlNSQ19BTFBIQSxnbC5PTkVfTUlOVVNfU1JDX0FMUEhBLGdsLk9ORSxnbC5PTkUpLGdsLmVuYWJsZShnbC5CTEVORCkpOmdsLmRpc2FibGUoZ2wuQkxFTkQpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZG9Gb2c9ZnVuY3Rpb24ob2JqLHN1YnNjZW5lKXt2YXIgZm9nbW9kZSxjb2xvcixnbD10aGlzLmdsLG9ic2VydmVyPXN1YnNjZW5lLnBhcjNkLm9ic2VydmVyWzJdLHNpbnRoZXRhPU1hdGguc2luKHN1YnNjZW5lLnBhcjNkLkZPVipNYXRoLlBJLzE4MC8yKSxwYXJtcz1bdGhpcy5mcnVzdHVtLm5lYXItMipvYnNlcnZlcix0aGlzLmZydXN0dW0uZmFyLTIqb2JzZXJ2ZXIsdGhpcy5mb2dTY2FsZSwoMS1zaW50aGV0YSkvKDErc2ludGhldGEpXTtzd2l0Y2goInVuZGVmaW5lZCI9PXR5cGVvZiB0aGlzLmZvZ1R5cGUmJih0aGlzLmZvZ1R5cGU9Im5vbmUiKSwidW5kZWZpbmVkIj09dHlwZW9mIHRoaXMuZm9nU2NhbGUmJihwYXJtc1syXT0xKSwwPT09c2ludGhldGEmJihwYXJtc1szXT0xLzMpLHRoaXMuZm9nVHlwZSl7Y2FzZSJub25lIjpmb2dtb2RlPTA7YnJlYWs7Y2FzZSJsaW5lYXIiOmZvZ21vZGU9MTticmVhaztjYXNlImV4cCI6Zm9nbW9kZT0yO2JyZWFrO2Nhc2UiZXhwMiI6Zm9nbW9kZT0zO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5rbm93biBmb2d0eXBlICIrdGhpcy5mb2dUeXBlKX1nbC51bmlmb3JtMWkob2JqLnVGb2dNb2RlLGZvZ21vZGUpLGNvbG9yPXRoaXMuZm9nQ29sb3IsZ2wudW5pZm9ybTNmKG9iai51Rm9nQ29sb3IsY29sb3JbMF0sY29sb3JbMV0sY29sb3JbMl0pLGdsLnVuaWZvcm00ZihvYmoudUZvZ1Bhcm1zLHBhcm1zWzBdLHBhcm1zWzFdLHBhcm1zWzJdLHBhcm1zWzNdKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRyYXdTaW1wbGU9ZnVuY3Rpb24ob2JqLHN1YnNjZW5lLGNvbnRleHQpe3ZhciBjb3VudCxwYXNzLG1vZGUscG1vZGUsZmxhZ3M9b2JqLmZsYWdzLHR5cGU9b2JqLnR5cGUsaXNfbGl0PXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2lzX2xpdCksaGFzX3RleHR1cmU9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaGFzX3RleHR1cmUpLGlzX3RyYW5zcGFyZW50PXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2lzX3RyYW5zcGFyZW50KSxmaXhlZF9zaXplPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2ZpeGVkX3NpemUpLGZpeGVkX3F1YWRzPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2ZpeGVkX3F1YWRzKSxpc19saW5lcz10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc19saW5lcyksZmF0X2xpbmVzPXRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2ZhdF9saW5lcyksaXNfdHdvc2lkZWQ9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaXNfdHdvc2lkZWQpLGhhc19mb2c9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaGFzX2ZvZyksZ2w9dGhpcy5nbHx8dGhpcy5pbml0R0woKSxlbmFibGVkPXt9O2lmKG9iai5pbml0aWFsaXplZHx8dGhpcy5pbml0T2JqKG9iai5pZCksY291bnQ9b2JqLnZlcnRleENvdW50LCFjb3VudClyZXR1cm5bXTtpZihpc190cmFuc3BhcmVudD1pc190cmFuc3BhcmVudHx8b2JqLnNvbWVIaWRkZW4saXNfdHJhbnNwYXJlbnQmJnRoaXMub3BhcXVlUGFzcylyZXR1cm4gdGhpcy5nZXRQaWVjZXMoY29udGV4dCxvYmouaWQsMCxvYmopO2Zvcih0aGlzLmRvRGVwdGhUZXN0KG9iaiksdGhpcy5kb01hc2tpbmcodGhpcy5nZXRPYmpNYXRlcmlhbChvYmosImRlcHRoX21hc2siKSksZ2wudXNlUHJvZ3JhbShvYmoucHJvZyksdGhpcy5kb1BvbHlnb25PZmZzZXQob2JqKSxnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUixvYmouYnVmKSxnbC51bmlmb3JtTWF0cml4NGZ2KG9iai5wck1hdExvYywhMSxuZXcgRmxvYXQzMkFycmF5KHRoaXMucHJNYXRyaXguZ2V0QXNBcnJheSgpKSksZ2wudW5pZm9ybU1hdHJpeDRmdihvYmoubXZNYXRMb2MsITEsbmV3IEZsb2F0MzJBcnJheSh0aGlzLm12TWF0cml4LmdldEFzQXJyYXkoKSkpLHRoaXMuZG9DbGlwcGluZyhvYmosc3Vic2NlbmUpLGlzX2xpdCYmdGhpcy5kb0xpZ2h0aW5nKG9iaixzdWJzY2VuZSksaGFzX2ZvZyYmdGhpcy5kb0ZvZyhvYmosc3Vic2NlbmUpLHRoaXMuZG9Vc2VyQXR0cmlidXRlcyhvYmopLHRoaXMuZG9Vc2VyVW5pZm9ybXMob2JqKSxnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLnBvc0xvYyksZW5hYmxlZC5wb3NMb2M9ITAsKGhhc190ZXh0dXJlfHwidGV4dCI9PT1vYmoudHlwZSkmJihlbmFibGVkLnRleExvYz10aGlzLmRvVGV4dHVyZShvYmopKSxlbmFibGVkLmNvbExvYz10aGlzLmRvQ29sb3JzKG9iaiksaXNfbGl0JiYoZW5hYmxlZC5ub3JtTG9jPXRoaXMuZG9Ob3JtYWxzKG9iaikpLGZpeGVkX3NpemUmJmdsLnVuaWZvcm0yZihvYmoudGV4dFNjYWxlTG9jLC43NS90aGlzLnZwLndpZHRoLC43NS90aGlzLnZwLmhlaWdodCksZml4ZWRfcXVhZHMmJihnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShvYmoub2ZzTG9jKSxlbmFibGVkLm9mc0xvYz0hMCxnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKG9iai5vZnNMb2MsMixnbC5GTE9BVCwhMSw0Km9iai52T2Zmc2V0cy5zdHJpZGUsNCpvYmoudk9mZnNldHMub29mcykpLHBhc3M9MDtwYXNzPG9iai5wYXNzZXM7cGFzcysrKXBtb2RlPW9iai5wbW9kZVtwYXNzXSwiY3VsbGVkIiE9PXBtb2RlJiYobW9kZT1mYXRfbGluZXMmJihpc19saW5lc3x8ImxpbmVzIj09PXBtb2RlKT8iVFJJQU5HTEVTIjp0aGlzLm1vZGU0dHlwZVt0eXBlXSxpc190d29zaWRlZCYmZ2wudW5pZm9ybTFpKG9iai5mcm9udExvYywwIT09cGFzcyksZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixvYmouaWJ1ZltwYXNzXSksdGhpcy5vcGFxdWVQYXNzPyhjb3VudD1vYmouZltwYXNzXS5sZW5ndGgsZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixvYmouZltwYXNzXSxnbC5TVEFUSUNfRFJBVykpOmNvdW50PSJzcGhlcmUiPT09dHlwZSYmb2JqLmZhc3RUcmFuc3BhcmVuY3k/dGhpcy5kb0xvYWRJbmRpY2VzKG9iaixwYXNzLHRoaXMuc3BoZXJlLmZhc3RwaWVjZXNbMF0uaW5kaWNlcyk6dGhpcy5kb0xvYWRJbmRpY2VzKG9iaixwYXNzLGNvbnRleHQuaW5kaWNlcyksaXNfbGluZXN8fCJsaW5lcyIhPT1wbW9kZXx8ZmF0X2xpbmVzPyJwb2ludHMiPT09cG1vZGUmJihtb2RlPSJQT0lOVFMiKTptb2RlPSJMSU5FUyIsKGlzX2xpbmVzfHwibGluZXMiPT09cG1vZGUpJiZmYXRfbGluZXMmJihnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShvYmoucG9pbnRMb2MpLGVuYWJsZWQucG9pbnRMb2M9ITAsZ2wudmVydGV4QXR0cmliUG9pbnRlcihvYmoucG9pbnRMb2MsMixnbC5GTE9BVCwhMSw0Km9iai52T2Zmc2V0cy5zdHJpZGUsNCpvYmoudk9mZnNldHMucG9pbnRvZnMpLGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KG9iai5uZXh0TG9jKSxlbmFibGVkLm5leHRMb2M9ITAsZ2wudmVydGV4QXR0cmliUG9pbnRlcihvYmoubmV4dExvYywzLGdsLkZMT0FULCExLDQqb2JqLnZPZmZzZXRzLnN0cmlkZSw0Km9iai52T2Zmc2V0cy5uZXh0b2ZzKSxnbC51bmlmb3JtMWYob2JqLmFzcGVjdExvYyx0aGlzLnZwLndpZHRoL3RoaXMudnAuaGVpZ2h0KSxnbC51bmlmb3JtMWYob2JqLmx3ZExvYyx0aGlzLmdldE1hdGVyaWFsKG9iai5pZCwibHdkIikvdGhpcy52cC5oZWlnaHQpKSxnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMucG9zTG9jLDMsZ2wuRkxPQVQsITEsNCpvYmoudk9mZnNldHMuc3RyaWRlLDQqb2JqLnZPZmZzZXRzLnZvZnMpLGdsLmRyYXdFbGVtZW50cyhnbFttb2RlXSxjb3VudCxvYmouaW5kZXhfdWludD9nbC5VTlNJR05FRF9JTlQ6Z2wuVU5TSUdORURfU0hPUlQsMCkpO3JldHVybiB0aGlzLmRpc2FibGVBcnJheXMob2JqLGVuYWJsZWQpLFtdfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZHJhd1BsYW5lcz1mdW5jdGlvbihvYmosc3Vic2NlbmUsY29udGV4dCl7cmV0dXJuIG9iai5iYm94PT09c3Vic2NlbmUucGFyM2QuYmJveCYmb2JqLmluaXRpYWxpemVkfHx0aGlzLnBsYW5lVXBkYXRlVHJpYW5nbGVzKG9iaixzdWJzY2VuZS5wYXIzZC5iYm94KSx0aGlzLmRyYXdTaW1wbGUob2JqLHN1YnNjZW5lLGNvbnRleHQpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZHJhd1NwaGVyZXM9ZnVuY3Rpb24ob2JqLHN1YnNjZW5lLGNvbnRleHQpe3ZhciBzcGhlcmVNVixiYXNlb2ZzLG9mcyxzc2NhbGUsaSxjb3VudCxuYyxzY291bnQsc2NhbGUsaW5kaWNlcyxzcGhlcmVOb3JtLGRyYXdpbmcsaWR4LGZsYWdzPW9iai5mbGFncyxpc190cmFuc3BhcmVudD10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc190cmFuc3BhcmVudCksZW5hYmxlZD17fSxzYXZlTm9ybT1uZXcgQ2FudmFzTWF0cml4NCh0aGlzLm5vcm1NYXRyaXgpLHNhdmVNVj1uZXcgQ2FudmFzTWF0cml4NCh0aGlzLm12TWF0cml4KSxzYXZlUFJNVj1udWxsLHJlc3VsdD1bXTtpZihvYmouaW5pdGlhbGl6ZWR8fHRoaXMuaW5pdE9iaihvYmouaWQpLGNvdW50PW9iai52ZXJ0ZXhDb3VudCwhY291bnQpcmV0dXJuIHJlc3VsdDtpZihpc190cmFuc3BhcmVudD1pc190cmFuc3BhcmVudHx8b2JqLnNvbWVIaWRkZW4sIXRoaXMub3BhcXVlUGFzcyYmIWlzX3RyYW5zcGFyZW50KXJldHVybiByZXN1bHQ7Zm9yKG51bGwhPT10aGlzLnBybXZNYXRyaXgmJihzYXZlUFJNVj1uZXcgQ2FudmFzTWF0cml4NCh0aGlzLnBybXZNYXRyaXgpKSxzY2FsZT1zdWJzY2VuZS5wYXIzZC5zY2FsZSxzcGhlcmVOb3JtPW5ldyBDYW52YXNNYXRyaXg0LHNwaGVyZU5vcm0uc2NhbGUoc2NhbGVbMF0sc2NhbGVbMV0sc2NhbGVbMl0pLHNwaGVyZU5vcm0ubXVsdFJpZ2h0KHNhdmVOb3JtKSx0aGlzLm5vcm1NYXRyaXg9c3BoZXJlTm9ybSx0aGlzLm9wYXF1ZVBhc3MmJihjb250ZXh0PWNvbnRleHQuc2xpY2UoKSxjb250ZXh0LnB1c2gob2JqLmlkKSksZHJhd2luZz10aGlzLm9wYXF1ZVBhc3MhPT1pc190cmFuc3BhcmVudCxkcmF3aW5nJiYobmM9b2JqLmNvbG9yQ291bnQsMT09PW5jJiYodGhpcy5zcGhlcmUub25lY29sb3I9b2JqLm9uZWNvbG9yKSksdGhpcy5pbml0U3BoZXJlRnJvbU9iaihvYmopLCF0aGlzLm9wYXF1ZVBhc3MmJm9iai5mYXN0VHJhbnNwYXJlbmN5JiYidW5kZWZpbmVkIj09dHlwZW9mIHRoaXMuc3BoZXJlLmZhc3RwaWVjZXMmJih0aGlzLnNwaGVyZS5mYXN0cGllY2VzPXRoaXMuZ2V0UGllY2VzKGNvbnRleHQuY29udGV4dCxvYmouaWQsMCx0aGlzLnNwaGVyZSksdGhpcy5zcGhlcmUuZmFzdHBpZWNlcz10aGlzLnNvcnRQaWVjZXModGhpcy5zcGhlcmUuZmFzdHBpZWNlcyksdGhpcy5zcGhlcmUuZmFzdHBpZWNlcz10aGlzLm1lcmdlUGllY2VzKHRoaXMuc3BoZXJlLmZhc3RwaWVjZXMpKSx0aGlzLm9wYXF1ZVBhc3M/c2NvdW50PWNvdW50OihpbmRpY2VzPWNvbnRleHQuaW5kaWNlcyxzY291bnQ9b2JqLmZhc3RUcmFuc3BhcmVuY3k/aW5kaWNlcy5sZW5ndGg6MSksaT0wO3Njb3VudD5pO2krKylzcGhlcmVNVj1uZXcgQ2FudmFzTWF0cml4NCxpZHg9dGhpcy5vcGFxdWVQYXNzP2k6b2JqLmZhc3RUcmFuc3BhcmVuY3k/aW5kaWNlc1tpXTpjb250ZXh0LnN1YmlkLCJ1bmRlZmluZWQiPT10eXBlb2YgaWR4JiZjb25zb2xlLmVycm9yKCJpZHggaXMgdW5kZWZpbmVkIiksYmFzZW9mcz1pZHgqb2JqLnZPZmZzZXRzLnN0cmlkZSxvZnM9YmFzZW9mcytvYmoudk9mZnNldHMucmFkb2ZzLHNzY2FsZT1vYmoudmFsdWVzW29mc10sc3BoZXJlTVYuc2NhbGUoc3NjYWxlL3NjYWxlWzBdLHNzY2FsZS9zY2FsZVsxXSxzc2NhbGUvc2NhbGVbMl0pLHNwaGVyZU1WLnRyYW5zbGF0ZShvYmoudmFsdWVzW2Jhc2VvZnNdLG9iai52YWx1ZXNbYmFzZW9mcysxXSxvYmoudmFsdWVzW2Jhc2VvZnMrMl0pLHNwaGVyZU1WLm11bHRSaWdodChzYXZlTVYpLHRoaXMubXZNYXRyaXg9c3BoZXJlTVYsdGhpcy5zZXRwcm12TWF0cml4KCksZHJhd2luZz8obmM+MSYmKHRoaXMuc3BoZXJlLm9uZWNvbG9yPXRoaXMuZmxhdHRlbihvYmouc3BoZXJlQ29sb3JzW2lkeCVvYmouc3BoZXJlQ29sb3JzLmxlbmd0aF0pKSx0aGlzLmRyYXdTaW1wbGUodGhpcy5zcGhlcmUsc3Vic2NlbmUsY29udGV4dCkpOnJlc3VsdD1yZXN1bHQuY29uY2F0KHRoaXMuZ2V0U3BoZXJlUGllY2VzKGNvbnRleHQsaSxvYmopKTtyZXR1cm4gZHJhd2luZyYmdGhpcy5kaXNhYmxlQXJyYXlzKG9iaixlbmFibGVkKSx0aGlzLm5vcm1NYXRyaXg9c2F2ZU5vcm0sdGhpcy5tdk1hdHJpeD1zYXZlTVYsdGhpcy5wcm12TWF0cml4PXNhdmVQUk1WLHJlc3VsdH0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRyYXdDbGlwcGxhbmVzPWZ1bmN0aW9uKG9iail7Zm9yKHZhciBjb3VudD1vYmoub2Zmc2V0cy5sZW5ndGgsSU1WQ2xpcD1bXSxpPTA7Y291bnQ+aTtpKyspSU1WQ2xpcFtpXT10aGlzLm11bHRNVih0aGlzLmludk1hdHJpeCxvYmoudkNsaXBwbGFuZS5zbGljZSg0KmksNCooaSsxKSkpO3JldHVybiBvYmouSU1WQ2xpcD1JTVZDbGlwLFtdfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZHJhd0xpbmVzdHJpcD1mdW5jdGlvbihvYmosc3Vic2NlbmUsY29udGV4dCl7dmFyIG9yaWdJbmRpY2VzLGksajtpZih0aGlzLm9wYXF1ZVBhc3MpcmV0dXJuIHRoaXMuZHJhd1NpbXBsZShvYmosc3Vic2NlbmUsY29udGV4dCk7Zm9yKG9yaWdJbmRpY2VzPWNvbnRleHQuaW5kaWNlcy5zbGljZSgpLGk9MDtpPG9yaWdJbmRpY2VzLmxlbmd0aDtpKyspaj1vcmlnSW5kaWNlc1tpXSxqPG9iai5jZW50ZXJzLmxlbmd0aC0xJiYoY29udGV4dC5pbmRpY2VzPVtqLGorMV0sdGhpcy5kcmF3U2ltcGxlKG9iaixzdWJzY2VuZSxjb250ZXh0KSk7cmV0dXJuIGNvbnRleHQuaW5kaWNlcz1vcmlnSW5kaWNlcyxbXX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRyYXdTcHJpdGVzPWZ1bmN0aW9uKG9iaixzdWJzY2VuZSxjb250ZXh0KXt2YXIgaSxqLHBvcyxyYWRpdXMsdXNlck1hdHJpeCxmbGFncz1vYmouZmxhZ3MsaXNfdHJhbnNwYXJlbnQ9dGhpcy5pc1NldChmbGFncyx0aGlzLmZfaXNfdHJhbnNwYXJlbnQpLHNwcml0ZXMzZD10aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9zcHJpdGVzXzNkKSxvcmlnTVY9bmV3IENhbnZhc01hdHJpeDQodGhpcy5tdk1hdHJpeCksb3JpZ1BSTVY9bnVsbCxyZXN1bHQ9W107aWYoIXNwcml0ZXMzZClyZXR1cm4gdGhpcy5kcmF3U2ltcGxlKG9iaixzdWJzY2VuZSxjb250ZXh0KTtpZihvYmouaW5pdGlhbGl6ZWR8fHRoaXMuaW5pdE9iaihvYmouaWQpLCFvYmoudmVydGV4Q291bnQpcmV0dXJuIHJlc3VsdDtpc190cmFuc3BhcmVudD1pc190cmFuc3BhcmVudHx8b2JqLnNvbWVIaWRkZW47dmFyIGlPcmlnLG5vcmlncz1vYmoudmVydGljZXMubGVuZ3RoLHNhdmVub3JtPW5ldyBDYW52YXNNYXRyaXg0KHRoaXMubm9ybU1hdHJpeCk7Zm9yKHRoaXMubm9ybU1hdHJpeD1zdWJzY2VuZS5zcHJpdGVOb3JtbWF0LHVzZXJNYXRyaXg9b2JqLnVzZXJNYXRyaXgsdGhpcy5vcGFxdWVQYXNzPyhjb250ZXh0PWNvbnRleHQuc2xpY2UoKSxjb250ZXh0LnB1c2gob2JqLmlkKSk6bm9yaWdzPTEsbnVsbCE9PXRoaXMucHJtdk1hdHJpeCYmKG9yaWdQUk1WPW5ldyBDYW52YXNNYXRyaXg0KHRoaXMucHJtdk1hdHJpeCkpLGlPcmlnPTA7bm9yaWdzPmlPcmlnO2lPcmlnKyspZm9yKGo9dGhpcy5vcGFxdWVQYXNzP2lPcmlnOmNvbnRleHQuc3ViaWQscG9zPXRoaXMubXVsdFZNKFtdLmNvbmNhdChvYmoudmVydGljZXNbal0pLmNvbmNhdCgxKSxvcmlnTVYpLHJhZGl1cz1vYmoucmFkaWkubGVuZ3RoPjE/b2JqLnJhZGlpW2pdWzBdOm9iai5yYWRpaVswXVswXSx0aGlzLm12TWF0cml4PW5ldyBDYW52YXNNYXRyaXg0KHVzZXJNYXRyaXgpLHRoaXMubXZNYXRyaXguc2NhbGUocmFkaXVzKSx0aGlzLm12TWF0cml4LnRyYW5zbGF0ZShwb3NbMF0vcG9zWzNdLHBvc1sxXS9wb3NbM10scG9zWzJdL3Bvc1szXSksdGhpcy5zZXRwcm12TWF0cml4KCksaT0wO2k8b2JqLm9iamVjdHMubGVuZ3RoO2krKyl0aGlzLm9wYXF1ZVBhc3M/cmVzdWx0PXJlc3VsdC5jb25jYXQodGhpcy5kcmF3T2JqSWQob2JqLm9iamVjdHNbaV0sc3Vic2NlbmUuaWQsY29udGV4dC5jb25jYXQoaikpKTp0aGlzLmRyYXdPYmpJZChvYmoub2JqZWN0c1tpXSxzdWJzY2VuZS5pZCxjb250ZXh0KTtyZXR1cm4gdGhpcy5ub3JtTWF0cml4PXNhdmVub3JtLHRoaXMubXZNYXRyaXg9b3JpZ01WLG51bGwhPT1vcmlnUFJNViYmKHRoaXMucHJtdk1hdHJpeD1vcmlnUFJNVikscmVzdWx0fSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZHJhd09iaklkPWZ1bmN0aW9uKGlkLHN1YnNjZW5laWQsY29udGV4dCl7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBpZCYmdGhpcy5hbGVydE9uY2UoImRyYXdPYmpJZCBpZCBpcyAiK3R5cGVvZiBpZCksdGhpcy5kcmF3T2JqKHRoaXMuZ2V0T2JqKGlkKSx0aGlzLmdldE9iaihzdWJzY2VuZWlkKSxjb250ZXh0KX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmRyYXdPYmo9ZnVuY3Rpb24ob2JqLHN1YnNjZW5lLGNvbnRleHQpe3N3aXRjaChvYmoudHlwZSl7Y2FzZSJhYmNsaW5lcyI6Y2FzZSJzdXJmYWNlIjpjYXNlInRyaWFuZ2xlcyI6Y2FzZSJxdWFkcyI6Y2FzZSJsaW5lcyI6Y2FzZSJwb2ludHMiOmNhc2UidGV4dCI6cmV0dXJuIHRoaXMuZHJhd1NpbXBsZShvYmosc3Vic2NlbmUsY29udGV4dCk7Y2FzZSJsaW5lc3RyaXAiOnJldHVybiB0aGlzLmRyYXdMaW5lc3RyaXAob2JqLHN1YnNjZW5lLGNvbnRleHQpO2Nhc2UicGxhbmVzIjpyZXR1cm4gdGhpcy5kcmF3UGxhbmVzKG9iaixzdWJzY2VuZSxjb250ZXh0KTtjYXNlInNwaGVyZXMiOnJldHVybiB0aGlzLmRyYXdTcGhlcmVzKG9iaixzdWJzY2VuZSxjb250ZXh0KTtjYXNlImNsaXBwbGFuZXMiOnJldHVybiB0aGlzLmRyYXdDbGlwcGxhbmVzKG9iaik7Y2FzZSJzcHJpdGVzIjpyZXR1cm4gdGhpcy5kcmF3U3ByaXRlcyhvYmosc3Vic2NlbmUsY29udGV4dCk7Y2FzZSJsaWdodCI6Y2FzZSJiYm94ZGVjbyI6cmV0dXJuW119Y29uc29sZS5lcnJvcigiZHJhd09iaiBmb3IgdHlwZSA9ICIrb2JqLnR5cGUpfSxyZ2x3aWRnZXRDbGFzcy5wcm90b3R5cGUuZHJhd0JhY2tncm91bmQ9ZnVuY3Rpb24oaWQsc3Vic2NlbmVpZCl7dmFyIGJnLGksc2F2ZXByLHNhdmVtdixnbD10aGlzLmdsfHx0aGlzLmluaXRHTCgpLG9iaj10aGlzLmdldE9iaihpZCk7aWYob2JqLmluaXRpYWxpemVkfHx0aGlzLmluaXRPYmooaWQpLG9iai5jb2xvcnMubGVuZ3RoPyhiZz1vYmouY29sb3JzWzBdLGdsLmNsZWFyQ29sb3IoYmdbMF0sYmdbMV0sYmdbMl0sYmdbM10pLGdsLmRlcHRoTWFzayghMCksZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVHxnbC5ERVBUSF9CVUZGRVJfQklUKSx0aGlzLmZvZ0NvbG9yPWJnKTp0aGlzLmZvZ0NvbG9yPVswLDAsMCwwXSx0aGlzLmZvZ1R5cGU9b2JqLmZvZ3R5cGUsdGhpcy5mb2dTY2FsZT1vYmouZm9nc2NhbGUsInVuZGVmaW5lZCIhPXR5cGVvZiBvYmoucXVhZCl7Zm9yKHNhdmVwcj10aGlzLnByTWF0cml4LHNhdmVtdj10aGlzLm12TWF0cml4LHRoaXMucHJNYXRyaXg9bmV3IENhbnZhc01hdHJpeDQsdGhpcy5tdk1hdHJpeD1uZXcgQ2FudmFzTWF0cml4NCxnbC5kaXNhYmxlKGdsLkJMRU5EKSxnbC5kaXNhYmxlKGdsLkRFUFRIX1RFU1QpLGdsLmRlcHRoTWFzayghMSksaT0wO2k8b2JqLnF1YWQubGVuZ3RoO2krKyl0aGlzLmRyYXdPYmpJZChvYmoucXVhZFtpXSxzdWJzY2VuZWlkKTt0aGlzLnByTWF0cml4PXNhdmVwcix0aGlzLm12TWF0cml4PXNhdmVtdn19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kcmF3U3Vic2NlbmU9ZnVuY3Rpb24oc3Vic2NlbmVpZCxjb250ZXh0KXt2YXIgZmxhZ3MsaSxvYmosc3ViPXRoaXMuZ2V0T2JqKHN1YnNjZW5laWQpLG9iamVjdHM9dGhpcy5zY2VuZS5vYmplY3RzLGNsaXBpZHM9c3ViLmNsaXBwbGFuZXMsc3ViaWRzPXN1Yi5vYmplY3RzLHN1YnNjZW5lX2hhc19mYWNlcz0hMSxzdWJzY2VuZV9uZWVkc19zb3J0aW5nPSExLHJlc3VsdD1bXTtpZihzdWIucGFyM2Quc2tpcFJlZHJhdylyZXR1cm4gcmVzdWx0O2lmKHRoaXMub3BhcXVlUGFzcylmb3IoaT0wO2k8c3ViaWRzLmxlbmd0aDtpKyspb2JqPW9iamVjdHNbc3ViaWRzW2ldXSxmbGFncz1vYmouZmxhZ3MsInVuZGVmaW5lZCIhPXR5cGVvZiBmbGFncyYmKHN1YnNjZW5lX2hhc19mYWNlcz1zdWJzY2VuZV9oYXNfZmFjZXN8fHRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2lzX2xpdCkmJiF0aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9maXhlZF9xdWFkcyksb2JqLmlzX3RyYW5zcGFyZW50PW9iai5zb21lSGlkZGVufHx0aGlzLmlzU2V0KGZsYWdzLHRoaXMuZl9pc190cmFuc3BhcmVudCksc3Vic2NlbmVfbmVlZHNfc29ydGluZz1zdWJzY2VuZV9uZWVkc19zb3J0aW5nfHxvYmouaXNfdHJhbnNwYXJlbnR8fHRoaXMuaXNTZXQoZmxhZ3MsdGhpcy5mX2RlcHRoX3NvcnQpKTtpZih0aGlzLnNldFZpZXdwb3J0KHN1YnNjZW5laWQpLHRoaXMuc2V0cHJNYXRyaXgoc3Vic2NlbmVpZCksdGhpcy5zZXRtdk1hdHJpeChzdWJzY2VuZWlkKSwidW5kZWZpbmVkIiE9dHlwZW9mIHN1Yi5iYWNrZ3JvdW5kSWQmJnRoaXMub3BhcXVlUGFzcyYmdGhpcy5kcmF3QmFja2dyb3VuZChzdWIuYmFja2dyb3VuZElkLHN1YnNjZW5laWQpLHN1Ymlkcy5sZW5ndGgpe2lmKHN1YnNjZW5lX2hhc19mYWNlcyYmKHRoaXMuc2V0bm9ybU1hdHJpeChzdWJzY2VuZWlkKSx0aGlzLmlzU2V0KHN1Yi5mbGFncyx0aGlzLmZfc3ByaXRlc18zZCkmJiJ1bmRlZmluZWQiPT10eXBlb2Ygc3ViLnNwcml0ZU5vcm1tYXQmJihzdWIuc3ByaXRlTm9ybW1hdD1uZXcgQ2FudmFzTWF0cml4NCh0aGlzLm5vcm1NYXRyaXgpKSksc3Vic2NlbmVfbmVlZHNfc29ydGluZyYmdGhpcy5zZXRwcm12TWF0cml4KCksY2xpcGlkcy5sZW5ndGg+MClmb3IodGhpcy5pbnZNYXRyaXg9bmV3IENhbnZhc01hdHJpeDQodGhpcy5tdk1hdHJpeCksdGhpcy5pbnZNYXRyaXguaW52ZXJ0KCksaT0wO2k8Y2xpcGlkcy5sZW5ndGg7aSsrKXRoaXMuZHJhd09iaklkKGNsaXBpZHNbaV0sc3Vic2NlbmVpZCk7aWYoc3ViaWRzPXN1Yi5vcGFxdWUuY29uY2F0KHN1Yi50cmFuc3BhcmVudCksdGhpcy5vcGFxdWVQYXNzKXtmb3IoY29udGV4dD1jb250ZXh0LnNsaWNlKCksY29udGV4dC5wdXNoKHN1YnNjZW5laWQpLHRoaXMuZG9CbGVuZGluZyghMSksdGhpcy5zdWJzY2VuZWlkPXN1YnNjZW5laWQsInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzLnNwaGVyZSYmKHRoaXMuc3BoZXJlLmZhc3RwaWVjZXM9dm9pZCAwKSxpPTA7aTxzdWJpZHMubGVuZ3RoO2krKylyZXN1bHQ9cmVzdWx0LmNvbmNhdCh0aGlzLmRyYXdPYmpJZChzdWJpZHNbaV0sc3Vic2NlbmVpZCxjb250ZXh0KSk7Zm9yKHN1Ymlkcz1zdWIuc3Vic2NlbmVzLGk9MDtpPHN1Ymlkcy5sZW5ndGg7aSsrKXJlc3VsdD1yZXN1bHQuY29uY2F0KHRoaXMuZHJhd1N1YnNjZW5lKHN1Ymlkc1tpXSxjb250ZXh0KSl9fXJldHVybiByZXN1bHR9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGNvbnRleHQpe3ZhciBvYmppZCxvYmosdHlwZSxyZXN1bHQ9W107Zm9yKGNvbnRleHQ9Y29udGV4dC5zbGljZSgpLGNvbnRleHQucmV2ZXJzZSgpO2NvbnRleHQubGVuZ3RoPjA7KXN3aXRjaChvYmppZD1jb250ZXh0LnBvcCgpLG9iaj10aGlzLmdldE9iaihvYmppZCksdHlwZT1vYmoudHlwZSl7Y2FzZSJzdWJzY2VuZSI6dGhpcy5kcmF3U3Vic2NlbmUob2JqaWQsITEpO2JyZWFrO2Nhc2Uic3ByaXRlcyI6cmVzdWx0PXJlc3VsdC5jb25jYXQoY29udGV4dC5wb3AoKSk7YnJlYWs7Y2FzZSJzcGhlcmVzIjpicmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoImJhZCB0eXBlICciLHR5cGUsIicgaW4gc2V0Q29udGV4dCIpfXJldHVybiByZXN1bHR9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kcmF3UGllY2VzPWZ1bmN0aW9uKHBpZWNlcyl7dmFyIGksY29udGV4dCxwcmV2Y29udGV4dD1bXTtmb3IodGhpcy5kb0JsZW5kaW5nKCEwKSxpPTA7aTxwaWVjZXMubGVuZ3RoO2krKyljb250ZXh0PXBpZWNlc1tpXS5jb250ZXh0LnNsaWNlKCksY29udGV4dCE9PXByZXZjb250ZXh0JiYocHJldmNvbnRleHQ9Y29udGV4dC5zbGljZSgpLGNvbnRleHQ9dGhpcy5zZXRDb250ZXh0KGNvbnRleHQpKSx0aGlzLmRyYXdPYmpJZChwaWVjZXNbaV0ub2JqaWQsdGhpcy5zdWJzY2VuZWlkLHBpZWNlc1tpXSl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5kcmF3U2NlbmU9ZnVuY3Rpb24oKXt2YXIgcGllY2VzLHdhc0RyYXdpbmc9dGhpcy5zdGFydERyYXdpbmcoKTt3YXNEcmF3aW5nfHwoImluYWN0aXZlIiE9PXRoaXMuc2VsZWN0LnN0YXRlJiZ0aGlzLnNlbGVjdGlvbkNoYW5nZWQoKSx0aGlzLmRvU3RhcnRTY2VuZSgpLHRoaXMub3BhcXVlUGFzcz0hMCxwaWVjZXM9dGhpcy5kcmF3U3Vic2NlbmUodGhpcy5zY2VuZS5yb290U3Vic2NlbmUsW10pLHRoaXMub3BhcXVlUGFzcz0hMSxwaWVjZXM9dGhpcy5zb3J0UGllY2VzKHBpZWNlcykscGllY2VzPXRoaXMubWVyZ2VQaWVjZXMocGllY2VzKSx0aGlzLmRyYXdQaWVjZXMocGllY2VzKSksdGhpcy5zdG9wRHJhd2luZyh3YXNEcmF3aW5nKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLnN1YnNldFNldHRlcj1mdW5jdGlvbihlbCxjb250cm9sKXsoInVuZGVmaW5lZCI9PXR5cGVvZiBjb250cm9sLnN1YnNjZW5lc3x8bnVsbD09PWNvbnRyb2wuc3Vic2NlbmVzKSYmKGNvbnRyb2wuc3Vic2NlbmVzPXRoaXMuc2NlbmUucm9vdFN1YnNjZW5lKTt2YXIgaSxqLHN1YnNjZW5laWQsdmFsdWU9TWF0aC5yb3VuZChjb250cm9sLnZhbHVlKSxzdWJzY2VuZXM9W10uY29uY2F0KGNvbnRyb2wuc3Vic2NlbmVzKSxmdWxsc2V0PVtdLmNvbmNhdChjb250cm9sLmZ1bGxzZXQpLGFkZHM9W10sZGVsZXRlcz1bXTtpZihpc05hTih2YWx1ZSkmJih2YWx1ZT1jb250cm9sLnZhbHVlPTApLGNvbnRyb2wuYWNjdW11bGF0ZSlmb3IoaT0wO3ZhbHVlPj1pO2krKylhZGRzPWFkZHMuY29uY2F0KGNvbnRyb2wuc3Vic2V0c1tpXSk7ZWxzZSBhZGRzPWFkZHMuY29uY2F0KGNvbnRyb2wuc3Vic2V0c1t2YWx1ZV0pO2ZvcihkZWxldGVzPWZ1bGxzZXQuZmlsdGVyKGZ1bmN0aW9uKHgpe3JldHVybiBhZGRzLmluZGV4T2YoeCk8MH0pLGk9MDtpPHN1YnNjZW5lcy5sZW5ndGg7aSsrKXtmb3Ioc3Vic2NlbmVpZD1zdWJzY2VuZXNbaV0sInVuZGVmaW5lZCI9PXR5cGVvZiB0aGlzLmdldE9iaihzdWJzY2VuZWlkKSYmdGhpcy5hbGVydE9uY2UoInR5cGVvZiBvYmplY3QgaXMgdW5kZWZpbmVkIiksaj0wO2o8YWRkcy5sZW5ndGg7aisrKXRoaXMuYWRkVG9TdWJzY2VuZShhZGRzW2pdLHN1YnNjZW5laWQpO2ZvcihqPTA7ajxkZWxldGVzLmxlbmd0aDtqKyspdGhpcy5kZWxGcm9tU3Vic2NlbmUoZGVsZXRlc1tqXSxzdWJzY2VuZWlkKX19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5wcm9wZXJ0eVNldHRlcj1mdW5jdGlvbihlbCxjb250cm9sKXt2YXIgcHJvcGVydHkscHJvcHZhbHMsaSxqLHYxLHYyLHAsZW50cnksZ2wsbmVlZHNCaW5kaW5nLG5ld3Byb3AsbmV3aWQsdmFsdWU9Y29udHJvbC52YWx1ZSx2YWx1ZXM9W10uY29uY2F0KGNvbnRyb2wudmFsdWVzKSxzdmFscz1bXS5jb25jYXQoY29udHJvbC5wYXJhbSksZGlyZWN0PW51bGw9PT12YWx1ZXNbMF0sZW50cmllcz1bXS5jb25jYXQoY29udHJvbC5lbnRyaWVzKSxuY29sPWVudHJpZXMubGVuZ3RoLG5yb3c9dmFsdWVzLmxlbmd0aC9uY29sLHByb3BlcnRpZXM9dGhpcy5yZXBlYXRUb0xlbihjb250cm9sLnByb3BlcnRpZXMsbmNvbCksb2JqaWRzPXRoaXMucmVwZWF0VG9MZW4oY29udHJvbC5vYmppZHMsbmNvbCksb2JqaWQ9b2JqaWRzWzBdLG9iaj10aGlzLmdldE9iaihvYmppZCksZ2V0UHJvcHZhbHM9ZnVuY3Rpb24oKXtyZXR1cm4idXNlck1hdHJpeCI9PT1wcm9wZXJ0eT9vYmoucGFyM2QudXNlck1hdHJpeC5nZXRBc0FycmF5KCk6W10uY29uY2F0KCJzY2FsZSI9PT1wcm9wZXJ0eXx8IkZPViI9PT1wcm9wZXJ0eXx8Inpvb20iPT09cHJvcGVydHk/b2JqLnBhcjNkW3Byb3BlcnR5XTpvYmpbcHJvcGVydHldKX0scHV0UHJvcHZhbHM9ZnVuY3Rpb24obmV3dmFscyl7MT09PW5ld3ZhbHMubGVuZ3RoJiYobmV3dmFscz1uZXd2YWxzWzBdKSwidXNlck1hdHJpeCI9PT1wcm9wZXJ0eT9vYmoucGFyM2QudXNlck1hdHJpeC5sb2FkKG5ld3ZhbHMpOiJzY2FsZSI9PT1wcm9wZXJ0eXx8IkZPViI9PT1wcm9wZXJ0eXx8Inpvb20iPT09cHJvcGVydHk/b2JqLnBhcjNkW3Byb3BlcnR5XT1uZXd2YWxzOm9ialtwcm9wZXJ0eV09bmV3dmFsc307aWYoIWRpcmVjdHx8InVuZGVmaW5lZCIhPXR5cGVvZiB2YWx1ZSl7aWYoY29udHJvbC5pbnRlcnApe2Zvcih2YWx1ZXM9dmFsdWVzLnNsaWNlKDAsbmNvbCkuY29uY2F0KHZhbHVlcykuY29uY2F0KHZhbHVlcy5zbGljZShuY29sKihucm93LTEpLG5jb2wqbnJvdykpLHN2YWxzPVstMS8wXS5jb25jYXQoc3ZhbHMpLmNvbmNhdCgxLzApLGk9MTtpPHN2YWxzLmxlbmd0aDtpKyspaWYodmFsdWU8PXN2YWxzW2ldKXtwPTEvMD09PXN2YWxzW2ldPzE6KHN2YWxzW2ldLXZhbHVlKS8oc3ZhbHNbaV0tc3ZhbHNbaS0xXSk7YnJlYWt9fWVsc2UgZGlyZWN0fHwodmFsdWU9TWF0aC5yb3VuZCh2YWx1ZSkpO2ZvcihqPTA7ajxlbnRyaWVzLmxlbmd0aDtqKyspZW50cnk9ZW50cmllc1tqXSxuZXdwcm9wPXByb3BlcnRpZXNbal0sbmV3aWQ9b2JqaWRzW2pdLChuZXdwcm9wIT09cHJvcGVydHl8fG5ld2lkIT09b2JqaWQpJiYoInVuZGVmaW5lZCIhPXR5cGVvZiBwcm9wZXJ0eSYmcHV0UHJvcHZhbHMocHJvcHZhbHMpLHByb3BlcnR5PW5ld3Byb3Asb2JqaWQ9bmV3aWQsb2JqPXRoaXMuZ2V0T2JqKG9iamlkKSxwcm9wdmFscz1nZXRQcm9wdmFscygpKSxjb250cm9sLmludGVycD8odjE9dmFsdWVzW25jb2wqKGktMSkral0sdjI9dmFsdWVzW25jb2wqaStqXSx0aGlzLnNldEVsZW1lbnQocHJvcHZhbHMsZW50cnkscCp2MSsoMS1wKSp2MikpOmRpcmVjdD90aGlzLnNldEVsZW1lbnQocHJvcHZhbHMsZW50cnksdmFsdWVbal0pOnRoaXMuc2V0RWxlbWVudChwcm9wdmFscyxlbnRyeSx2YWx1ZXNbbmNvbCp2YWx1ZStqXSk7Zm9yKHB1dFByb3B2YWxzKHByb3B2YWxzKSxuZWVkc0JpbmRpbmc9W10saj0wO2o8ZW50cmllcy5sZW5ndGg7aisrKSJ2YWx1ZXMiPT09cHJvcGVydGllc1tqXSYmLTE9PT1uZWVkc0JpbmRpbmcuaW5kZXhPZihvYmppZHNbal0pJiZuZWVkc0JpbmRpbmcucHVzaChvYmppZHNbal0pO2ZvcihqPTA7ajxuZWVkc0JpbmRpbmcubGVuZ3RoO2orKylnbD10aGlzLmdsfHx0aGlzLmluaXRHTCgpLG9iaj10aGlzLmdldE9iaihuZWVkc0JpbmRpbmdbal0pLGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLG9iai5idWYpLGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLG9iai52YWx1ZXMsZ2wuU1RBVElDX0RSQVcpfX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLnZlcnRleFNldHRlcj1mdW5jdGlvbihlbCxjb250cm9sKXt2YXIgaixrLHAsYSxwcm9wdmFscyxzdHJpZGUsb2ZzLG9iaixlbnRyeSxhdHRyaWIsdmVydGV4LHZhcmllcyxuY29sLG5ld3ZhbCxhbGlhc2VzLGFsaWFzLHN2YWxzPVtdLmNvbmNhdChjb250cm9sLnBhcmFtKSxvZnNzPXt4OiJ2b2ZzIix5OiJ2b2ZzIix6OiJ2b2ZzIixyZWQ6ImNvZnMiLGdyZWVuOiJjb2ZzIixibHVlOiJjb2ZzIixhbHBoYToiY29mcyIscmFkaWk6InJhZG9mcyIsbng6Im5vZnMiLG55OiJub2ZzIixuejoibm9mcyIsb3g6Im9vZnMiLG95OiJvb2ZzIixvejoib29mcyIsdHM6InRvZnMiLHR0OiJ0b2ZzIn0scG9zPXt4OjAseToxLHo6MixyZWQ6MCxncmVlbjoxLGJsdWU6MixhbHBoYTozLHJhZGlpOjAsbng6MCxueToxLG56OjIsb3g6MCxveToxLG96OjIsdHM6MCx0dDoxfSx2YWx1ZXM9Y29udHJvbC52YWx1ZXMsZGlyZWN0PW51bGw9PT12YWx1ZXMsaW50ZXJwPWNvbnRyb2wuaW50ZXJwLHZlcnRpY2VzPVtdLmNvbmNhdChjb250cm9sLnZlcnRpY2VzKSxhdHRyaWJ1dGVzPVtdLmNvbmNhdChjb250cm9sLmF0dHJpYnV0ZXMpLHZhbHVlPWNvbnRyb2wudmFsdWU7aWYobmNvbD1NYXRoLm1heCh2ZXJ0aWNlcy5sZW5ndGgsYXR0cmlidXRlcy5sZW5ndGgpKXtmb3IodmVydGljZXM9dGhpcy5yZXBlYXRUb0xlbih2ZXJ0aWNlcyxuY29sKSxhdHRyaWJ1dGVzPXRoaXMucmVwZWF0VG9MZW4oYXR0cmlidXRlcyxuY29sKSxkaXJlY3QmJihpbnRlcnA9ITEpLHN2YWxzWzBdPS0xLzAsc3ZhbHNbc3ZhbHMubGVuZ3RoLTFdPTEvMCxqPTE7ajxzdmFscy5sZW5ndGg7aisrKWlmKHZhbHVlPD1zdmFsc1tqXSl7aW50ZXJwP3A9MS8wPT09c3ZhbHNbal0/MTooc3ZhbHNbal0tdmFsdWUpLyhzdmFsc1tqXS1zdmFsc1tqLTFdKTpzdmFsc1tqXS12YWx1ZT52YWx1ZS1zdmFsc1tqLTFdJiYoai09MSk7YnJlYWt9aWYob2JqPXRoaXMuZ2V0T2JqKGNvbnRyb2wub2JqaWQpLCJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLnZPZmZzZXRzKXtmb3IodmFyaWVzPSEwLGs9MDtuY29sPms7aysrKWlmKGF0dHJpYj1hdHRyaWJ1dGVzW2tdLCJ1bmRlZmluZWQiIT10eXBlb2YgYXR0cmliJiYob2ZzPW9iai52T2Zmc2V0c1tvZnNzW2F0dHJpYl1dLDA+b2ZzKSl7c3dpdGNoKGF0dHJpYil7Y2FzZSJhbHBoYSI6Y2FzZSJyZWQiOmNhc2UiZ3JlZW4iOmNhc2UiYmx1ZSI6b2JqLmNvbG9ycz1bb2JqLmNvbG9yc1swXSxvYmouY29sb3JzWzBdXX12YXJpZXM9ITF9dmFyaWVzfHx0aGlzLmluaXRPYmooY29udHJvbC5vYmppZCl9Zm9yKHByb3B2YWxzPW9iai52YWx1ZXMsYWxpYXNlcz1vYmouYWxpYXMsInVuZGVmaW5lZCI9PXR5cGVvZiBhbGlhc2VzJiYoYWxpYXNlcz1bXSksaz0wO25jb2w+aztrKyspaWYobmV3dmFsPWRpcmVjdD92YWx1ZTppbnRlcnA/cCp2YWx1ZXNbai0xXVtrXSsoMS1wKSp2YWx1ZXNbal1ba106dmFsdWVzW2pdW2tdLGF0dHJpYj1hdHRyaWJ1dGVzW2tdLHZlcnRleD12ZXJ0aWNlc1trXSxhbGlhcz1hbGlhc2VzW3ZlcnRleF0sKCJwbGFuZXMiPT09b2JqLnR5cGV8fCJjbGlwcGxhbmVzIj09PW9iai50eXBlKSYmKG9mcz1bIm54IiwibnkiLCJueiIsIm9mZnNldCJdLmluZGV4T2YoYXR0cmliKSxvZnM+PTApKTM+b2ZzP29iai5ub3JtYWxzW3ZlcnRleF1bb2ZzXSE9PW5ld3ZhbCYmKG9iai5ub3JtYWxzW3ZlcnRleF1bb2ZzXT1uZXd2YWwsb2JqLmluaXRpYWxpemVkPSExKTpvYmoub2Zmc2V0c1t2ZXJ0ZXhdWzBdIT09bmV3dmFsJiYob2JqLm9mZnNldHNbdmVydGV4XVswXT1uZXd2YWwsb2JqLmluaXRpYWxpemVkPSExKTtlbHNlIGlmKG9mcz1vYmoudk9mZnNldHNbb2Zzc1thdHRyaWJdXSwwPm9mcyl0aGlzLmFsZXJ0T25jZSgiQXR0cmlidXRlICciK2F0dHJpYisiJyBub3QgZm91bmQgaW4gb2JqZWN0ICIrY29udHJvbC5vYmppZCk7ZWxzZSBpZihzdHJpZGU9b2JqLnZPZmZzZXRzLnN0cmlkZSxvZnMrPXBvc1thdHRyaWJdLGVudHJ5PXZlcnRleCpzdHJpZGUrb2ZzLHByb3B2YWxzW2VudHJ5XT1uZXd2YWwsInVuZGVmaW5lZCIhPXR5cGVvZiBhbGlhcylmb3IoYT0wO2E8YWxpYXMubGVuZ3RoO2ErKylwcm9wdmFsc1thbGlhc1thXSpzdHJpZGUrb2ZzXT1uZXd2YWw7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBvYmouYnVmKXt2YXIgZ2w9dGhpcy5nbHx8dGhpcy5pbml0R0woKTtnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUixvYmouYnVmKSxnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUixwcm9wdmFscyxnbC5TVEFUSUNfRFJBVyl9fX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmFnZVNldHRlcj1mdW5jdGlvbihlbCxjb250cm9sKXt2YXIgaSxrLGwsYWdlLGowLHByb3B2YWxzLHN0cmlkZSxvZnMsb2JqaWQsb2JqLGF0dHJpYixkaW0sdmFyaWVzLGFsaWFzLGFsaWFzZXMsYSxkLG9iamlkcz1bXS5jb25jYXQoY29udHJvbC5vYmppZHMpLG5vYmpzPW9iamlkcy5sZW5ndGgsdGltZT1jb250cm9sLnZhbHVlLGJpcnRocz1bXS5jb25jYXQoY29udHJvbC5iaXJ0aHMpLGFnZXM9W10uY29uY2F0KGNvbnRyb2wuYWdlcyksc3RlcHM9YmlydGhzLmxlbmd0aCxqPUFycmF5KHN0ZXBzKSxwPUFycmF5KHN0ZXBzKSxhdHRyaWJzPVsiY29sb3JzIiwiYWxwaGEiLCJyYWRpaSIsInZlcnRpY2VzIiwibm9ybWFscyIsIm9yaWdpbnMiLCJ0ZXhjb29yZHMiLCJ4IiwieSIsInoiLCJyZWQiLCJncmVlbiIsImJsdWUiXSxvZnNzPVsiY29mcyIsImNvZnMiLCJyYWRvZnMiLCJ2b2ZzIiwibm9mcyIsIm9vZnMiLCJ0b2ZzIiwidm9mcyIsInZvZnMiLCJ2b2ZzIiwiY29mcyIsImNvZnMiLCJjb2ZzIl0sZGltcz1bMywxLDEsMywzLDIsMiwxLDEsMSwxLDEsMV0scG9zPVswLDMsMCwwLDAsMCwwLDAsMSwyLDAsMSwyXTtmb3IoYWdlc1swXT0tMS8wLGFnZXNbYWdlcy5sZW5ndGgtMV09MS8wLGk9MDtzdGVwcz5pO2krKylpZihudWxsIT09YmlydGhzW2ldKXtmb3IoYWdlPXRpbWUtYmlydGhzW2ldLGowPTE7YWdlPmFnZXNbajBdO2owKyspO3BbaV09MS8wPT09YWdlc1tqMF0/MTphZ2VzW2owXT5hZ2VzW2owLTFdPyhhZ2VzW2owXS1hZ2UpLyhhZ2VzW2owXS1hZ2VzW2owLTFdKTowLGpbaV09ajB9Zm9yKGw9MDtub2Jqcz5sO2wrKylpZihvYmppZD1vYmppZHNbbF0sb2JqPXRoaXMuZ2V0T2JqKG9iamlkKSx2YXJpZXM9ITAsInVuZGVmaW5lZCIhPXR5cGVvZiBvYmoudk9mZnNldHMpe2ZvcihrPTA7azxhdHRyaWJzLmxlbmd0aDtrKyspaWYoYXR0cmliPWNvbnRyb2xbYXR0cmlic1trXV0sInVuZGVmaW5lZCIhPXR5cGVvZiBhdHRyaWImJihvZnM9b2JqLnZPZmZzZXRzW29mc3Nba11dLDA+b2ZzKSl7c3dpdGNoKGF0dHJpYnNba10pe2Nhc2UiY29sb3JzIjpjYXNlImFscGhhIjpjYXNlInJlZCI6Y2FzZSJncmVlbiI6Y2FzZSJibHVlIjpvYmouY29sb3JzPVtvYmouY29sb3JzWzBdLG9iai5jb2xvcnNbMF1dfXZhcmllcz0hMX12YXJpZXN8fHRoaXMuaW5pdE9iaihvYmppZCl9Zm9yKGw9MDtub2Jqcz5sO2wrKylpZihvYmppZD1vYmppZHNbbF0sb2JqPXRoaXMuZ2V0T2JqKG9iamlkKSwidW5kZWZpbmVkIiE9dHlwZW9mIG9iai52T2Zmc2V0cyl7Zm9yKGFsaWFzZXM9b2JqLmFsaWFzLCJ1bmRlZmluZWQiPT10eXBlb2YgYWxpYXNlcyYmKGFsaWFzZXM9W10pLHByb3B2YWxzPW9iai52YWx1ZXMsc3RyaWRlPW9iai52T2Zmc2V0cy5zdHJpZGUsaz0wO2s8YXR0cmlicy5sZW5ndGg7aysrKWlmKGF0dHJpYj1jb250cm9sW2F0dHJpYnNba11dLCJ1bmRlZmluZWQiIT10eXBlb2YgYXR0cmliKWlmKG9mcz1vYmoudk9mZnNldHNbb2Zzc1trXV0sb2ZzPj0wKXtmb3IoZGltPWRpbXNba10sb2ZzKz1wb3Nba10saT0wO3N0ZXBzPmk7aSsrKWlmKGFsaWFzPWFsaWFzZXNbaV0sbnVsbCE9PWJpcnRoc1tpXSlmb3IoZD0wO2RpbT5kO2QrKylpZihwcm9wdmFsc1tpKnN0cmlkZStvZnMrZF09cFtpXSphdHRyaWJbZGltKihqW2ldLTEpK2RdKygxLXBbaV0pKmF0dHJpYltkaW0qaltpXStkXSwidW5kZWZpbmVkIiE9dHlwZW9mIGFsaWFzKWZvcihhPTA7YTxhbGlhcy5sZW5ndGg7YSsrKXByb3B2YWxzW2FsaWFzW2FdKnN0cmlkZStvZnMrZF09cHJvcHZhbHNbaSpzdHJpZGUrb2ZzK2RdfWVsc2UgdGhpcy5hbGVydE9uY2UoIiciK2F0dHJpYnNba10rIicgcHJvcGVydHkgbm90IGZvdW5kIGluIG9iamVjdCAiK29iamlkKTtpZihvYmoudmFsdWVzPXByb3B2YWxzLCJ1bmRlZmluZWQiIT10eXBlb2Ygb2JqLmJ1Zil7dmFyIGdsPXRoaXMuZ2x8fHRoaXMuaW5pdEdMKCk7Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsb2JqLmJ1ZiksZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsb2JqLnZhbHVlcyxnbC5TVEFUSUNfRFJBVyl9fX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLm9sZEJyaWRnZT1mdW5jdGlvbihlbCxjb250cm9sKXt2YXIgYXR0cm5hbWUsZ2xvYmFsPXdpbmRvd1tjb250cm9sLnByZWZpeCsicmdsIl07aWYoZ2xvYmFsKWZvcihhdHRybmFtZSBpbiBnbG9iYWwpdGhpc1thdHRybmFtZV09Z2xvYmFsW2F0dHJuYW1lXTt3aW5kb3dbY29udHJvbC5wcmVmaXgrInJnbCJdPXRoaXN9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5QbGF5ZXI9ZnVuY3Rpb24oZWwsY29udHJvbCl7dmFyIHNlbGY9dGhpcyxjb21wb25lbnRzPVtdLmNvbmNhdChjb250cm9sLmNvbXBvbmVudHMpLGJ1dHRvbkxhYmVscz1bXS5jb25jYXQoY29udHJvbC5idXR0b25MYWJlbHMpLFRpY2s9ZnVuY3Rpb24oKXt2YXIgaSxzdGVwLG5vbWluYWw9dGhpcy52YWx1ZSxzbGlkZXI9dGhpcy5TbGlkZXIsbGFiZWxzPXRoaXMub3V0cHV0TGFiZWxzLG91dHB1dD10aGlzLk91dHB1dDtmb3IoInVuZGVmaW5lZCIhPXR5cGVvZiBzbGlkZXImJm5vbWluYWwhPT1zbGlkZXIudmFsdWUmJihzbGlkZXIudmFsdWU9bm9taW5hbCksInVuZGVmaW5lZCIhPXR5cGVvZiBvdXRwdXQmJihzdGVwPU1hdGgucm91bmQoKG5vbWluYWwtb3V0cHV0LnNsaWRlck1pbikvb3V0cHV0LnNsaWRlclN0ZXApLG51bGwhPT1sYWJlbHM/b3V0cHV0LmlubmVySFRNTD1sYWJlbHNbc3RlcF06KHN0ZXA9c3RlcCpvdXRwdXQuc2xpZGVyU3RlcCtvdXRwdXQuc2xpZGVyTWluLG91dHB1dC5pbm5lckhUTUw9c3RlcC50b1ByZWNpc2lvbihvdXRwdXQub3V0cHV0UHJlY2lzaW9uKSkpLGk9MDtpPHRoaXMuYWN0aW9ucy5sZW5ndGg7aSsrKXRoaXMuYWN0aW9uc1tpXS52YWx1ZT1ub21pbmFsO3NlbGYuYXBwbHlDb250cm9scyhlbCx0aGlzLmFjdGlvbnMsITEpLHNlbGYuZHJhd1NjZW5lKCl9LE9uU2xpZGVySW5wdXQ9ZnVuY3Rpb24oKXt0aGlzLnJnbHRpbWVyLnZhbHVlPU51bWJlcih0aGlzLnZhbHVlKSx0aGlzLnJnbHRpbWVyLlRpY2soKX0sYWRkU2xpZGVyPWZ1bmN0aW9uKG1pbixtYXgsc3RlcCx2YWx1ZSl7dmFyIHNsaWRlcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3NsaWRlci50eXBlPSJyYW5nZSIsc2xpZGVyLm1pbj1taW4sc2xpZGVyLm1heD1tYXgsc2xpZGVyLnN0ZXA9c3RlcCxzbGlkZXIudmFsdWU9dmFsdWUsc2xpZGVyLm9uaW5wdXQ9T25TbGlkZXJJbnB1dCxzbGlkZXIuc2xpZGVyQWN0aW9ucz1jb250cm9sLmFjdGlvbnMsc2xpZGVyLnNsaWRlclNjZW5lPXRoaXMsc2xpZGVyLmNsYXNzTmFtZT0icmdsLXNsaWRlciIsc2xpZGVyLmlkPWVsLmlkKyItc2xpZGVyIixlbC5yZ2x0aW1lci5TbGlkZXI9c2xpZGVyLHNsaWRlci5yZ2x0aW1lcj1lbC5yZ2x0aW1lcixlbC5hcHBlbmRDaGlsZChzbGlkZXIpfSxhZGRMYWJlbD1mdW5jdGlvbihsYWJlbHMsbWluLHN0ZXAscHJlY2lzaW9uKXt2YXIgb3V0cHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm91dHB1dCIpO291dHB1dC5zbGlkZXJNaW49bWluLG91dHB1dC5zbGlkZXJTdGVwPXN0ZXAsb3V0cHV0Lm91dHB1dFByZWNpc2lvbj1wcmVjaXNpb24sb3V0cHV0LmNsYXNzTmFtZT0icmdsLWxhYmVsIixvdXRwdXQuaWQ9ZWwuaWQrIi1sYWJlbCIsZWwucmdsdGltZXIuT3V0cHV0PW91dHB1dCxlbC5yZ2x0aW1lci5vdXRwdXRMYWJlbHM9bGFiZWxzLGVsLmFwcGVuZENoaWxkKG91dHB1dCl9LGFkZEJ1dHRvbj1mdW5jdGlvbih3aGljaCxsYWJlbCxhY3RpdmUpe3ZhciBidXR0b249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxvbmNsaWNrcz17UmV2ZXJzZTpmdW5jdGlvbigpe3RoaXMucmdsdGltZXIucmV2ZXJzZSgpfSxQbGF5OmZ1bmN0aW9uKCl7dGhpcy5yZ2x0aW1lci5wbGF5KCksdGhpcy52YWx1ZT10aGlzLnJnbHRpbWVyLmVuYWJsZWQ/dGhpcy5pbmFjdGl2ZVZhbHVlOnRoaXMuYWN0aXZlVmFsdWV9LFNsb3dlcjpmdW5jdGlvbigpe3RoaXMucmdsdGltZXIuc2xvd2VyKCl9LEZhc3RlcjpmdW5jdGlvbigpe3RoaXMucmdsdGltZXIuZmFzdGVyKCl9LFJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5yZ2x0aW1lci5yZXNldCgpfSxTdGVwOmZ1bmN0aW9uKCl7dGhpcy5yZ2x0aW1lci5zdGVwKCl9fTtidXR0b24ucmdsdGltZXI9ZWwucmdsdGltZXIsYnV0dG9uLnR5cGU9ImJ1dHRvbiIsYnV0dG9uLnZhbHVlPWxhYmVsLGJ1dHRvbi5hY3RpdmVWYWx1ZT1sYWJlbCxidXR0b24uaW5hY3RpdmVWYWx1ZT1hY3RpdmUsIlBsYXkiPT09d2hpY2gmJihidXR0b24ucmdsdGltZXIuUGxheUJ1dHRvbj1idXR0b24pLGJ1dHRvbi5vbmNsaWNrPW9uY2xpY2tzW3doaWNoXSxidXR0b24uY2xhc3NOYW1lPSJyZ2wtYnV0dG9uIixidXR0b24uaWQ9ZWwuaWQrIi0iK3doaWNoLGVsLmFwcGVuZENoaWxkKGJ1dHRvbil9OyJ1bmRlZmluZWQiIT10eXBlb2YgY29udHJvbC5yZWluaXQmJm51bGwhPT1jb250cm9sLnJlaW5pdCYmKGNvbnRyb2wuYWN0aW9ucy5yZWluaXQ9Y29udHJvbC5yZWluaXQpLGVsLnJnbHRpbWVyPW5ldyByZ2x0aW1lckNsYXNzKFRpY2ssY29udHJvbC5zdGFydCxjb250cm9sLmludGVydmFsLGNvbnRyb2wuc3RvcCxjb250cm9sLnN0ZXAsY29udHJvbC52YWx1ZSxjb250cm9sLnJhdGUsY29udHJvbC5sb29wLGNvbnRyb2wuYWN0aW9ucyk7Zm9yKHZhciBpPTA7aTxjb21wb25lbnRzLmxlbmd0aDtpKyspc3dpdGNoKGNvbXBvbmVudHNbaV0pe2Nhc2UiU2xpZGVyIjphZGRTbGlkZXIoY29udHJvbC5zdGFydCxjb250cm9sLnN0b3AsY29udHJvbC5zdGVwLGNvbnRyb2wudmFsdWUpO2JyZWFrO2Nhc2UiTGFiZWwiOmFkZExhYmVsKGNvbnRyb2wubGFiZWxzLGNvbnRyb2wuc3RhcnQsY29udHJvbC5zdGVwLGNvbnRyb2wucHJlY2lzaW9uKTticmVhaztkZWZhdWx0OmFkZEJ1dHRvbihjb21wb25lbnRzW2ldLGJ1dHRvbkxhYmVsc1tpXSxjb250cm9sLnBhdXNlKX1lbC5yZ2x0aW1lci5UaWNrKCl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5hcHBseUNvbnRyb2xzPWZ1bmN0aW9uKGVsLHgsZHJhdyl7dmFyIGksY29udHJvbCx0eXBlLHNlbGY9dGhpcyxyZWluaXQ9eC5yZWluaXQ7Zm9yKGk9MDtpPHgubGVuZ3RoO2krKyljb250cm9sPXhbaV0sdHlwZT1jb250cm9sLnR5cGUsc2VsZlt0eXBlXShlbCxjb250cm9sKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHJlaW5pdCYmbnVsbCE9PXJlaW5pdClmb3IocmVpbml0PVtdLmNvbmNhdChyZWluaXQpLGk9MDtpPHJlaW5pdC5sZW5ndGg7aSsrKXNlbGYuZ2V0T2JqKHJlaW5pdFtpXSkuaW5pdGlhbGl6ZWQ9ITE7KCJ1bmRlZmluZWQiPT10eXBlb2YgZHJhd3x8ZHJhdykmJnNlbGYuZHJhd1NjZW5lKCl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5zY2VuZUNoYW5nZUhhbmRsZXI9ZnVuY3Rpb24obWVzc2FnZSl7dmFyIGRlbGV0ZXMsc3VicyxpLGosc2VsZj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChtZXNzYWdlLmVsZW1lbnRJZCkucmdsaW5zdGFuY2Usb2Jqcz1tZXNzYWdlLm9iamVjdHMsbWF0PW1lc3NhZ2UubWF0ZXJpYWwscm9vdD1tZXNzYWdlLnJvb3RTdWJzY2VuZSxpbml0U3Vicz1tZXNzYWdlLmluaXRTdWJzY2VuZXMscmVkcmF3PW1lc3NhZ2UucmVkcmF3U2NlbmUsc2tpcFJlZHJhdz1tZXNzYWdlLnNraXBSZWRyYXcsYWxsc3Vicz1bXTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG1lc3NhZ2VbImRlbGV0ZSJdKWZvcihkZWxldGVzPVtdLmNvbmNhdChtZXNzYWdlWyJkZWxldGUiXSksc3Vicz0idW5kZWZpbmVkIiE9dHlwZW9mIG1lc3NhZ2UuZGVsZnJvbVN1YnNjZW5lcz9bXS5jb25jYXQobWVzc2FnZS5kZWxmcm9tU3Vic2NlbmVzKTpbXSxpPTA7aTxkZWxldGVzLmxlbmd0aDtpKyspe2ZvcihqPTA7ajxzdWJzLmxlbmd0aDtqKyspc2VsZi5kZWxGcm9tU3Vic2NlbmUoZGVsZXRlc1tpXSxzdWJzW2pdKTtkZWxldGUgc2VsZi5zY2VuZS5vYmplY3RzW2RlbGV0ZXNbaV1dfWZvcigidW5kZWZpbmVkIiE9dHlwZW9mIG9ianMmJk9iamVjdC5rZXlzKG9ianMpLmZvckVhY2goZnVuY3Rpb24oa2V5KXtrZXk9cGFyc2VJbnQoa2V5LDEwKSxzZWxmLnNjZW5lLm9iamVjdHNba2V5XT1vYmpzW2tleV0sc2VsZi5pbml0T2JqKGtleSk7dmFyIGssb2JqPXNlbGYuZ2V0T2JqKGtleSksc3Vicz1bXS5jb25jYXQob2JqLmluU3Vic2NlbmVzKTtmb3IoYWxsc3Vicz1hbGxzdWJzLmNvbmNhdChzdWJzKSxrPTA7azxzdWJzLmxlbmd0aDtrKyspc2VsZi5hZGRUb1N1YnNjZW5lKGtleSxzdWJzW2tdKX0pLCJ1bmRlZmluZWQiIT10eXBlb2YgbWF0JiYoc2VsZi5zY2VuZS5tYXRlcmlhbD1tYXQpLCJ1bmRlZmluZWQiIT10eXBlb2Ygcm9vdCYmKHNlbGYuc2NlbmUucm9vdFN1YnNjZW5lPXJvb3QpLCJ1bmRlZmluZWQiIT10eXBlb2YgaW5pdFN1YnMmJihhbGxzdWJzPWFsbHN1YnMuY29uY2F0KGluaXRTdWJzKSksYWxsc3Vicz1zZWxmLnVuaXF1ZShhbGxzdWJzKSxpPTA7aTxhbGxzdWJzLmxlbmd0aDtpKyspc2VsZi5pbml0U3Vic2NlbmUoYWxsc3Vic1tpXSk7InVuZGVmaW5lZCIhPXR5cGVvZiBza2lwUmVkcmF3JiYocm9vdD1zZWxmLmdldE9iaihzZWxmLnNjZW5lLnJvb3RTdWJzY2VuZSkscm9vdC5wYXIzZC5za2lwUmVkcmF3PXNraXBSZWRyYXcpLHJlZHJhdyYmc2VsZi5kcmF3U2NlbmUoKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLnNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgaSxqLGssaWQsc3Vic2NlbmUsb2JqaWRzLG9iaixmaWx0ZXIsaGFuZGxlLGtleXMseG1pbix4LHhtYXgseW1pbix5LHltYXgseix2LHNvbWVIaWRkZW4sc3ViaWQ9dGhpcy5zZWxlY3Quc3Vic2NlbmUscDE9dGhpcy5zZWxlY3QucmVnaW9uLnAxLHAyPXRoaXMuc2VsZWN0LnJlZ2lvbi5wMixzZWxlY3Rpb249W107aWYoc3ViaWQpZm9yKHN1YnNjZW5lPXRoaXMuZ2V0T2JqKHN1YmlkKSxvYmppZHM9c3Vic2NlbmUub2JqZWN0cyxmaWx0ZXI9dGhpcy5zY2VuZS5jcm9zc3RhbGsuZmlsdGVyLHRoaXMuc2V0bXZNYXRyaXgoc3ViaWQpLHRoaXMuc2V0cHJNYXRyaXgoc3ViaWQpLHRoaXMuc2V0cHJtdk1hdHJpeCgpLHhtaW49TWF0aC5taW4ocDEueCxwMi54KSx4bWF4PU1hdGgubWF4KHAxLngscDIueCkseW1pbj1NYXRoLm1pbihwMS55LHAyLnkpLHltYXg9TWF0aC5tYXgocDEueSxwMi55KSxpPTA7aTxvYmppZHMubGVuZ3RoO2krKylpZihpZD1vYmppZHNbaV0saj10aGlzLnNjZW5lLmNyb3NzdGFsay5pZC5pbmRleE9mKGlkKSxqPj0wKXtmb3Ioa2V5cz10aGlzLnNjZW5lLmNyb3NzdGFsay5rZXlbal0sb2JqPXRoaXMuZ2V0T2JqKGlkKSxzb21lSGlkZGVuPSExLGs9MDtrPGtleXMubGVuZ3RoO2srKylmaWx0ZXImJmZpbHRlci5pbmRleE9mKGtleXNba10pPDA/c29tZUhpZGRlbj0hMDoodj1bXS5jb25jYXQob2JqLnZlcnRpY2VzW2tdKS5jb25jYXQoMSksdj10aGlzLm11bHRWTSh2LHRoaXMucHJtdk1hdHJpeCkseD12WzBdL3ZbM10seT12WzFdL3ZbM10sej12WzJdL3ZbM10seD49eG1pbiYmeG1heD49eCYmeT49eW1pbiYmeW1heD49eSYmej49LTEmJjE+PXo/c2VsZWN0aW9uLnB1c2goa2V5c1trXSk6c29tZUhpZGRlbj0hMCk7b2JqLnNvbWVIaWRkZW49c29tZUhpZGRlbiYmKGZpbHRlcnx8c2VsZWN0aW9uLmxlbmd0aCksb2JqLmluaXRpYWxpemVkPSExLHRoaXMuZXF1YWxBcnJheXMoc2VsZWN0aW9uLHRoaXMuc2NlbmUuY3Jvc3N0YWxrLnNlbGVjdGlvbil8fChoYW5kbGU9dGhpcy5zY2VuZS5jcm9zc3RhbGsuc2VsX2hhbmRsZVtqXSxoYW5kbGUuc2V0KHNlbGVjdGlvbix7cmdsU3Vic2NlbmVJZDp0aGlzLnNlbGVjdC5zdWJzY2VuZX0pKX19LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5zZWxlY3Rpb249ZnVuY3Rpb24oZXZlbnQsZmlsdGVyKXt2YXIgaSxqLGlkcyxvYmosa2V5cyxzZWxlY3Rpb24sc29tZUhpZGRlbixjcm9zc3RhbGs9dGhpcy5zY2VuZS5jcm9zc3RhbGs7Zm9yKGNyb3NzdGFsaz10aGlzLnNjZW5lLmNyb3NzdGFsayxmaWx0ZXI/KGZpbHRlcj1jcm9zc3RhbGsuZmlsdGVyPWV2ZW50LnZhbHVlLHNlbGVjdGlvbj1jcm9zc3RhbGsuc2VsZWN0aW9uKTooc2VsZWN0aW9uPWNyb3NzdGFsay5zZWxlY3Rpb249ZXZlbnQudmFsdWUsZmlsdGVyPWNyb3NzdGFsay5maWx0ZXIpLGlkcz1jcm9zc3RhbGsuaWQsaT0wO2k8aWRzLmxlbmd0aDtpKyspe2ZvcihvYmo9dGhpcy5nZXRPYmooaWRzW2ldKSxvYmouaW5pdGlhbGl6ZWQ9ITEsa2V5cz1jcm9zc3RhbGsua2V5W2ldLHNvbWVIaWRkZW49ITEsaj0wO2o8a2V5cy5sZW5ndGgmJiFzb21lSGlkZGVuO2orKykoZmlsdGVyJiZmaWx0ZXIuaW5kZXhPZihrZXlzW2pdKTwwfHxzZWxlY3Rpb24ubGVuZ3RoJiZzZWxlY3Rpb24uaW5kZXhPZihrZXlzW2pdKTwwKSYmKHNvbWVIaWRkZW49ITApO29iai5zb21lSGlkZGVuPXNvbWVIaWRkZW59dGhpcy5kcmF3U2NlbmUoKX0scmdsd2lkZ2V0Q2xhc3MucHJvdG90eXBlLmNsZWFyQnJ1c2g9ZnVuY3Rpb24oZXhjZXB0KXt0aGlzLnNlbGVjdC5zdWJzY2VuZSE9PWV4Y2VwdCYmKHRoaXMuc2VsZWN0LnJlZ2lvbj17cDE6e3g6MS8wLHk6MS8wfSxwMjp7eDoxLzAseToxLzB9fSx0aGlzLnNlbGVjdGlvbkNoYW5nZWQoKSx0aGlzLnNlbGVjdC5zdGF0ZT0iaW5hY3RpdmUiLHRoaXMuZGVsRnJvbVN1YnNjZW5lKHRoaXMuc2NlbmUuYnJ1c2hJZCx0aGlzLnNlbGVjdC5zdWJzY2VuZSkpLHRoaXMuZHJhd1NjZW5lKCl9LHJnbHdpZGdldENsYXNzLnByb3RvdHlwZS5pbml0U2VsZWN0aW9uPWZ1bmN0aW9uKGlkKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHRoaXMuc2VsZWN0LnJlZ2lvbil7dmFyIG9iaj10aGlzLmdldE9iaihpZCkscDE9dGhpcy5zZWxlY3QucmVnaW9uLnAxLHAyPXRoaXMuc2VsZWN0LnJlZ2lvbi5wMjtvYmoudmVydGljZXM9W1twMS54LHAxLnksMF0sW3AyLngscDEueSwwXSxbcDIueCxwMi55LDBdLFtwMS54LHAyLnksMF0sW3AxLngscDEueSwwXV19fSxyZ2x0aW1lckNsYXNzPWZ1bmN0aW9uKFRpY2ssc3RhcnRUaW1lLGludGVydmFsLHN0b3BUaW1lLHN0ZXBTaXplLHZhbHVlLHJhdGUsbG9vcCxhY3Rpb25zKXt0aGlzLmVuYWJsZWQ9ITEsdGhpcy50aW1lcklkPTAsdGhpcy5zdGFydFRpbWU9c3RhcnRUaW1lLHRoaXMudmFsdWU9dmFsdWUsdGhpcy5pbnRlcnZhbD1pbnRlcnZhbCx0aGlzLnN0b3BUaW1lPXN0b3BUaW1lLHRoaXMuc3RlcFNpemU9c3RlcFNpemUsdGhpcy5yYXRlPXJhdGUsdGhpcy5sb29wPWxvb3AsdGhpcy5yZWFsU3RhcnQ9dm9pZCAwLHRoaXMubXVsdGlwbGllcj0xLHRoaXMuYWN0aW9ucz1hY3Rpb25zLHRoaXMuVGljaz1UaWNrCn0scmdsdGltZXJDbGFzcy5wcm90b3R5cGUucGxheT1mdW5jdGlvbigpe2lmKHRoaXMuZW5hYmxlZClyZXR1cm4gdGhpcy5lbmFibGVkPSExLHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMudGltZXJJZCksdm9pZCh0aGlzLnRpbWVySWQ9MCk7dmFyIHRpY2s9ZnVuY3Rpb24oc2VsZil7dmFyIG5vdz1uZXcgRGF0ZTtzZWxmLnZhbHVlPXNlbGYubXVsdGlwbGllcipzZWxmLnJhdGUqKG5vdy1zZWxmLnJlYWxTdGFydCkvMWUzK3NlbGYuc3RhcnRUaW1lLHNlbGYuZm9yY2VUb1JhbmdlKCksInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmLlRpY2smJnNlbGYuVGljayhzZWxmLnZhbHVlKX07dGhpcy5yZWFsU3RhcnQ9bmV3IERhdGUtMWUzKih0aGlzLnZhbHVlLXRoaXMuc3RhcnRUaW1lKS90aGlzLnJhdGUvdGhpcy5tdWx0aXBsaWVyLHRoaXMudGltZXJJZD13aW5kb3cuc2V0SW50ZXJ2YWwodGljaywxZTMqdGhpcy5pbnRlcnZhbCx0aGlzKSx0aGlzLmVuYWJsZWQ9ITB9LHJnbHRpbWVyQ2xhc3MucHJvdG90eXBlLmZvcmNlVG9SYW5nZT1mdW5jdGlvbigpe2lmKHRoaXMudmFsdWU+dGhpcy5zdG9wVGltZSt0aGlzLnN0ZXBTaXplLzJ8fHRoaXMudmFsdWU8dGhpcy5zdGFydFRpbWUtdGhpcy5zdGVwU2l6ZS8yKWlmKHRoaXMubG9vcCl7dmFyIGN5Y2xlPXRoaXMuc3RvcFRpbWUtdGhpcy5zdGFydFRpbWUrdGhpcy5zdGVwU2l6ZSxuZXd2YWw9KHRoaXMudmFsdWUtdGhpcy5zdGFydFRpbWUpJWN5Y2xlK3RoaXMuc3RhcnRUaW1lO25ld3ZhbDx0aGlzLnN0YXJ0VGltZSYmKG5ld3ZhbCs9Y3ljbGUpLHRoaXMucmVhbFN0YXJ0Kz0xZTMqKHRoaXMudmFsdWUtbmV3dmFsKS90aGlzLm11bHRpcGxpZXIvdGhpcy5yYXRlLHRoaXMudmFsdWU9bmV3dmFsfWVsc2UgdGhpcy5yZXNldCgpfSxyZ2x0aW1lckNsYXNzLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5zdGFydFRpbWUsdGhpcy5uZXdtdWx0aXBsaWVyKDEpLCJ1bmRlZmluZWQiIT10eXBlb2YgdGhpcy5UaWNrJiZ0aGlzLlRpY2sodGhpcy52YWx1ZSksdGhpcy5lbmFibGVkJiZ0aGlzLnBsYXkoKSwidW5kZWZpbmVkIiE9dHlwZW9mIHRoaXMuUGxheUJ1dHRvbiYmKHRoaXMuUGxheUJ1dHRvbi52YWx1ZT0iUGxheSIpfSxyZ2x0aW1lckNsYXNzLnByb3RvdHlwZS5mYXN0ZXI9ZnVuY3Rpb24oKXt0aGlzLm5ld211bHRpcGxpZXIoTWF0aC5TUVJUMip0aGlzLm11bHRpcGxpZXIpfSxyZ2x0aW1lckNsYXNzLnByb3RvdHlwZS5zbG93ZXI9ZnVuY3Rpb24oKXt0aGlzLm5ld211bHRpcGxpZXIodGhpcy5tdWx0aXBsaWVyL01hdGguU1FSVDIpfSxyZ2x0aW1lckNsYXNzLnByb3RvdHlwZS5yZXZlcnNlPWZ1bmN0aW9uKCl7dGhpcy5uZXdtdWx0aXBsaWVyKC10aGlzLm11bHRpcGxpZXIpfSxyZ2x0aW1lckNsYXNzLnByb3RvdHlwZS5uZXdtdWx0aXBsaWVyPWZ1bmN0aW9uKG5ld211bHQpe25ld211bHQhPT10aGlzLm11bHRpcGxpZXImJih0aGlzLnJlYWxTdGFydCs9MWUzKih0aGlzLnZhbHVlLXRoaXMuc3RhcnRUaW1lKS90aGlzLnJhdGUqKDEvdGhpcy5tdWx0aXBsaWVyLTEvbmV3bXVsdCksdGhpcy5tdWx0aXBsaWVyPW5ld211bHQpfSxyZ2x0aW1lckNsYXNzLnByb3RvdHlwZS5zdGVwPWZ1bmN0aW9uKCl7dGhpcy52YWx1ZSs9dGhpcy5yYXRlKnRoaXMubXVsdGlwbGllcix0aGlzLmZvcmNlVG9SYW5nZSgpLCJ1bmRlZmluZWQiIT10eXBlb2YgdGhpcy5UaWNrJiZ0aGlzLlRpY2sodGhpcy52YWx1ZSl9Owo="></script>
<script src="data:application/javascript;base64,Q2FudmFzTWF0cml4ND1mdW5jdGlvbihtKXtpZigib2JqZWN0Ij09dHlwZW9mIG0pe2lmKCJsZW5ndGgiaW4gbSYmbS5sZW5ndGg+PTE2KXJldHVybiB2b2lkIHRoaXMubG9hZChtWzBdLG1bMV0sbVsyXSxtWzNdLG1bNF0sbVs1XSxtWzZdLG1bN10sbVs4XSxtWzldLG1bMTBdLG1bMTFdLG1bMTJdLG1bMTNdLG1bMTRdLG1bMTVdKTtpZihtIGluc3RhbmNlb2YgQ2FudmFzTWF0cml4NClyZXR1cm4gdm9pZCB0aGlzLmxvYWQobSl9dGhpcy5tYWtlSWRlbnRpdHkoKX0sQ2FudmFzTWF0cml4NC5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgmJiJvYmplY3QiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgbWF0cml4PWFyZ3VtZW50c1swXTtpZigibGVuZ3RoImluIG1hdHJpeCYmMTY9PW1hdHJpeC5sZW5ndGgpcmV0dXJuIHRoaXMubTExPW1hdHJpeFswXSx0aGlzLm0xMj1tYXRyaXhbMV0sdGhpcy5tMTM9bWF0cml4WzJdLHRoaXMubTE0PW1hdHJpeFszXSx0aGlzLm0yMT1tYXRyaXhbNF0sdGhpcy5tMjI9bWF0cml4WzVdLHRoaXMubTIzPW1hdHJpeFs2XSx0aGlzLm0yND1tYXRyaXhbN10sdGhpcy5tMzE9bWF0cml4WzhdLHRoaXMubTMyPW1hdHJpeFs5XSx0aGlzLm0zMz1tYXRyaXhbMTBdLHRoaXMubTM0PW1hdHJpeFsxMV0sdGhpcy5tNDE9bWF0cml4WzEyXSx0aGlzLm00Mj1tYXRyaXhbMTNdLHRoaXMubTQzPW1hdHJpeFsxNF0sdm9pZCh0aGlzLm00ND1tYXRyaXhbMTVdKTtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIENhbnZhc01hdHJpeDQpcmV0dXJuIHRoaXMubTExPW1hdHJpeC5tMTEsdGhpcy5tMTI9bWF0cml4Lm0xMix0aGlzLm0xMz1tYXRyaXgubTEzLHRoaXMubTE0PW1hdHJpeC5tMTQsdGhpcy5tMjE9bWF0cml4Lm0yMSx0aGlzLm0yMj1tYXRyaXgubTIyLHRoaXMubTIzPW1hdHJpeC5tMjMsdGhpcy5tMjQ9bWF0cml4Lm0yNCx0aGlzLm0zMT1tYXRyaXgubTMxLHRoaXMubTMyPW1hdHJpeC5tMzIsdGhpcy5tMzM9bWF0cml4Lm0zMyx0aGlzLm0zND1tYXRyaXgubTM0LHRoaXMubTQxPW1hdHJpeC5tNDEsdGhpcy5tNDI9bWF0cml4Lm00Mix0aGlzLm00Mz1tYXRyaXgubTQzLHZvaWQodGhpcy5tNDQ9bWF0cml4Lm00NCl9dGhpcy5tYWtlSWRlbnRpdHkoKX0sQ2FudmFzTWF0cml4NC5wcm90b3R5cGUuZ2V0QXNBcnJheT1mdW5jdGlvbigpe3JldHVyblt0aGlzLm0xMSx0aGlzLm0xMix0aGlzLm0xMyx0aGlzLm0xNCx0aGlzLm0yMSx0aGlzLm0yMix0aGlzLm0yMyx0aGlzLm0yNCx0aGlzLm0zMSx0aGlzLm0zMix0aGlzLm0zMyx0aGlzLm0zNCx0aGlzLm00MSx0aGlzLm00Mix0aGlzLm00Myx0aGlzLm00NF19LENhbnZhc01hdHJpeDQucHJvdG90eXBlLmdldEFzV2ViR0xGbG9hdEFycmF5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBXZWJHTEZsb2F0QXJyYXkodGhpcy5nZXRBc0FycmF5KCkpfSxDYW52YXNNYXRyaXg0LnByb3RvdHlwZS5tYWtlSWRlbnRpdHk9ZnVuY3Rpb24oKXt0aGlzLm0xMT0xLHRoaXMubTEyPTAsdGhpcy5tMTM9MCx0aGlzLm0xND0wLHRoaXMubTIxPTAsdGhpcy5tMjI9MSx0aGlzLm0yMz0wLHRoaXMubTI0PTAsdGhpcy5tMzE9MCx0aGlzLm0zMj0wLHRoaXMubTMzPTEsdGhpcy5tMzQ9MCx0aGlzLm00MT0wLHRoaXMubTQyPTAsdGhpcy5tNDM9MCx0aGlzLm00ND0xfSxDYW52YXNNYXRyaXg0LnByb3RvdHlwZS50cmFuc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgdG1wPXRoaXMubTEyO3RoaXMubTEyPXRoaXMubTIxLHRoaXMubTIxPXRtcCx0bXA9dGhpcy5tMTMsdGhpcy5tMTM9dGhpcy5tMzEsdGhpcy5tMzE9dG1wLHRtcD10aGlzLm0xNCx0aGlzLm0xND10aGlzLm00MSx0aGlzLm00MT10bXAsdG1wPXRoaXMubTIzLHRoaXMubTIzPXRoaXMubTMyLHRoaXMubTMyPXRtcCx0bXA9dGhpcy5tMjQsdGhpcy5tMjQ9dGhpcy5tNDIsdGhpcy5tNDI9dG1wLHRtcD10aGlzLm0zNCx0aGlzLm0zND10aGlzLm00Myx0aGlzLm00Mz10bXB9LENhbnZhc01hdHJpeDQucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3ZhciBkZXQ9dGhpcy5fZGV0ZXJtaW5hbnQ0eDQoKTtyZXR1cm4gTWF0aC5hYnMoZGV0KTwxZS04P251bGw6KHRoaXMuX21ha2VBZGpvaW50KCksdGhpcy5tMTEvPWRldCx0aGlzLm0xMi89ZGV0LHRoaXMubTEzLz1kZXQsdGhpcy5tMTQvPWRldCx0aGlzLm0yMS89ZGV0LHRoaXMubTIyLz1kZXQsdGhpcy5tMjMvPWRldCx0aGlzLm0yNC89ZGV0LHRoaXMubTMxLz1kZXQsdGhpcy5tMzIvPWRldCx0aGlzLm0zMy89ZGV0LHRoaXMubTM0Lz1kZXQsdGhpcy5tNDEvPWRldCx0aGlzLm00Mi89ZGV0LHRoaXMubTQzLz1kZXQsdm9pZCh0aGlzLm00NC89ZGV0KSl9LENhbnZhc01hdHJpeDQucHJvdG90eXBlLnRyYW5zbGF0ZT1mdW5jdGlvbih4LHkseil7dm9pZCAwPT09eCYmKHg9MCksdm9pZCAwPT09eSYmKHk9MCksdm9pZCAwPT09eiYmKHo9MCk7dmFyIG1hdHJpeD1uZXcgQ2FudmFzTWF0cml4NDttYXRyaXgubTQxPXgsbWF0cml4Lm00Mj15LG1hdHJpeC5tNDM9eix0aGlzLm11bHRSaWdodChtYXRyaXgpfSxDYW52YXNNYXRyaXg0LnByb3RvdHlwZS5zY2FsZT1mdW5jdGlvbih4LHkseil7dm9pZCAwPT09eCYmKHg9MSksdm9pZCAwPT09ej92b2lkIDA9PT15Pyh5PXgsej14KTp6PTE6dm9pZCAwPT09eSYmKHk9eCk7dmFyIG1hdHJpeD1uZXcgQ2FudmFzTWF0cml4NDttYXRyaXgubTExPXgsbWF0cml4Lm0yMj15LG1hdHJpeC5tMzM9eix0aGlzLm11bHRSaWdodChtYXRyaXgpfSxDYW52YXNNYXRyaXg0LnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24oYW5nbGUseCx5LHope2FuZ2xlPWFuZ2xlLzE4MCpNYXRoLlBJLGFuZ2xlLz0yO3ZhciBzaW5BPU1hdGguc2luKGFuZ2xlKSxjb3NBPU1hdGguY29zKGFuZ2xlKSxzaW5BMj1zaW5BKnNpbkEsbGVuZ3RoPU1hdGguc3FydCh4KngreSp5K3oqeik7MD09PWxlbmd0aD8oeD0wLHk9MCx6PTEpOjEhPWxlbmd0aCYmKHgvPWxlbmd0aCx5Lz1sZW5ndGgsei89bGVuZ3RoKTt2YXIgbWF0PW5ldyBDYW52YXNNYXRyaXg0O2lmKDE9PXgmJjA9PT15JiYwPT09eiltYXQubTExPTEsbWF0Lm0xMj0wLG1hdC5tMTM9MCxtYXQubTIxPTAsbWF0Lm0yMj0xLTIqc2luQTIsbWF0Lm0yMz0yKnNpbkEqY29zQSxtYXQubTMxPTAsbWF0Lm0zMj0tMipzaW5BKmNvc0EsbWF0Lm0zMz0xLTIqc2luQTIsbWF0Lm0xND1tYXQubTI0PW1hdC5tMzQ9MCxtYXQubTQxPW1hdC5tNDI9bWF0Lm00Mz0wLG1hdC5tNDQ9MTtlbHNlIGlmKDA9PT14JiYxPT15JiYwPT09eiltYXQubTExPTEtMipzaW5BMixtYXQubTEyPTAsbWF0Lm0xMz0tMipzaW5BKmNvc0EsbWF0Lm0yMT0wLG1hdC5tMjI9MSxtYXQubTIzPTAsbWF0Lm0zMT0yKnNpbkEqY29zQSxtYXQubTMyPTAsbWF0Lm0zMz0xLTIqc2luQTIsbWF0Lm0xND1tYXQubTI0PW1hdC5tMzQ9MCxtYXQubTQxPW1hdC5tNDI9bWF0Lm00Mz0wLG1hdC5tNDQ9MTtlbHNlIGlmKDA9PT14JiYwPT09eSYmMT09eiltYXQubTExPTEtMipzaW5BMixtYXQubTEyPTIqc2luQSpjb3NBLG1hdC5tMTM9MCxtYXQubTIxPS0yKnNpbkEqY29zQSxtYXQubTIyPTEtMipzaW5BMixtYXQubTIzPTAsbWF0Lm0zMT0wLG1hdC5tMzI9MCxtYXQubTMzPTEsbWF0Lm0xND1tYXQubTI0PW1hdC5tMzQ9MCxtYXQubTQxPW1hdC5tNDI9bWF0Lm00Mz0wLG1hdC5tNDQ9MTtlbHNle3ZhciB4Mj14KngseTI9eSp5LHoyPXoqejttYXQubTExPTEtMiooeTIrejIpKnNpbkEyLG1hdC5tMTI9MiooeCp5KnNpbkEyK3oqc2luQSpjb3NBKSxtYXQubTEzPTIqKHgqeipzaW5BMi15KnNpbkEqY29zQSksbWF0Lm0yMT0yKih5Kngqc2luQTIteipzaW5BKmNvc0EpLG1hdC5tMjI9MS0yKih6Mit4Mikqc2luQTIsbWF0Lm0yMz0yKih5Knoqc2luQTIreCpzaW5BKmNvc0EpLG1hdC5tMzE9Miooeip4KnNpbkEyK3kqc2luQSpjb3NBKSxtYXQubTMyPTIqKHoqeSpzaW5BMi14KnNpbkEqY29zQSksbWF0Lm0zMz0xLTIqKHgyK3kyKSpzaW5BMixtYXQubTE0PW1hdC5tMjQ9bWF0Lm0zND0wLG1hdC5tNDE9bWF0Lm00Mj1tYXQubTQzPTAsbWF0Lm00ND0xfXRoaXMubXVsdFJpZ2h0KG1hdCl9LENhbnZhc01hdHJpeDQucHJvdG90eXBlLm11bHRSaWdodD1mdW5jdGlvbihtYXQpe3ZhciBtMTE9dGhpcy5tMTEqbWF0Lm0xMSt0aGlzLm0xMiptYXQubTIxK3RoaXMubTEzKm1hdC5tMzErdGhpcy5tMTQqbWF0Lm00MSxtMTI9dGhpcy5tMTEqbWF0Lm0xMit0aGlzLm0xMiptYXQubTIyK3RoaXMubTEzKm1hdC5tMzIrdGhpcy5tMTQqbWF0Lm00MixtMTM9dGhpcy5tMTEqbWF0Lm0xMyt0aGlzLm0xMiptYXQubTIzK3RoaXMubTEzKm1hdC5tMzMrdGhpcy5tMTQqbWF0Lm00MyxtMTQ9dGhpcy5tMTEqbWF0Lm0xNCt0aGlzLm0xMiptYXQubTI0K3RoaXMubTEzKm1hdC5tMzQrdGhpcy5tMTQqbWF0Lm00NCxtMjE9dGhpcy5tMjEqbWF0Lm0xMSt0aGlzLm0yMiptYXQubTIxK3RoaXMubTIzKm1hdC5tMzErdGhpcy5tMjQqbWF0Lm00MSxtMjI9dGhpcy5tMjEqbWF0Lm0xMit0aGlzLm0yMiptYXQubTIyK3RoaXMubTIzKm1hdC5tMzIrdGhpcy5tMjQqbWF0Lm00MixtMjM9dGhpcy5tMjEqbWF0Lm0xMyt0aGlzLm0yMiptYXQubTIzK3RoaXMubTIzKm1hdC5tMzMrdGhpcy5tMjQqbWF0Lm00MyxtMjQ9dGhpcy5tMjEqbWF0Lm0xNCt0aGlzLm0yMiptYXQubTI0K3RoaXMubTIzKm1hdC5tMzQrdGhpcy5tMjQqbWF0Lm00NCxtMzE9dGhpcy5tMzEqbWF0Lm0xMSt0aGlzLm0zMiptYXQubTIxK3RoaXMubTMzKm1hdC5tMzErdGhpcy5tMzQqbWF0Lm00MSxtMzI9dGhpcy5tMzEqbWF0Lm0xMit0aGlzLm0zMiptYXQubTIyK3RoaXMubTMzKm1hdC5tMzIrdGhpcy5tMzQqbWF0Lm00MixtMzM9dGhpcy5tMzEqbWF0Lm0xMyt0aGlzLm0zMiptYXQubTIzK3RoaXMubTMzKm1hdC5tMzMrdGhpcy5tMzQqbWF0Lm00MyxtMzQ9dGhpcy5tMzEqbWF0Lm0xNCt0aGlzLm0zMiptYXQubTI0K3RoaXMubTMzKm1hdC5tMzQrdGhpcy5tMzQqbWF0Lm00NCxtNDE9dGhpcy5tNDEqbWF0Lm0xMSt0aGlzLm00MiptYXQubTIxK3RoaXMubTQzKm1hdC5tMzErdGhpcy5tNDQqbWF0Lm00MSxtNDI9dGhpcy5tNDEqbWF0Lm0xMit0aGlzLm00MiptYXQubTIyK3RoaXMubTQzKm1hdC5tMzIrdGhpcy5tNDQqbWF0Lm00MixtNDM9dGhpcy5tNDEqbWF0Lm0xMyt0aGlzLm00MiptYXQubTIzK3RoaXMubTQzKm1hdC5tMzMrdGhpcy5tNDQqbWF0Lm00MyxtNDQ9dGhpcy5tNDEqbWF0Lm0xNCt0aGlzLm00MiptYXQubTI0K3RoaXMubTQzKm1hdC5tMzQrdGhpcy5tNDQqbWF0Lm00NDt0aGlzLm0xMT1tMTEsdGhpcy5tMTI9bTEyLHRoaXMubTEzPW0xMyx0aGlzLm0xND1tMTQsdGhpcy5tMjE9bTIxLHRoaXMubTIyPW0yMix0aGlzLm0yMz1tMjMsdGhpcy5tMjQ9bTI0LHRoaXMubTMxPW0zMSx0aGlzLm0zMj1tMzIsdGhpcy5tMzM9bTMzLHRoaXMubTM0PW0zNCx0aGlzLm00MT1tNDEsdGhpcy5tNDI9bTQyLHRoaXMubTQzPW00Myx0aGlzLm00ND1tNDR9LENhbnZhc01hdHJpeDQucHJvdG90eXBlLm11bHRMZWZ0PWZ1bmN0aW9uKG1hdCl7dmFyIG0xMT1tYXQubTExKnRoaXMubTExK21hdC5tMTIqdGhpcy5tMjErbWF0Lm0xMyp0aGlzLm0zMSttYXQubTE0KnRoaXMubTQxLG0xMj1tYXQubTExKnRoaXMubTEyK21hdC5tMTIqdGhpcy5tMjIrbWF0Lm0xMyp0aGlzLm0zMittYXQubTE0KnRoaXMubTQyLG0xMz1tYXQubTExKnRoaXMubTEzK21hdC5tMTIqdGhpcy5tMjMrbWF0Lm0xMyp0aGlzLm0zMyttYXQubTE0KnRoaXMubTQzLG0xND1tYXQubTExKnRoaXMubTE0K21hdC5tMTIqdGhpcy5tMjQrbWF0Lm0xMyp0aGlzLm0zNCttYXQubTE0KnRoaXMubTQ0LG0yMT1tYXQubTIxKnRoaXMubTExK21hdC5tMjIqdGhpcy5tMjErbWF0Lm0yMyp0aGlzLm0zMSttYXQubTI0KnRoaXMubTQxLG0yMj1tYXQubTIxKnRoaXMubTEyK21hdC5tMjIqdGhpcy5tMjIrbWF0Lm0yMyp0aGlzLm0zMittYXQubTI0KnRoaXMubTQyLG0yMz1tYXQubTIxKnRoaXMubTEzK21hdC5tMjIqdGhpcy5tMjMrbWF0Lm0yMyp0aGlzLm0zMyttYXQubTI0KnRoaXMubTQzLG0yND1tYXQubTIxKnRoaXMubTE0K21hdC5tMjIqdGhpcy5tMjQrbWF0Lm0yMyp0aGlzLm0zNCttYXQubTI0KnRoaXMubTQ0LG0zMT1tYXQubTMxKnRoaXMubTExK21hdC5tMzIqdGhpcy5tMjErbWF0Lm0zMyp0aGlzLm0zMSttYXQubTM0KnRoaXMubTQxLG0zMj1tYXQubTMxKnRoaXMubTEyK21hdC5tMzIqdGhpcy5tMjIrbWF0Lm0zMyp0aGlzLm0zMittYXQubTM0KnRoaXMubTQyLG0zMz1tYXQubTMxKnRoaXMubTEzK21hdC5tMzIqdGhpcy5tMjMrbWF0Lm0zMyp0aGlzLm0zMyttYXQubTM0KnRoaXMubTQzLG0zND1tYXQubTMxKnRoaXMubTE0K21hdC5tMzIqdGhpcy5tMjQrbWF0Lm0zMyp0aGlzLm0zNCttYXQubTM0KnRoaXMubTQ0LG00MT1tYXQubTQxKnRoaXMubTExK21hdC5tNDIqdGhpcy5tMjErbWF0Lm00Myp0aGlzLm0zMSttYXQubTQ0KnRoaXMubTQxLG00Mj1tYXQubTQxKnRoaXMubTEyK21hdC5tNDIqdGhpcy5tMjIrbWF0Lm00Myp0aGlzLm0zMittYXQubTQ0KnRoaXMubTQyLG00Mz1tYXQubTQxKnRoaXMubTEzK21hdC5tNDIqdGhpcy5tMjMrbWF0Lm00Myp0aGlzLm0zMyttYXQubTQ0KnRoaXMubTQzLG00ND1tYXQubTQxKnRoaXMubTE0K21hdC5tNDIqdGhpcy5tMjQrbWF0Lm00Myp0aGlzLm0zNCttYXQubTQ0KnRoaXMubTQ0O3RoaXMubTExPW0xMSx0aGlzLm0xMj1tMTIsdGhpcy5tMTM9bTEzLHRoaXMubTE0PW0xNCx0aGlzLm0yMT1tMjEsdGhpcy5tMjI9bTIyLHRoaXMubTIzPW0yMyx0aGlzLm0yND1tMjQsdGhpcy5tMzE9bTMxLHRoaXMubTMyPW0zMix0aGlzLm0zMz1tMzMsdGhpcy5tMzQ9bTM0LHRoaXMubTQxPW00MSx0aGlzLm00Mj1tNDIsdGhpcy5tNDM9bTQzLHRoaXMubTQ0PW00NH0sQ2FudmFzTWF0cml4NC5wcm90b3R5cGUub3J0aG89ZnVuY3Rpb24obGVmdCxyaWdodCxib3R0b20sdG9wLG5lYXIsZmFyKXt2YXIgdHg9KGxlZnQrcmlnaHQpLyhsZWZ0LXJpZ2h0KSx0eT0odG9wK2JvdHRvbSkvKGJvdHRvbS10b3ApLHR6PShmYXIrbmVhcikvKG5lYXItZmFyKSxtYXRyaXg9bmV3IENhbnZhc01hdHJpeDQ7bWF0cml4Lm0xMT0yLyhyaWdodC1sZWZ0KSxtYXRyaXgubTEyPTAsbWF0cml4Lm0xMz0wLG1hdHJpeC5tMTQ9MCxtYXRyaXgubTIxPTAsbWF0cml4Lm0yMj0yLyh0b3AtYm90dG9tKSxtYXRyaXgubTIzPTAsbWF0cml4Lm0yND0wLG1hdHJpeC5tMzE9MCxtYXRyaXgubTMyPTAsbWF0cml4Lm0zMz0tMi8oZmFyLW5lYXIpLG1hdHJpeC5tMzQ9MCxtYXRyaXgubTQxPXR4LG1hdHJpeC5tNDI9dHksbWF0cml4Lm00Mz10eixtYXRyaXgubTQ0PTEsdGhpcy5tdWx0UmlnaHQobWF0cml4KX0sQ2FudmFzTWF0cml4NC5wcm90b3R5cGUuZnJ1c3R1bT1mdW5jdGlvbihsZWZ0LHJpZ2h0LGJvdHRvbSx0b3AsbmVhcixmYXIpe3ZhciBtYXRyaXg9bmV3IENhbnZhc01hdHJpeDQsQT0ocmlnaHQrbGVmdCkvKHJpZ2h0LWxlZnQpLEI9KHRvcCtib3R0b20pLyh0b3AtYm90dG9tKSxDPS0oZmFyK25lYXIpLyhmYXItbmVhciksRD0tKDIqZmFyKm5lYXIpLyhmYXItbmVhcik7bWF0cml4Lm0xMT0yKm5lYXIvKHJpZ2h0LWxlZnQpLG1hdHJpeC5tMTI9MCxtYXRyaXgubTEzPTAsbWF0cml4Lm0xND0wLG1hdHJpeC5tMjE9MCxtYXRyaXgubTIyPTIqbmVhci8odG9wLWJvdHRvbSksbWF0cml4Lm0yMz0wLG1hdHJpeC5tMjQ9MCxtYXRyaXgubTMxPUEsbWF0cml4Lm0zMj1CLG1hdHJpeC5tMzM9QyxtYXRyaXgubTM0PS0xLG1hdHJpeC5tNDE9MCxtYXRyaXgubTQyPTAsbWF0cml4Lm00Mz1ELG1hdHJpeC5tNDQ9MCx0aGlzLm11bHRSaWdodChtYXRyaXgpfSxDYW52YXNNYXRyaXg0LnByb3RvdHlwZS5wZXJzcGVjdGl2ZT1mdW5jdGlvbihmb3Z5LGFzcGVjdCx6TmVhcix6RmFyKXt2YXIgdG9wPU1hdGgudGFuKGZvdnkqTWF0aC5QSS8zNjApKnpOZWFyLGJvdHRvbT0tdG9wLGxlZnQ9YXNwZWN0KmJvdHRvbSxyaWdodD1hc3BlY3QqdG9wO3RoaXMuZnJ1c3R1bShsZWZ0LHJpZ2h0LGJvdHRvbSx0b3Asek5lYXIsekZhcil9LENhbnZhc01hdHJpeDQucHJvdG90eXBlLmxvb2thdD1mdW5jdGlvbihleWV4LGV5ZXksZXlleixjZW50ZXJ4LGNlbnRlcnksY2VudGVyeix1cHgsdXB5LHVweil7dmFyIHh4LHh5LHh6LG1hdHJpeD1uZXcgQ2FudmFzTWF0cml4NCx6eD1leWV4LWNlbnRlcngsenk9ZXlleS1jZW50ZXJ5LHp6PWV5ZXotY2VudGVyeixtYWc9TWF0aC5zcXJ0KHp4Knp4K3p5Knp5K3p6Knp6KTttYWcmJih6eC89bWFnLHp5Lz1tYWcsenovPW1hZyk7dmFyIHl4PXVweCx5eT11cHkseXo9dXB6O3h4PXl5Knp6LXl6Knp5LHh5PS15eCp6eit5eip6eCx4ej15eCp6eS15eSp6eCx5eD16eSp4ei16eip4eSx5eT0tengqeHorenoqeHgseXg9engqeHktenkqeHgsbWFnPU1hdGguc3FydCh4eCp4eCt4eSp4eSt4eip4eiksbWFnJiYoeHgvPW1hZyx4eS89bWFnLHh6Lz1tYWcpLG1hZz1NYXRoLnNxcnQoeXgqeXgreXkqeXkreXoqeXopLG1hZyYmKHl4Lz1tYWcseXkvPW1hZyx5ei89bWFnKSxtYXRyaXgubTExPXh4LG1hdHJpeC5tMTI9eHksbWF0cml4Lm0xMz14eixtYXRyaXgubTE0PTAsbWF0cml4Lm0yMT15eCxtYXRyaXgubTIyPXl5LG1hdHJpeC5tMjM9eXosbWF0cml4Lm0yND0wLG1hdHJpeC5tMzE9engsbWF0cml4Lm0zMj16eSxtYXRyaXgubTMzPXp6LG1hdHJpeC5tMzQ9MCxtYXRyaXgubTQxPTAsbWF0cml4Lm00Mj0wLG1hdHJpeC5tNDM9MCxtYXRyaXgubTQ0PTEsbWF0cml4LnRyYW5zbGF0ZSgtZXlleCwtZXlleSwtZXlleiksdGhpcy5tdWx0UmlnaHQobWF0cml4KX0sQ2FudmFzTWF0cml4NC5wcm90b3R5cGUuX2RldGVybWluYW50MngyPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBhKmQtYipjfSxDYW52YXNNYXRyaXg0LnByb3RvdHlwZS5fZGV0ZXJtaW5hbnQzeDM9ZnVuY3Rpb24oYTEsYTIsYTMsYjEsYjIsYjMsYzEsYzIsYzMpe3JldHVybiBhMSp0aGlzLl9kZXRlcm1pbmFudDJ4MihiMixiMyxjMixjMyktYjEqdGhpcy5fZGV0ZXJtaW5hbnQyeDIoYTIsYTMsYzIsYzMpK2MxKnRoaXMuX2RldGVybWluYW50MngyKGEyLGEzLGIyLGIzKX0sQ2FudmFzTWF0cml4NC5wcm90b3R5cGUuX2RldGVybWluYW50NHg0PWZ1bmN0aW9uKCl7dmFyIGExPXRoaXMubTExLGIxPXRoaXMubTEyLGMxPXRoaXMubTEzLGQxPXRoaXMubTE0LGEyPXRoaXMubTIxLGIyPXRoaXMubTIyLGMyPXRoaXMubTIzLGQyPXRoaXMubTI0LGEzPXRoaXMubTMxLGIzPXRoaXMubTMyLGMzPXRoaXMubTMzLGQzPXRoaXMubTM0LGE0PXRoaXMubTQxLGI0PXRoaXMubTQyLGM0PXRoaXMubTQzLGQ0PXRoaXMubTQ0O3JldHVybiBhMSp0aGlzLl9kZXRlcm1pbmFudDN4MyhiMixiMyxiNCxjMixjMyxjNCxkMixkMyxkNCktYjEqdGhpcy5fZGV0ZXJtaW5hbnQzeDMoYTIsYTMsYTQsYzIsYzMsYzQsZDIsZDMsZDQpK2MxKnRoaXMuX2RldGVybWluYW50M3gzKGEyLGEzLGE0LGIyLGIzLGI0LGQyLGQzLGQ0KS1kMSp0aGlzLl9kZXRlcm1pbmFudDN4MyhhMixhMyxhNCxiMixiMyxiNCxjMixjMyxjNCl9LENhbnZhc01hdHJpeDQucHJvdG90eXBlLl9tYWtlQWRqb2ludD1mdW5jdGlvbigpe3ZhciBhMT10aGlzLm0xMSxiMT10aGlzLm0xMixjMT10aGlzLm0xMyxkMT10aGlzLm0xNCxhMj10aGlzLm0yMSxiMj10aGlzLm0yMixjMj10aGlzLm0yMyxkMj10aGlzLm0yNCxhMz10aGlzLm0zMSxiMz10aGlzLm0zMixjMz10aGlzLm0zMyxkMz10aGlzLm0zNCxhND10aGlzLm00MSxiND10aGlzLm00MixjND10aGlzLm00MyxkND10aGlzLm00NDt0aGlzLm0xMT10aGlzLl9kZXRlcm1pbmFudDN4MyhiMixiMyxiNCxjMixjMyxjNCxkMixkMyxkNCksdGhpcy5tMjE9LXRoaXMuX2RldGVybWluYW50M3gzKGEyLGEzLGE0LGMyLGMzLGM0LGQyLGQzLGQ0KSx0aGlzLm0zMT10aGlzLl9kZXRlcm1pbmFudDN4MyhhMixhMyxhNCxiMixiMyxiNCxkMixkMyxkNCksdGhpcy5tNDE9LXRoaXMuX2RldGVybWluYW50M3gzKGEyLGEzLGE0LGIyLGIzLGI0LGMyLGMzLGM0KSx0aGlzLm0xMj0tdGhpcy5fZGV0ZXJtaW5hbnQzeDMoYjEsYjMsYjQsYzEsYzMsYzQsZDEsZDMsZDQpLHRoaXMubTIyPXRoaXMuX2RldGVybWluYW50M3gzKGExLGEzLGE0LGMxLGMzLGM0LGQxLGQzLGQ0KSx0aGlzLm0zMj0tdGhpcy5fZGV0ZXJtaW5hbnQzeDMoYTEsYTMsYTQsYjEsYjMsYjQsZDEsZDMsZDQpLHRoaXMubTQyPXRoaXMuX2RldGVybWluYW50M3gzKGExLGEzLGE0LGIxLGIzLGI0LGMxLGMzLGM0KSx0aGlzLm0xMz10aGlzLl9kZXRlcm1pbmFudDN4MyhiMSxiMixiNCxjMSxjMixjNCxkMSxkMixkNCksdGhpcy5tMjM9LXRoaXMuX2RldGVybWluYW50M3gzKGExLGEyLGE0LGMxLGMyLGM0LGQxLGQyLGQ0KSx0aGlzLm0zMz10aGlzLl9kZXRlcm1pbmFudDN4MyhhMSxhMixhNCxiMSxiMixiNCxkMSxkMixkNCksdGhpcy5tNDM9LXRoaXMuX2RldGVybWluYW50M3gzKGExLGEyLGE0LGIxLGIyLGI0LGMxLGMyLGM0KSx0aGlzLm0xND0tdGhpcy5fZGV0ZXJtaW5hbnQzeDMoYjEsYjIsYjMsYzEsYzIsYzMsZDEsZDIsZDMpLHRoaXMubTI0PXRoaXMuX2RldGVybWluYW50M3gzKGExLGEyLGEzLGMxLGMyLGMzLGQxLGQyLGQzKSx0aGlzLm0zND0tdGhpcy5fZGV0ZXJtaW5hbnQzeDMoYTEsYTIsYTMsYjEsYjIsYjMsZDEsZDIsZDMpLHRoaXMubTQ0PXRoaXMuX2RldGVybWluYW50M3gzKGExLGEyLGEzLGIxLGIyLGIzLGMxLGMyLGMzKX07Cg=="></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">A Note on Transparency</h1>
<h4 class="author">Duncan Murdoch</h4>
<h4 class="date">24/10/2020</h4>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#correct-drawing">Correct Drawing</a></li>
<li><a href="#incorrect-sorting">Incorrect sorting</a></li>
<li><a href="#mask-or-not">Mask or Not?</a></li>
<li><a href="#recommendation">Recommendation</a></li>
<li><a href="#example">Example</a></li>
</ul>
</div>

<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>When drawing transparent surfaces, <code>rgl</code> tries to sort objects from back to front to get better rendering of transparency. However, it doesnt sort each pixel separately, so some pixels end up drawn in the incorrect order. This note describes the consequences of that error, and suggests remedies.</p>
</div>
<div id="correct-drawing" class="section level2">
<h2>Correct Drawing</h2>
<p>Well assume that the standard <code>glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)</code> blending is used. That is, when drawing with transparency <span class="math inline">\(\alpha\)</span>, the new colour is mixed at proportion <span class="math inline">\(\alpha\)</span> with the colour previously drawn (which gets weight <span class="math inline">\(1-\alpha\)</span>.)</p>
<p>This note is concerned with what happens when two transparent objects are drawn at the same location. We suppose the further one has transparency <span class="math inline">\(\alpha_1\)</span>, and the closer one has transparency <span class="math inline">\(\alpha_2\)</span>. If they are drawn in the correct order (further first), the three colours (background, further object, closer object) should end up mixed in proportions <span class="math inline">\(C = [(1-\alpha_1)(1-\alpha_2), \alpha_1(1-\alpha_2), \alpha_2]\)</span> respectively.</p>
</div>
<div id="incorrect-sorting" class="section level2">
<h2>Incorrect sorting</h2>
<p>If the objects are drawn in the wrong order, the actual proportions of each colour will be <span class="math inline">\(N = [(1-\alpha_1)(1-\alpha_2), \alpha_1, \alpha_2(1-\alpha_1)]\)</span> if no masking occurs.</p>
<p><code>rgl</code> currently defaults to depth masking using <code>glDepthMask(GL_TRUE)</code>. This means that depths are saved when the objects are drawn, and if an attempt is made to draw the further object after the closer one (i.e.as here), the further object will be culled, and the proportions will be <span class="math inline">\(M = [(1-\alpha_2), 0, \alpha_2]\)</span>.</p>
</div>
<div id="mask-or-not" class="section level2">
<h2>Mask or Not?</h2>
<p>The question is: which is better, <code>glDepthMask(GL_TRUE)</code> or <code>glDepthMask(GL_FALSE)</code>? One way to measure this is to measure the distance between <span class="math inline">\(C\)</span> and the incorrect proportions. (This is unlikely to match perceptual distance, which will depend on the colours as well, but we need something. Some qualitative comments below.)</p>
<p>So we have</p>
<p><span class="math display">\[|C-N|^2 = 2\alpha_1^2\alpha_2^2\]</span>,</p>
<p>and</p>
<p><span class="math display">\[|C-M|^2 = 2\alpha_1^2(1-\alpha_2)^2\]</span>.</p>
<p>Thus the error is larger with <span class="math inline">\(N\)</span> when <span class="math inline">\(\alpha_2 &gt; 1/2\)</span>, and larger with <span class="math inline">\(M\)</span> when <span class="math inline">\(\alpha_2 &lt; 1/2\)</span>. The value of <span class="math inline">\(\alpha_1\)</span> doesnt affect the preference, though small values of <span class="math inline">\(\alpha_1\)</span> will be associated with smaller errors.</p>
<p>Depending on the colours of the background and the two objects, this recommendation could be modified. For example, if the two objects are the same colour (or very close), it doesnt really matter how the 2nd and 3rd proportions are divided up, and <span class="math inline">\(N\)</span> will be best because it gets the background proportion exactly right.</p>
</div>
<div id="recommendation" class="section level2">
<h2>Recommendation</h2>
<p>Typically in <code>rgl</code> we dont know which object will be closer and which one will be further, so we cant base our choice on a single <span class="math inline">\(\alpha_i\)</span>. The recommendation would be to use all small levels of <code>alpha</code> and disable masking, or use all large values of <code>alpha</code> and retain masking.</p>
</div>
<div id="example" class="section level2">
<h2>Example</h2>
<p>The classic example of an impossible to sort scene involves three triangles arranged cyclicly so each one is behind one and in front of one of the others (based on <a href="https://paroj.github.io/gltut/Positioning/Tut05%20Overlap%20and%20Depth%20Buffering.html" class="uri">https://paroj.github.io/gltut/Positioning/Tut05%20Overlap%20and%20Depth%20Buffering.html</a>).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>theta <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>pi<span class="sc">*</span><span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">8</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">/</span><span class="dv">12</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">cos</span>(theta)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">sin</span>(theta)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>), <span class="dv">3</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>xyz <span class="ot">&lt;-</span> <span class="fu">cbind</span>(x, y, z)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>xyz <span class="ot">&lt;-</span> xyz[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">6</span>, <span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">9</span>, <span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">3</span>),]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">open3d</span>()</span></code></pre></div>
<pre><code>## null 
##   42</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par3d</span>(<span class="at">userMatrix =</span> M)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz, <span class="at">col =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>), <span class="at">each =</span> <span class="dv">3</span>))</span></code></pre></div>
<div id="rgl90132" style="width:480px;height:480px;" class="rglWebGL html-widget"></div>
<script type="application/json" data-for="rgl90132">{"x":{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0]},"rootSubscene":496,"objects":{"502":{"id":502,"type":"triangles","material":{},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1],[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1],[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[1,0,0,1],[1,0,0,1],[1,0,0,1],[0,1,0,1],[0,1,0,1],[0,1,0,1],[0,0,1,1],[0,0,1,1],[0,0,1,1]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441],[-0.288675159215927,0.166666686534882,0.333333343267441],[0,-0.333333343267441,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32771},"500":{"id":500,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"499":{"id":499,"type":"background","material":{},"colors":[[0.298039227724075,0.298039227724075,0.298039227724075,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"501":{"id":501,"type":"background","material":{"lit":false,"back":"lines"},"colors":[[1,1,1,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"496":{"id":496,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":496,"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.73205065727234,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[501,502,500],"subscenes":[],"flags":33027}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":480,"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"evals":[],"jsHooks":[]}</script>
<p>To see the effect of the calculations above, consider the following four displays.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">open3d</span>()</span></code></pre></div>
<pre><code>## null 
##   44</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par3d</span>(<span class="at">userMatrix =</span> M)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">layout3d</span>(<span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>), <span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>,<span class="dv">3</span>), </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">sharedMouse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot; &quot;</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot;depth_mask = TRUE&quot;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot;depth_mask = FALSE&quot;</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot;alpha = 0.7&quot;</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz, <span class="at">col =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>), <span class="at">each =</span> <span class="dv">3</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">depth_mask =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz, <span class="at">col =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>), <span class="at">each =</span> <span class="dv">3</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">depth_mask =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot;alpha = 0.3&quot;</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz, <span class="at">col =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>), <span class="at">each =</span> <span class="dv">3</span>), <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">depth_mask =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz, <span class="at">col =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>), <span class="at">each =</span> <span class="dv">3</span>), <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">depth_mask =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="rgl9255" style="width:768px;height:480px;" class="rglWebGL html-widget"></div>
<script type="application/json" data-for="rgl9255">{"x":{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0]},"rootSubscene":509,"objects":{"524":{"id":524,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[[" "]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"525":{"id":525,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[["depth_mask = TRUE"]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"526":{"id":526,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[["depth_mask = FALSE"]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"527":{"id":527,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[["alpha = 0.7"]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"528":{"id":528,"type":"triangles","material":{"alpha":[0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454],"isTransparent":true},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1],[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1],[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[1,0,0,0.69803923368454],[1,0,0,0.69803923368454],[1,0,0,0.69803923368454],[0,1,0,0.69803923368454],[0,1,0,0.69803923368454],[0,1,0,0.69803923368454],[0,0,1,0.69803923368454],[0,0,1,0.69803923368454],[0,0,1,0.69803923368454]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441],[-0.288675159215927,0.166666686534882,0.333333343267441],[0,-0.333333343267441,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32811},"529":{"id":529,"type":"triangles","material":{"alpha":[0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454,0.69803923368454],"depth_mask":false,"isTransparent":true},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1],[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1],[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[1,0,0,0.69803923368454],[1,0,0,0.69803923368454],[1,0,0,0.69803923368454],[0,1,0,0.69803923368454],[0,1,0,0.69803923368454],[0,1,0,0.69803923368454],[0,0,1,0.69803923368454],[0,0,1,0.69803923368454],[0,0,1,0.69803923368454]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441],[-0.288675159215927,0.166666686534882,0.333333343267441],[0,-0.333333343267441,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32811},"530":{"id":530,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[["alpha = 0.3"]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"531":{"id":531,"type":"triangles","material":{"alpha":[0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075],"isTransparent":true},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1],[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1],[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[1,0,0,0.298039227724075],[1,0,0,0.298039227724075],[1,0,0,0.298039227724075],[0,1,0,0.298039227724075],[0,1,0,0.298039227724075],[0,1,0,0.298039227724075],[0,0,1,0.298039227724075],[0,0,1,0.298039227724075],[0,0,1,0.298039227724075]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441],[-0.288675159215927,0.166666686534882,0.333333343267441],[0,-0.333333343267441,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32811},"532":{"id":532,"type":"triangles","material":{"alpha":[0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075,0.298039227724075],"depth_mask":false,"isTransparent":true},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1],[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1],[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[1,0,0,0.298039227724075],[1,0,0,0.298039227724075],[1,0,0,0.298039227724075],[0,1,0,0.298039227724075],[0,1,0,0.298039227724075],[0,1,0,0.298039227724075],[0,0,1,0.298039227724075],[0,0,1,0.298039227724075],[0,0,1,0.298039227724075]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441],[-0.288675159215927,0.166666686534882,0.333333343267441],[0,-0.333333343267441,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32811},"513":{"id":513,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"512":{"id":512,"type":"background","material":{},"colors":[[0.298039227724075,0.298039227724075,0.298039227724075,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"514":{"id":514,"type":"background","material":{"lit":false,"back":"lines"},"colors":[[1,1,1,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"515":{"id":515,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[515,516,517,518,519,520,521,522,523],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[2.63438892364502,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0.85546875,"width":0.19921875,"height":0.140625},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[524,513],"parent":509,"subscenes":[],"flags":34064},"516":{"id":516,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[515,516,517,518,519,520,521,522,523],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[1.31719446182251,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.19921875,"y":0.85546875,"width":0.3984375,"height":0.140625},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[525,513],"parent":509,"subscenes":[],"flags":34064},"517":{"id":517,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[515,516,517,518,519,520,521,522,523],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[1.31719446182251,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.59765625,"y":0.85546875,"width":0.3984375,"height":0.140625},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[526,513],"parent":509,"subscenes":[],"flags":34064},"518":{"id":518,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[515,516,517,518,519,520,521,522,523],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,1.74618887901306,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0.42578125,"width":0.19921875,"height":0.42578125},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[527,513],"parent":509,"subscenes":[],"flags":34064},"519":{"id":519,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[515,516,517,518,519,520,521,522,523],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.49237775802612,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.19921875,"y":0.42578125,"width":0.3984375,"height":0.42578125},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[528,513],"parent":509,"subscenes":[],"flags":33067},"520":{"id":520,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[515,516,517,518,519,520,521,522,523],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.49237775802612,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.59765625,"y":0.42578125,"width":0.3984375,"height":0.42578125},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[529,513],"parent":509,"subscenes":[],"flags":33067},"521":{"id":521,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[515,516,517,518,519,520,521,522,523],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,1.74618887901306,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0,"width":0.19921875,"height":0.42578125},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[530,513],"parent":509,"subscenes":[],"flags":34064},"522":{"id":522,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[515,516,517,518,519,520,521,522,523],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.49237775802612,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.19921875,"y":0,"width":0.3984375,"height":0.42578125},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[531,513],"parent":509,"subscenes":[],"flags":33067},"523":{"id":523,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[515,516,517,518,519,520,521,522,523],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.49237775802612,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.59765625,"y":0,"width":0.3984375,"height":0.42578125},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[532,513],"parent":509,"subscenes":[],"flags":33067},"509":{"id":509,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":509,"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[3.40282346638529e+38,-3.40282346638529e+38,3.40282346638529e+38,-3.40282346638529e+38,3.40282346638529e+38,-3.40282346638529e+38],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[514,513,515,516,517,518,519,520,521,522,523],"subscenes":[515,516,517,518,519,520,521,522,523],"flags":34107}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":768,"height":480,"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"evals":[],"jsHooks":[]}</script>
<p>As you rotate the figures, you can see imperfections in rendering. On the right, the last drawn appears to be on top, while on the left, the first drawn appears more opaque than it should.</p>
<p>In the figure below, the three triangles each have different transparency, and each use the recommended setting:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">open3d</span>()</span></code></pre></div>
<pre><code>## null 
##   46</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par3d</span>(<span class="at">userMatrix =</span> M)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,], <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">depth_mask =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz[<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>,], <span class="at">col =</span> <span class="st">&quot;green&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">depth_mask =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz[<span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>,], <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">depth_mask =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div id="rgl85704" style="width:480px;height:480px;" class="rglWebGL html-widget"></div>
<script type="application/json" data-for="rgl85704">{"x":{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0]},"rootSubscene":539,"objects":{"545":{"id":545,"type":"triangles","material":{"alpha":0.298039227724075,"depth_mask":false,"isTransparent":true},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1]],"colors":[[1,0,0,0.298039227724075]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969]],"ignoreExtent":false,"flags":32811},"546":{"id":546,"type":"triangles","material":{"alpha":0.69803923368454,"isTransparent":true},"vertices":[[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1]],"colors":[[0,1,0,0.69803923368454]],"centers":[[-0.288675159215927,0.166666686534882,0.333333343267441]],"normals":[[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969]],"ignoreExtent":false,"flags":32811},"547":{"id":547,"type":"triangles","material":{},"vertices":[[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[0,0,1,1]],"centers":[[0,-0.333333343267441,0.333333343267441]],"normals":[[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32771},"543":{"id":543,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"542":{"id":542,"type":"background","material":{},"colors":[[0.298039227724075,0.298039227724075,0.298039227724075,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"544":{"id":544,"type":"background","material":{"lit":false,"back":"lines"},"colors":[[1,1,1,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"539":{"id":539,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":539,"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.73205065727234,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[544,545,546,547,543],"subscenes":[],"flags":33067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":480,"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"evals":[],"jsHooks":[]}</script>
<p>In this figure, all three triangles are the same colour, only lighting affects the display:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">open3d</span>()</span></code></pre></div>
<pre><code>## null 
##   48</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par3d</span>(<span class="at">userMatrix =</span> M)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">layout3d</span>(<span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>),</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>), <span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>,<span class="dv">3</span>), </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">sharedMouse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot; &quot;</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot;depth_mask = TRUE&quot;</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot;depth_mask = FALSE&quot;</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot;alpha = 0.7&quot;</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">depth_mask =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">depth_mask =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="fu">text3d</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="st">&quot;alpha = 0.3&quot;</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">depth_mask =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="fu">next3d</span>()</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="fu">triangles3d</span>(xyz, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">depth_mask =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="rgl49927" style="width:768px;height:480px;" class="rglWebGL html-widget"></div>
<script type="application/json" data-for="rgl49927">{"x":{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0]},"rootSubscene":554,"objects":{"569":{"id":569,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[[" "]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"570":{"id":570,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[["depth_mask = TRUE"]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"571":{"id":571,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[["depth_mask = FALSE"]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"572":{"id":572,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[["alpha = 0.7"]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"573":{"id":573,"type":"triangles","material":{"alpha":0.69803923368454,"isTransparent":true},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1],[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1],[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[1,0,0,0.69803923368454]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441],[-0.288675159215927,0.166666686534882,0.333333343267441],[0,-0.333333343267441,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32811},"574":{"id":574,"type":"triangles","material":{"alpha":0.69803923368454,"depth_mask":false,"isTransparent":true},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1],[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1],[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[1,0,0,0.69803923368454]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441],[-0.288675159215927,0.166666686534882,0.333333343267441],[0,-0.333333343267441,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32811},"575":{"id":575,"type":"text","material":{"lit":false},"vertices":[[0,0,0]],"colors":[[0,0,0,1]],"texts":[["alpha = 0.3"]],"cex":[[1]],"adj":[[0.5,0.5]],"centers":[[0,0,0]],"family":[["sans"]],"font":[[1]],"ignoreExtent":false,"flags":33808},"576":{"id":576,"type":"triangles","material":{"alpha":0.298039227724075,"isTransparent":true},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1],[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1],[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[1,0,0,0.298039227724075]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441],[-0.288675159215927,0.166666686534882,0.333333343267441],[0,-0.333333343267441,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32811},"577":{"id":577,"type":"triangles","material":{"alpha":0.298039227724075,"depth_mask":false,"isTransparent":true},"vertices":[[1,0,0],[0.866025388240814,0.5,0],[-1,1.22464685258517e-16,1],[-0.5,0.866025388240814,0],[-0.866025388240814,0.5,0],[0.5,-0.866025388240814,1],[-0.5,-0.866025388240814,0],[-1.83697014652885e-16,-1,0],[0.5,0.866025388240814,1]],"colors":[[1,0,0,0.298039227724075]],"centers":[[0.288675159215927,0.16666667163372,0.333333343267441],[-0.288675159215927,0.166666686534882,0.333333343267441],[0,-0.333333343267441,0.333333343267441]],"normals":[[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[0.444036930799484,0.118979349732399,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.325057566165924,0.325057566165924,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969],[-0.118979349732399,-0.444036930799484,0.888073861598969]],"ignoreExtent":false,"flags":32811},"558":{"id":558,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"557":{"id":557,"type":"background","material":{},"colors":[[0.298039227724075,0.298039227724075,0.298039227724075,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"559":{"id":559,"type":"background","material":{"lit":false,"back":"lines"},"colors":[[1,1,1,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"560":{"id":560,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[560,561,562,563,564,565,566,567,568],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[2.63438892364502,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0.85546875,"width":0.19921875,"height":0.140625},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[569,558],"parent":554,"subscenes":[],"flags":34064},"561":{"id":561,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[560,561,562,563,564,565,566,567,568],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[1.31719446182251,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.19921875,"y":0.85546875,"width":0.3984375,"height":0.140625},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[570,558],"parent":554,"subscenes":[],"flags":34064},"562":{"id":562,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[560,561,562,563,564,565,566,567,568],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[1.31719446182251,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.59765625,"y":0.85546875,"width":0.3984375,"height":0.140625},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[571,558],"parent":554,"subscenes":[],"flags":34064},"563":{"id":563,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[560,561,562,563,564,565,566,567,568],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,1.74618887901306,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0.42578125,"width":0.19921875,"height":0.42578125},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[572,558],"parent":554,"subscenes":[],"flags":34064},"564":{"id":564,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[560,561,562,563,564,565,566,567,568],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.49237775802612,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.19921875,"y":0.42578125,"width":0.3984375,"height":0.42578125},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[573,558],"parent":554,"subscenes":[],"flags":33067},"565":{"id":565,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[560,561,562,563,564,565,566,567,568],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.49237775802612,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.59765625,"y":0.42578125,"width":0.3984375,"height":0.42578125},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[574,558],"parent":554,"subscenes":[],"flags":33067},"566":{"id":566,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[560,561,562,563,564,565,566,567,568],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,1.74618887901306,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0,"width":0.19921875,"height":0.42578125},"zoom":1,"bbox":[0,0,0,0,0,0],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[575,558],"parent":554,"subscenes":[],"flags":34064},"567":{"id":567,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[560,561,562,563,564,565,566,567,568],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.49237775802612,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.19921875,"y":0,"width":0.3984375,"height":0.42578125},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[576,558],"parent":554,"subscenes":[],"flags":33067},"568":{"id":568,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":[560,561,562,563,564,565,566,567,568],"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,5.62631750106812],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,-0.012203705497086],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0.0801142752170563],[-0.0130676832050085,0.02762770652771,0.999532878398895,-6.12423324584961],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.49237775802612,0,0],[0,0,-3.86370301246643,-20.2822208404541],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0.59765625,"y":0,"width":0.3984375,"height":0.42578125},"zoom":1,"bbox":[-1,1,-1,0.866025388240814,0,1],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"inherit"},"objects":[577,558],"parent":554,"subscenes":[],"flags":33067},"554":{"id":554,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":554,"mouseMode":{"left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,3.86370325088501],"modelMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,-3.86370325088501],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370325088501,-13.9282026290894],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[0.997410774230957,-0.0703366547822952,0.0149840852245688,0],[0.0707177817821503,0.99714070558548,-0.0266370177268982,0],[-0.0130676832050085,0.02762770652771,0.999532878398895,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[3.40282346638529e+38,-3.40282346638529e+38,3.40282346638529e+38,-3.40282346638529e+38,3.40282346638529e+38,-3.40282346638529e+38],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":false,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[559,558,560,561,562,563,564,565,566,567,568],"subscenes":[560,561,562,563,564,565,566,567,568],"flags":34107}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":768,"height":480,"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"evals":[],"jsHooks":[]}</script>
<p>Here <code>depth_mask = FALSE</code> seems to be the right choice in both cases.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
